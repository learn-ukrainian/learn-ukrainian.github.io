<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Module 08: All Cases Practice | Ukrainian A2</title>
  <style>
:root { --primary: #1a5fb4; --primary-light: #3584e4; --success: #26a269; --warning: #e5a50a; --danger: #c01c28; --bg: #fafafa; --card-bg: #fff; --text: #1e1e1e; --text-muted: #5e5e5e; --border: #e0e0e0; }
* { box-sizing: border-box; margin: 0; padding: 0; }
body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: var(--bg); color: var(--text); line-height: 1.6; }
.top-nav { background: #2e2e2e; color: white; padding: 0.5rem 2rem; display: flex; justify-content: space-between; align-items: center; font-size: 0.875rem; }
.top-nav a { color: white; text-decoration: none; }
.top-nav a:hover { text-decoration: underline; }
.module-nav { display: flex; gap: 1rem; align-items: center; }
.module-nav-link { color: rgba(255,255,255,0.8); text-decoration: none; padding: 0.25rem 0.5rem; }
.module-nav-link:hover { color: white; }
.module-nav-link.disabled { color: rgba(255,255,255,0.3); pointer-events: none; }
.nav { position: sticky; top: 0; background: var(--primary); color: white; padding: 1rem 2rem; display: flex; justify-content: space-between; align-items: center; z-index: 100; }
.nav h1 { font-size: 1.25rem; }
.nav-tabs { display: flex; gap: 0.5rem; }
.nav-tab { background: rgba(255,255,255,0.2); border: none; color: white; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer; }
.nav-tab.active { background: white; color: var(--primary); }
main { max-width: 1000px; margin: 0 auto; padding: 2rem; }
.section { display: none; } .section.active { display: block; }
.lesson-header { text-align: center; margin-bottom: 2rem; padding: 2rem; background: linear-gradient(135deg, #e8f4fd, #f0e8fd); border-radius: 12px; }
.level-badge { background: var(--primary); color: white; padding: 0.25rem 0.75rem; border-radius: 4px; font-size: 0.875rem; }
.card { background: var(--card-bg); border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); padding: 1.5rem; margin-bottom: 1.5rem; }
.card h3 { color: var(--primary); margin-bottom: 1rem; }
.section-intro { border-left: 4px solid var(--primary); }
.section-intro h3 { color: var(--primary); }
.section-topic { border-left: 4px solid var(--border); }
.section-summary { background: linear-gradient(135deg, #f0f9ff, #e8f4fd); border-left: 4px solid var(--success); }
.section-summary h3 { color: var(--success); }
.canvas-note { background: #fffbeb; border-left: 4px solid var(--warning); padding: 1rem; margin: 1rem 0; border-radius: 0 8px 8px 0; }
.canvas-note h4 { color: var(--warning); margin-bottom: 0.5rem; }
.md-content { line-height: 1.7; }
.md-content p { margin: 0.75rem 0; }
.md-content ul, .md-content ol { margin: 0.75rem 0; padding-left: 1.5rem; }
.md-content li { margin: 0.25rem 0; }
.md-content strong { color: var(--primary); }
.md-content blockquote { background: #e8f4fd; border-left: 4px solid var(--primary); padding: 0.75rem 1rem; margin: 1rem 0; border-radius: 0 8px 8px 0; }
.md-content blockquote p { margin: 0.25rem 0; }
.md-content table { width: 100%; border-collapse: collapse; margin: 1rem 0; font-size: 0.9rem; }
.md-content th, .md-content td { border: 1px solid var(--border); padding: 0.5rem 0.75rem; text-align: left; }
.md-content th { background: #f5f5f5; font-weight: 600; }
.md-content code { background: #f0f0f0; padding: 0.125rem 0.375rem; border-radius: 4px; font-family: monospace; font-size: 0.9em; }
.md-content details { background: #f8f9fa; border: 1px solid var(--border); border-radius: 8px; padding: 0; margin: 1rem 0; }
.md-content details summary { background: linear-gradient(135deg, #e8f4fd, #f0e8fd); padding: 0.75rem 1rem; cursor: pointer; font-weight: 600; color: var(--primary); border-radius: 8px; list-style: none; display: flex; align-items: center; gap: 0.5rem; }
.md-content details summary::-webkit-details-marker { display: none; }
.md-content details summary::before { content: '‚ñ∂'; font-size: 0.75rem; transition: transform 0.2s; }
.md-content details[open] summary::before { transform: rotate(90deg); }
.md-content details[open] summary { border-radius: 8px 8px 0 0; }
.md-content details > *:not(summary) { padding: 0 1rem; }
.md-content details > *:last-child { padding-bottom: 1rem; }
.md-content p > details { margin: 0; }
.md-content p:has(> details) { margin: 1rem 0; }
.inline-answer { background: linear-gradient(135deg, #d4edda, #e8f4fd); padding: 0.125rem 0.5rem; border-radius: 4px; transition: opacity 0.2s; }
.inline-answer.hidden { opacity: 0; user-select: none; }
.answer-toggle-btn { display: inline-flex; align-items: center; gap: 0.5rem; background: linear-gradient(135deg, #e8f4fd, #f0e8fd); border: 1px solid var(--primary); color: var(--primary); padding: 0.5rem 1rem; border-radius: 8px; cursor: pointer; font-size: 0.875rem; font-weight: 600; margin: 1rem 0; }
.answer-toggle-btn:hover { background: var(--primary); color: white; }
.answer-toggle-btn svg { width: 1rem; height: 1rem; }
.letter-groups { display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; margin: 1.5rem 0; }
.letter-group { border: 2px solid var(--border); border-radius: 8px; padding: 1rem; text-align: center; }
.letter-group.true-friends { border-color: var(--success); } .letter-group.true-friends .letters { color: var(--success); }
.letter-group.false-friends { border-color: var(--danger); } .letter-group.false-friends .letters { color: var(--danger); }
.letter-group.new-letters { border-color: var(--primary); } .letter-group.new-letters .letters { color: var(--primary); }
.letters { font-size: 1.75rem; letter-spacing: 0.3rem; }
.btn { padding: 0.75rem 1.5rem; border: none; border-radius: 8px; cursor: pointer; }
.btn-primary { background: var(--primary); color: white; }
.btn-outline { background: transparent; border: 2px solid var(--border); }
.btn-group { display: flex; gap: 1rem; justify-content: center; margin-top: 1.5rem; }
.score-display { text-align: center; padding: 1rem; background: linear-gradient(135deg, #e8f8f0, #e8f4fd); border-radius: 8px; margin-bottom: 1rem; }
.score-display .score { font-size: 2rem; font-weight: 700; color: var(--success); }
.completion-message { text-align: center; padding: 2rem; background: linear-gradient(135deg, #d4edda, #e8f4fd); border-radius: 12px; margin-top: 1rem; display: none; }
.completion-message.show { display: block; }
footer { text-align: center; padding: 2rem; color: var(--text-muted); }
@media (max-width: 768px) { .nav { flex-direction: column; gap: 1rem; } .letter-groups, .sort-groups, .quiz-options { grid-template-columns: 1fr; } .match-container { flex-direction: column; } }


/**
 * Layout styles - Navigation, page structure
 */

/* Top Navigation */
.top-nav {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.75rem 1.5rem;
  background: #f8f8f8;
  border-bottom: 1px solid var(--border);
  font-size: 0.875rem;
}

.top-nav a {
  color: var(--text-muted);
}

.top-nav a:hover {
  color: var(--primary);
}

.module-nav {
  display: flex;
  gap: 1rem;
}

.module-nav-link {
  padding: 0.25rem 0.5rem;
  border-radius: 4px;
}

.module-nav-link:hover {
  background: #e8f4fd;
}

/* Main Navigation */
.nav {
  background: linear-gradient(135deg, #1a5fb4, #613583);
  color: white;
  padding: 1.5rem 2rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.nav h1 {
  font-size: 1.5rem;
}

.nav-tabs {
  display: flex;
  gap: 0.5rem;
}

.nav-tab {
  background: rgba(255, 255, 255, 0.2);
  border: none;
  color: white;
  padding: 0.5rem 1rem;
  border-radius: 4px;
  cursor: pointer;
  font-size: 0.875rem;
  transition: background 0.2s;
}

.nav-tab:hover {
  background: rgba(255, 255, 255, 0.3);
}

.nav-tab.active {
  background: white;
  color: var(--primary);
}

/* Main Content */
main {
  max-width: 1000px;
  margin: 0 auto;
  padding: 2rem;
}

/* Sections */
.section {
  display: none;
}

.section.active {
  display: block;
}

/* Lesson Header */
.lesson-header {
  text-align: center;
  margin-bottom: 2rem;
  padding: 2rem;
  background: linear-gradient(135deg, #e8f4fd, #f0e8fd);
  border-radius: 12px;
}

.lesson-header h2 {
  font-size: 2rem;
  margin: 0.5rem 0;
}

/* Section Cards */
.section-intro {
  border-left: 4px solid var(--primary);
}

.section-intro h3 {
  color: var(--primary);
}

.section-topic {
  border-left: 4px solid var(--border);
}

.section-summary {
  background: linear-gradient(135deg, #f0f9ff, #e8f4fd);
  border-left: 4px solid var(--success);
}

.section-summary h3 {
  color: var(--success);
}

/* Canvas Notes */
.canvas-note {
  background: #fffbeb;
  border-left: 4px solid var(--warning);
  padding: 1rem;
  margin: 1rem 0;
  border-radius: 0 8px 8px 0;
}

.canvas-note h4 {
  color: var(--warning);
  margin-bottom: 0.5rem;
}

/* Footer */
footer {
  text-align: center;
  padding: 2rem;
  color: var(--text-muted);
}

/* Responsive Layout */
@media (max-width: 768px) {
  .nav {
    flex-direction: column;
    gap: 1rem;
  }

  .nav h1 {
    font-size: 1.25rem;
    text-align: center;
  }

  .nav-tabs {
    flex-wrap: wrap;
    justify-content: center;
  }

  main {
    padding: 1rem;
  }

  .top-nav {
    flex-direction: column;
    gap: 0.5rem;
  }
}


/* Match Activity */
.match-container { display: flex; gap: 3rem; padding: 1rem; position: relative; }
.match-column { flex: 1; display: flex; flex-direction: column; gap: 0.75rem; }
.match-item { background: var(--card-bg); border: 2px solid var(--border); border-radius: 8px; padding: 1rem; text-align: center; font-size: 1.25rem; cursor: pointer; }
.match-item.selected { border-color: var(--primary); background: #e8f4fd; }
.match-item.matched { border-color: var(--success); background: #e8f8f0; }
.match-item.wrong { border-color: var(--danger); background: #fde8e8; }
.match-lines { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; }

/* Quiz Activity */
.quiz-question { border: 1px solid var(--border); border-radius: 12px; padding: 1.5rem; margin-bottom: 1rem; }
.quiz-question.answered { pointer-events: none; }
.quiz-question .cyrillic { font-size: 1.5rem; color: var(--primary); font-weight: 600; }
.quiz-options { display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.75rem; margin-top: 1rem; }
.quiz-option { background: #f5f5f5; border: 2px solid var(--border); border-radius: 8px; padding: 1rem; cursor: pointer; text-align: center; }
.quiz-option.correct { border-color: var(--success); background: #d4edda; }
.quiz-option.wrong { border-color: var(--danger); background: #f8d7da; }
.quiz-explanation { margin-top: 1rem; padding: 1rem; background: #e8f4fd; border-radius: 8px; display: none; }
.quiz-explanation.show { display: block; }

/* True/False Activity */
.tf-statement { border: 1px solid var(--border); border-radius: 12px; padding: 1.5rem; margin-bottom: 1rem; }
.tf-statement.answered { pointer-events: none; }
.tf-text { font-size: 1.15rem; margin-bottom: 1rem; }
.tf-buttons { display: flex; gap: 1rem; }
.tf-btn { flex: 1; background: #f5f5f5; border: 2px solid var(--border); border-radius: 8px; padding: 0.75rem 1rem; cursor: pointer; font-size: 1rem; font-weight: 500; }
.tf-btn:hover { background: #e8f4fd; border-color: var(--primary); }
.tf-btn.correct { border-color: var(--success); background: #d4edda; color: var(--success); }
.tf-btn.wrong { border-color: var(--danger); background: #f8d7da; color: var(--danger); }
.tf-explanation { margin-top: 1rem; padding: 1rem; background: #e8f4fd; border-radius: 8px; display: none; }
.tf-explanation.show { display: block; }

/* Sort Activity */
.sort-pool { background: #f5f5f5; border: 2px dashed var(--border); border-radius: 12px; padding: 1.5rem; min-height: 80px; margin-bottom: 1rem; }
.sort-items { display: flex; flex-wrap: wrap; gap: 0.5rem; justify-content: center; }
.sort-item { background: var(--card-bg); border: 2px solid var(--border); border-radius: 8px; padding: 0.75rem 1.25rem; font-size: 1.5rem; cursor: grab; }
.sort-item.correct { border-color: var(--success); background: #e8f8f0; }
.sort-item.wrong { border-color: var(--danger); background: #fde8e8; }
.sort-groups { display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; }
.sort-group { border: 2px solid var(--border); border-radius: 12px; padding: 1rem; min-height: 150px; }
.sort-group.drag-over { border-color: var(--primary); background: #e8f4fd; }
.sort-group h4 { font-size: 0.875rem; text-align: center; margin-bottom: 1rem; padding-bottom: 0.5rem; border-bottom: 2px solid var(--border); }
.sort-group.true-friends h4 { color: var(--success); border-color: var(--success); }
.sort-group.false-friends h4 { color: var(--danger); border-color: var(--danger); }
.sort-group.new-letters h4 { color: var(--primary); border-color: var(--primary); }

/* Vocabulary Grid (legacy) */
.vocab-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 1rem; }
.vocab-card { border: 1px solid var(--border); border-radius: 12px; padding: 1.25rem; text-align: center; }
.vocab-card .uk { font-size: 1.75rem; font-weight: 600; color: var(--primary); }
.vocab-card .translit { color: var(--text-muted); font-style: italic; }
.vocab-card .en { font-weight: 500; margin: 0.25rem 0; }
.vocab-card .note { font-size: 0.75rem; color: #613583; background: #f0e8fd; padding: 0.25rem 0.5rem; border-radius: 4px; }

/* Vocabulary Table (book-style) */
.vocab-table-container { overflow-x: auto; }
.vocab-table { width: 100%; border-collapse: collapse; font-size: 1rem; }
.vocab-table thead { background: var(--card-bg); border-bottom: 2px solid var(--border); }
.vocab-table th { padding: 0.75rem 1rem; text-align: left; font-weight: 600; color: var(--text-muted); font-size: 0.875rem; text-transform: uppercase; letter-spacing: 0.5px; }
.vocab-table td { padding: 0.75rem 1rem; border-bottom: 1px solid var(--border); }
.vocab-table tbody tr:hover { background: #f8f9fa; }
.vocab-table .vocab-uk { font-size: 1.25rem; font-weight: 600; color: var(--primary); }
.vocab-table .vocab-translit { color: var(--text-muted); font-style: italic; }
.vocab-table .vocab-ipa { font-family: monospace; color: var(--text-muted); font-size: 0.9rem; }
.vocab-table .vocab-en { font-weight: 500; }
.vocab-table .vocab-note { font-size: 0.85rem; color: #613583; }

/* Answer Callout Blocks */
.callout { padding: 0.5rem 1rem; margin: 0.25rem 0; border-radius: 4px; }
.callout-answer { background: #e8f8f0; border-left: 3px solid var(--success); }
.callout-explanation { background: #e8f4fd; border-left: 3px solid var(--primary); color: var(--text-muted); font-style: italic; }
.callout-alt { background: #f5f5f5; border-left: 3px solid var(--border); color: var(--text-muted); }

/* Answer Block Toggle */
.answer-block { display: none; }
.answer-block.show { display: block; }
.show-answer-btn { background: #f0f0f0; border: 1px solid var(--border); border-radius: 6px; padding: 0.25rem 0.75rem; font-size: 0.8rem; cursor: pointer; color: var(--text-muted); margin: 0.25rem 0; }
.show-answer-btn:hover { background: #e5e5e5; }
.show-answer-btn.revealed { background: #e8f8f0; border-color: var(--success); color: var(--success); }

/* Fill-in Activity - Dropdown in Sentence */
.fill-container { display: flex; flex-direction: column; gap: 0.75rem; }
.fill-question { border: 1px solid var(--border); border-radius: 12px; padding: 1rem 1.5rem; }

.fill-number { font-weight: 600; color: var(--text-muted); margin-right: 0.5rem; }
.fill-sentence { font-size: 1.15rem; line-height: 1.8; }

.fill-dropdown { font-size: 1rem; padding: 0.4rem 0.6rem; border: 2px solid var(--primary); border-radius: 6px; background: #fff; color: var(--primary); font-weight: 500; cursor: pointer; min-width: 120px; }
.fill-dropdown:focus { outline: none; box-shadow: 0 0 0 3px rgba(26, 115, 232, 0.2); }
.fill-dropdown.correct { border-color: var(--success); background: #e8f8f0; color: var(--success); }
.fill-dropdown.wrong { border-color: var(--danger); background: #fde8e8; color: var(--danger); }

.fill-feedback { margin-top: 0.5rem; font-weight: 500; }
.fill-feedback .correct-text { color: var(--success); }
.fill-feedback .wrong-text { color: var(--danger); }
.btn-sm { padding: 0.5rem 1rem; font-size: 0.875rem; }

/* Order/Unjumble Activity */
.order-container { display: flex; flex-direction: column; gap: 1rem; }
.order-items { display: flex; flex-direction: column; gap: 0.5rem; margin-bottom: 1rem; }
.order-item { background: var(--card-bg); border: 2px solid var(--border); border-radius: 8px; padding: 1rem; display: flex; align-items: center; gap: 1rem; cursor: grab; user-select: none; }
.order-item:active { cursor: grabbing; }
.order-item.dragging { opacity: 0.5; }
.order-item.correct { border-color: var(--success); background: #e8f8f0; }
.order-item.wrong { border-color: var(--danger); background: #fde8e8; }
.order-handle { color: var(--text-muted); font-size: 1.25rem; }
.order-text { font-size: 1.1rem; }

/* Unjumble Activity - Drag and Drop */
.unjumble-question { border: 1px solid var(--border); border-radius: 12px; padding: 1rem 1.5rem; margin-bottom: 0.75rem; display: flex; flex-wrap: wrap; align-items: center; gap: 0.75rem; }
.unjumble-question.answered .unjumble-word { cursor: default; }
.unjumble-question.correct { border-color: var(--success); background: #f8fff8; }
.unjumble-question.wrong { border-color: var(--danger); background: #fff8f8; }

.unjumble-number { font-weight: 600; color: var(--text-muted); min-width: 2rem; }

.unjumble-word-row { display: flex; flex-wrap: wrap; gap: 0.5rem; flex: 1; min-height: 42px; padding: 0.25rem; border-radius: 8px; background: #f8f9fa; }
.unjumble-word-row.correct { background: #e8f8f0; }
.unjumble-word-row.wrong { background: #fde8e8; }

.unjumble-word { background: var(--primary); color: white; border-radius: 6px; padding: 0.5rem 0.75rem; font-size: 1rem; cursor: grab; user-select: none; transition: transform 0.1s, box-shadow 0.1s; }
.unjumble-word:hover { transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.15); }
.unjumble-word:active { cursor: grabbing; }
.unjumble-word.dragging { opacity: 0.5; transform: scale(1.05); }

.unjumble-word.touch-clone { position: fixed; z-index: 1000; pointer-events: none; box-shadow: 0 8px 16px rgba(0,0,0,0.2); }

.unjumble-actions { display: flex; gap: 0.5rem; }
.unjumble-feedback { width: 100%; padding: 0.5rem 0 0 2.5rem; display: none; }
.unjumble-feedback.show { display: block; }
.unjumble-feedback .correct-text { color: var(--success); font-weight: 600; }
.unjumble-feedback .wrong-text { color: var(--danger); }
.unjumble-feedback .translation { color: var(--text-muted); font-style: italic; margin-left: 0.5rem; }

/* Order Sentence Activity - Sentence reordering with unjumble-style UI */
.order-sequence { display: flex; flex-direction: column; align-items: stretch; }
.order-sentence-row { display: flex; flex-direction: column; flex-wrap: nowrap; gap: 0.5rem; min-height: auto; padding: 0.5rem; flex: none; width: 100%; }
.order-sentence-item { background: var(--primary); color: white; border-radius: 8px; padding: 0.75rem 1rem; font-size: 1rem; cursor: grab; user-select: none; display: flex; align-items: center; gap: 0.75rem; transition: transform 0.1s, box-shadow 0.1s; }
.order-sentence-item:hover { transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.15); }
.order-sentence-item:active { cursor: grabbing; }
.order-sentence-item.dragging { opacity: 0.5; transform: scale(1.02); }
.order-sentence-item.correct { background: var(--success); }
.order-sentence-item.wrong { background: var(--danger); }
.order-sentence-item.touch-clone { position: fixed; z-index: 1000; pointer-events: none; box-shadow: 0 8px 16px rgba(0,0,0,0.2); max-width: 90vw; }
.order-num { background: rgba(255,255,255,0.3); padding: 0.25rem 0.5rem; border-radius: 4px; font-weight: 600; min-width: 1.5rem; text-align: center; }
.order-sentence-text { flex: 1; }
.order-feedback { width: 100%; padding: 0.5rem 0; display: none; }
.order-feedback.show { display: block; }
.order-feedback .correct-text { color: var(--success); font-weight: 600; }
.order-feedback .wrong-text { color: var(--danger); }

/* Order Card Activity - New class names for classic order */
.order-items-wrapper { display: flex; flex-direction: column; gap: 0.5rem; margin-bottom: 1rem; }
.order-sentence-card { background: var(--primary); color: white; border-radius: 8px; padding: 0.75rem 1rem; font-size: 1rem; cursor: grab; user-select: none; display: flex; align-items: center; gap: 0.75rem; transition: transform 0.1s, box-shadow 0.1s; }
.order-sentence-card:hover { transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.15); }
.order-sentence-card:active { cursor: grabbing; }
.order-sentence-card.dragging { opacity: 0.5; transform: scale(1.02); }
.order-sentence-card.correct { background: var(--success); }
.order-sentence-card.wrong { background: var(--danger); }
.order-card-num { background: rgba(255,255,255,0.3); padding: 0.25rem 0.5rem; border-radius: 4px; font-weight: 600; min-width: 1.5rem; text-align: center; }
.order-card-text { flex: 1; }
.order-buttons { margin-top: 0.5rem; }

/* Select Activity - Multi-choice checkboxes */
.select-container { display: flex; flex-direction: column; gap: 1rem; }
.select-question { border: 1px solid var(--border); border-radius: 12px; padding: 1.25rem; display: flex; gap: 0.75rem; }
.select-question.answered .select-checkbox { pointer-events: none; }
.select-number { font-weight: 600; color: var(--text-muted); min-width: 2rem; }
.select-content { flex: 1; }
.select-prompt { font-size: 1.1rem; font-weight: 500; margin-bottom: 0.75rem; }
.select-options { display: flex; flex-direction: column; gap: 0.5rem; margin-bottom: 0.75rem; }
.select-option { display: flex; align-items: center; gap: 0.75rem; padding: 0.5rem 0.75rem; border-radius: 6px; cursor: pointer; transition: background 0.15s; }
.select-option:hover { background: #f5f5f5; }
.select-option.correct { background: #d4edda; }
.select-option.correct-unchecked { background: #f8f9fa; }
.select-option.wrong { background: #f8d7da; }
.select-option.missed { background: #fff3cd; border: 1px dashed var(--warning); }
.select-checkbox { width: 1.25rem; height: 1.25rem; cursor: pointer; }
.select-text { font-size: 1rem; }
.select-check { margin-top: 0.5rem; }
.select-feedback { margin-top: 0.75rem; display: none; }
.select-feedback.show { display: block; }
.select-feedback .correct-text { color: var(--success); font-weight: 600; }
.select-feedback .wrong-text { color: var(--danger); }

/* Anagram Activity - Letter reordering to form words */
.anagram-question { border: 1px solid var(--border); border-radius: 12px; padding: 1rem 1.5rem; margin-bottom: 0.75rem; display: flex; flex-wrap: wrap; align-items: center; gap: 0.75rem; }
.anagram-question.answered .anagram-letter { cursor: default; }
.anagram-question.correct { border-color: var(--success); background: #f8fff8; }
.anagram-question.wrong { border-color: var(--danger); background: #fff8f8; }

.anagram-number { font-weight: 600; color: var(--text-muted); min-width: 2rem; }

.anagram-letter-row { display: flex; flex-wrap: wrap; gap: 0.35rem; flex: 1; min-height: 52px; padding: 0.25rem; border-radius: 8px; background: #f8f9fa; }
.anagram-letter-row.correct { background: #e8f8f0; }
.anagram-letter-row.wrong { background: #fde8e8; }

.anagram-letter { background: var(--primary); color: white; border-radius: 8px; padding: 0.6rem 0.9rem; font-size: 1.5rem; font-weight: 600; cursor: grab; user-select: none; transition: transform 0.1s, box-shadow 0.1s; min-width: 2.5rem; text-align: center; }
.anagram-letter:hover { transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.15); }
.anagram-letter:active { cursor: grabbing; }
.anagram-letter.dragging { opacity: 0.5; transform: scale(1.05); }

.anagram-letter.touch-clone { position: fixed; z-index: 1000; pointer-events: none; box-shadow: 0 8px 16px rgba(0,0,0,0.2); }

.anagram-actions { display: flex; gap: 0.5rem; }
.anagram-feedback { width: 100%; padding: 0.5rem 0 0 2.5rem; display: none; }
.anagram-feedback.show { display: block; }
.anagram-feedback .correct-text { color: var(--success); font-weight: 600; }
.anagram-feedback .wrong-text { color: var(--danger); }
.anagram-feedback .translation { color: var(--text-muted); font-style: italic; margin-left: 0.5rem; }

/* Error-Correction Activity - Identify and fix errors */
.error-correction-container { display: flex; flex-direction: column; gap: 0.75rem; }
.error-item { border: 1px solid var(--border); border-radius: 12px; padding: 1rem 1.5rem; margin-bottom: 0.5rem; }
.error-item.completed { opacity: 0.85; }
.error-item.step2 .error-words { background: #f0f9ff; }

.error-sentence { display: flex; align-items: baseline; gap: 0.5rem; font-size: 1.15rem; line-height: 1.8; flex-wrap: wrap; }
.error-number { font-weight: 600; color: var(--text-muted); min-width: 2rem; }
.error-words { display: inline; }

.error-word { cursor: pointer; padding: 0.15rem 0.25rem; border-radius: 4px; transition: background 0.15s, color 0.15s; }
.error-word:hover { background: #e8f4fd; }
.error-word.selected { background: var(--primary); color: white; }
.error-word.found { background: var(--success); color: white; cursor: default; }
.error-word.wrong-selection { background: var(--danger); color: white; animation: shake 0.3s; }
.error-item.completed .error-word { cursor: default; }
.error-item.completed .error-word:hover { background: transparent; }
.error-item.completed .error-word.found { background: var(--success); color: white; }

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-4px); }
  75% { transform: translateX(4px); }
}

.error-no-error-btn { margin-top: 0.75rem; }
.error-options { margin-top: 0.75rem; }
.error-prompt { font-weight: 500; color: var(--text-muted); display: block; margin-bottom: 0.5rem; }
.error-option-btns { display: flex; flex-wrap: wrap; gap: 0.5rem; }
.error-option { background: #f5f5f5; border: 2px solid var(--border); border-radius: 8px; padding: 0.5rem 1rem; cursor: pointer; font-size: 1rem; }
.error-option:hover { border-color: var(--primary); background: #e8f4fd; }
.error-option:disabled { cursor: default; }
.error-option.correct { border-color: var(--success); background: #d4edda; color: var(--success); }
.error-option.wrong { border-color: var(--danger); background: #f8d7da; color: var(--danger); }

.error-feedback { margin-top: 0.75rem; padding: 0.75rem 1rem; border-radius: 8px; background: #f8f9fa; }
.error-feedback .correct-text { color: var(--success); font-weight: 600; }
.error-feedback .wrong-text { color: var(--danger); }
.error-explanation { margin-top: 0.5rem; color: var(--text-muted); font-style: italic; font-size: 0.95rem; }

  </style>
</head>
<body>
  
  <div class="top-nav">
    <a href="../index.html">‚Üê l2-uk-en Curriculum</a>
    <div class="module-nav">
      <a href="module-07.html" class="module-nav-link">‚Üê Module 07</a>
      <a href="index.html" class="module-nav-link">A2 Index</a>
      <a href="module-09.html" class="module-nav-link">Module 09 ‚Üí</a>
    </div>
  </div>
  <nav class="nav">
    <h1>Module 08: All Cases Practice</h1>
    <div class="nav-tabs">
      <button class="nav-tab active" data-section="lesson">Lesson</button>
      <button class="nav-tab" data-section="activity-0">1. Fill</button>
      <button class="nav-tab" data-section="activity-1">2. Match</button>
      <button class="nav-tab" data-section="activity-2">3. Order</button>
      <button class="nav-tab" data-section="activity-3">4. Quiz</button>
      <button class="nav-tab" data-section="activity-4">5. T/F</button>
      <button class="nav-tab" data-section="activity-5">6. Sort</button>
      <button class="nav-tab" data-section="activity-6">7. Fill</button>
      <button class="nav-tab" data-section="activity-7">8. Select</button>
      <button class="nav-tab" data-section="activity-8">9. Order</button>
      <button class="nav-tab" data-section="activity-9">10. Quiz</button>
      <button class="nav-tab" data-section="vocab">Vocab</button>
    </div>
  </nav>
  <main>
    
    <section id="lesson" class="section active">
      <div class="lesson-header">
        <span class="level-badge">A2 ¬∑ A2.1</span>
        <h2 style="font-size:2rem;margin:0.5rem 0">All Cases Practice</h2>
        <p style="color:var(--text-muted)">The Complete Seven-Case System</p>
      </div>
      
    <div class="card section-intro">
      <h3>üìñ Introduction</h3>
      <div class="md-content"><p>You've learned all seven Ukrainian cases! Now it's time to bring them together in one comprehensive practice module. Mastering the case system is like unlocking Ukrainian's secret code ‚Äî once you can choose the right case instinctively, you'll understand and be understood everywhere from Kyiv caf√©s to Lviv marketplaces.</p>
<p>Think of cases as relationship markers. Each case tells you what role a word plays in the sentence: Is it doing the action? Receiving something? Being used as a tool? The beauty of the system is its precision ‚Äî there's never ambiguity about who did what to whom.</p>
<p>By the end of this lesson, you'll be able to confidently choose the right case for any situation.</p>
<hr /></div>
    </div>
  
    <div class="card section-content">
      <h3>The Seven Cases Overview</h3>
      <div class="md-content"><table>
<thead>
<tr>
<th>Case</th>
<th>Question</th>
<th>Use</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>–ù–∞–∑–∏–≤–Ω–∏–π</strong> (Nom.)</td>
<td>–•—Ç–æ? –©–æ?</td>
<td>Subject</td>
</tr>
<tr>
<td><strong>–†–æ–¥–æ–≤–∏–π</strong> (Gen.)</td>
<td>–ö–æ–≥–æ? –ß–æ–≥–æ?</td>
<td>Possession, absence, quantities</td>
</tr>
<tr>
<td><strong>–î–∞–≤–∞–ª—å–Ω–∏–π</strong> (Dat.)</td>
<td>–ö–æ–º—É? –ß–æ–º—É?</td>
<td>Indirect object, recipient</td>
</tr>
<tr>
<td><strong>–ó–Ω–∞—Ö—ñ–¥–Ω–∏–π</strong> (Acc.)</td>
<td>–ö–æ–≥–æ? –©–æ?</td>
<td>Direct object, direction</td>
</tr>
<tr>
<td><strong>–û—Ä—É–¥–Ω–∏–π</strong> (Inst.)</td>
<td>–ö–∏–º? –ß–∏–º?</td>
<td>Instrument, accompaniment</td>
</tr>
<tr>
<td><strong>–ú—ñ—Å—Ü–µ–≤–∏–π</strong> (Loc.)</td>
<td>–ù–∞ –∫–æ–º—É? –ù–∞ —á–æ–º—É?</td>
<td>Location</td>
</tr>
<tr>
<td><strong>–ö–ª–∏—á–Ω–∏–π</strong> (Voc.)</td>
<td>‚Äî</td>
<td>Direct address</td>
</tr>
</tbody>
</table>
<div class="callout callout-tip" data-callout="tip">üí° Did You Know?</div>
<blockquote>
  <p>Ukrainian has more cases than English (which lost most of its case system)! Each case tells you the role a word plays in the sentence.</p>
</blockquote>
<div class="callout callout-tip" data-callout="tip">üìú History Bite</div>
<blockquote>
  <p>Old English had five cases, similar to modern German. Over centuries, English simplified to just "I/me/my" distinctions for pronouns. Ukrainian preserved the full system ‚Äî making it more precise but requiring more endings to learn!</p>
</blockquote>
<hr /></div>
    </div>
  
    <div class="card section-content">
      <h3>Nominative ‚Äî The Subject</h3>
      <div class="md-content"><p>The nominative is the "default" form ‚Äî the one you find in the dictionary. It answers <strong>–•—Ç–æ?</strong> (Who?) for people and <strong>–©–æ?</strong> (What?) for things.</p>
<ul>
<li><strong>–ë—Ä–∞—Ç</strong> —á–∏—Ç–∞—î –∫–Ω–∏–≥—É. (Brother reads a book.)</li>
<li><strong>–ú–∞–º–∞</strong> –≥–æ—Ç—É—î –≤–µ—á–µ—Ä—é. (Mom prepares dinner.)</li>
<li><strong>–°—Ç—É–¥–µ–Ω—Ç–∏</strong> –≤—á–∞—Ç—å—Å—è. (Students study.)</li>
<li><strong>–ö—ñ—Ç</strong> —Å–ø–∏—Ç—å –Ω–∞ –¥–∏–≤–∞–Ω—ñ. (The cat sleeps on the sofa.)</li>
</ul>
<p>The nominative is always the "doer" of the action ‚Äî the one performing the verb.</p>
<hr /></div>
    </div>
  
    <div class="card section-content">
      <h3>Genitive ‚Äî Possession &amp; Absence</h3>
      <div class="md-content"><p>The genitive is the "of" case ‚Äî it shows possession, quantities, and absence. It answers <strong>–ö–æ–≥–æ?</strong> (Of whom?) and <strong>–ß–æ–≥–æ?</strong> (Of what?).</p>
<p><strong>Possession</strong> ‚Äî whose is it?</p>
<ul>
<li>–¶–µ –∫–Ω–∏–≥–∞ <strong>–±—Ä–∞—Ç–∞</strong>. (This is brother's book.)</li>
<li>–º–∞—à–∏–Ω–∞ <strong>—Ç–∞—Ç–∞</strong> (dad's car)</li>
</ul>
<p><strong>Absence</strong> ‚Äî what's missing?</p>
<ul>
<li>–£ –º–µ–Ω–µ –Ω–µ–º–∞—î <strong>—á–∞—Å—É</strong>. (I don't have time.)</li>
<li>–¢—É—Ç –Ω–µ–º–∞—î <strong>–∫–∞–≤–∏</strong>. (There's no coffee here.)</li>
</ul>
<p><strong>Quantities</strong> ‚Äî how much/many?</p>
<ul>
<li>—Å–∫–ª—è–Ω–∫–∞ <strong>–≤–æ–¥–∏</strong> (a glass of water)</li>
<li>–±–∞–≥–∞—Ç–æ <strong>–ª—é–¥–µ–π</strong> (many people)</li>
<li>–∫—ñ–ª–æ–≥—Ä–∞–º <strong>—Ü—É–∫—Ä—É</strong> (a kilogram of sugar)</li>
</ul>
<div class="callout callout-tip" data-callout="tip">‚ö° Pro Tip</div>
<blockquote>
  <p>The genitive is the most frequently used case after nominative. Master it well ‚Äî you'll use it constantly for shopping, describing, and talking about what you don't have!</p>
</blockquote>
<hr /></div>
    </div>
  
    <div class="card section-content">
      <h3>Dative ‚Äî Recipient</h3>
      <div class="md-content"><p>The dative is the "to/for" case ‚Äî it marks who receives something. It answers <strong>–ö–æ–º—É?</strong> (To whom?) and <strong>–ß–æ–º—É?</strong> (To what?).</p>
<p><strong>Giving and telling:</strong></p>
<ul>
<li>–Ø –¥–∞—é –∫–Ω–∏–≥—É <strong>–±—Ä–∞—Ç–æ–≤—ñ</strong>. (I give a book to brother.)</li>
<li>–°–∫–∞–∂–∏ <strong>–º–∞–º—ñ</strong> –ø—Ä–∞–≤–¥—É. (Tell mom the truth.)</li>
<li>–ü–∏—à—É –ª–∏—Å—Ç–∞ <strong>–±–∞–±—É—Å—ñ</strong>. (I'm writing a letter to grandma.)</li>
</ul>
<p><strong>Helping and similar verbs:</strong></p>
<ul>
<li>–î–æ–ø–æ–º–æ–∂–∏ <strong>–º–∞–º—ñ</strong>! (Help mom!)</li>
<li>–ó–∞–≤–∞–∂–∞—é <strong>—Å–µ—Å—Ç—Ä—ñ</strong>. (I'm bothering sister.)</li>
</ul>
<p><strong>Impersonal expressions:</strong></p>
<ul>
<li><strong>–ú–µ–Ω—ñ</strong> —Ö–æ–ª–æ–¥–Ω–æ. (I'm cold. ‚Äî literally: "To me it's cold")</li>
<li><strong>–ô–æ–º—É</strong> —Ü—ñ–∫–∞–≤–æ. (He's interested.)</li>
</ul>
<div class="callout callout-example" data-callout="example">üé¨ Pop Culture Moment</div>
<blockquote>
  <p>The phrase <em>–°–ª–∞–≤–∞ –£–∫—Ä–∞—ó–Ω—ñ!</em> uses dative ‚Äî glory TO Ukraine! The response <em>–ì–µ—Ä–æ—è–º —Å–ª–∞–≤–∞!</em> also uses dative ‚Äî glory TO the heroes!</p>
</blockquote>
<hr /></div>
    </div>
  
    <div class="card section-content">
      <h3>Accusative ‚Äî Direct Object</h3>
      <div class="md-content"><p>The accusative is the "action receiver" case ‚Äî it marks what the action happens to. It answers <strong>–ö–æ–≥–æ?</strong> (Whom?) and <strong>–©–æ?</strong> (What?).</p>
<p><strong>Direct objects:</strong></p>
<ul>
<li>–Ø –±–∞—á—É <strong>–±—Ä–∞—Ç–∞</strong>. (I see brother.)</li>
<li>–í–æ–Ω–∞ —á–∏—Ç–∞—î <strong>–∫–Ω–∏–≥—É</strong>. (She reads a book.)</li>
<li>–ö—É–ø—É—é <strong>–∫–∞–≤—É</strong>. (I'm buying coffee.)</li>
</ul>
<p><strong>Direction</strong> ‚Äî –∫—É–¥–∏? (where to?):</p>
<ul>
<li>–ú–∏ –π–¥–µ–º–æ <strong>–≤ –º–∞–≥–∞–∑–∏–Ω</strong>. (We're going to the store.)</li>
<li>–á–¥—É <strong>–≤ –ö–∏—ó–≤</strong>. (I'm going to Kyiv.)</li>
<li>–ö–ª–∞–¥—É —Ç–µ–ª–µ—Ñ–æ–Ω <strong>–Ω–∞ —Å—Ç—ñ–ª</strong>. (I put the phone onto the table.)</li>
</ul>
<p>Notice the difference: <strong>–≤ –º–∞–≥–∞–∑–∏–Ω—ñ</strong> (locative ‚Äî where?) vs <strong>–≤ –º–∞–≥–∞–∑–∏–Ω</strong> (accusative ‚Äî where to?).</p>
<hr /></div>
    </div>
  
    <div class="card section-content">
      <h3>Instrumental ‚Äî Tool &amp; Accompaniment</h3>
      <div class="md-content"><p>The instrumental is the "by means of" case ‚Äî it shows how something is done or who accompanies you. It answers <strong>–ö–∏–º?</strong> (By whom?) and <strong>–ß–∏–º?</strong> (With what?).</p>
<p><strong>Tools and means:</strong></p>
<ul>
<li>–í–æ–Ω–∞ –ø–∏—à–µ <strong>—Ä—É—á–∫–æ—é</strong>. (She writes with a pen.)</li>
<li>–á–º <strong>–ª–æ–∂–∫–æ—é</strong>. (I eat with a spoon.)</li>
<li>–á–¥—É <strong>–∞–≤—Ç–æ–±—É—Å–æ–º</strong>. (I go by bus.)</li>
</ul>
<p><strong>Companionship:</strong></p>
<ul>
<li>–Ø –π–¥—É <strong>–∑ –±—Ä–∞—Ç–æ–º</strong>. (I go with brother.)</li>
<li>–†–æ–∑–º–æ–≤–ª—è—é <strong>–∑ –º–∞–º–æ—é</strong>. (I'm talking with mom.)</li>
</ul>
<p><strong>Profession</strong> ‚Äî what you work as:</p>
<ul>
<li>–í—ñ–Ω –ø—Ä–∞—Ü—é—î <strong>–ª—ñ–∫–∞—Ä–µ–º</strong>. (He works as a doctor.)</li>
<li>–í–æ–Ω–∞ —Å—Ç–∞–ª–∞ <strong>–≤—á–∏—Ç–µ–ª—å–∫–æ—é</strong>. (She became a teacher.)</li>
</ul>
<div class="callout callout-tip" data-callout="tip">üéÆ Gamer's Corner</div>
<blockquote>
  <p>In S.T.A.L.K.E.R., you travel <strong>–∞–≤—Ç–æ–º–∞—Ç–æ–º —ñ –Ω–æ–∂–µ–º</strong> (with an assault rifle and knife). In real life, hopefully you travel <strong>–∑ –¥—Ä—É–∑—è–º–∏ —ñ —Ä—é–∫–∑–∞–∫–æ–º</strong> (with friends and a backpack)!</p>
</blockquote>
<hr /></div>
    </div>
  
    <div class="card section-content">
      <h3>Locative ‚Äî Location</h3>
      <div class="md-content"><p>The locative is the "location" case ‚Äî it shows where something or someone is. It always requires a preposition (<strong>–≤/—É</strong>, <strong>–Ω–∞</strong>, <strong>–ø–æ</strong>). It answers <strong>–î–µ?</strong> (Where?) and <strong>–ù–∞ —á–æ–º—É?</strong> (On what?).</p>
<p><strong>Inside locations (–≤/—É):</strong></p>
<ul>
<li>–Ø <strong>–≤ –º–∞–≥–∞–∑–∏–Ω—ñ</strong>. (I'm in the store.)</li>
<li>–ñ–∏–≤—É <strong>–≤ –£–∫—Ä–∞—ó–Ω—ñ</strong>. (I live in Ukraine.)</li>
<li>–í–æ–Ω–∞ <strong>–≤ –±—ñ–±–ª—ñ–æ—Ç–µ—Ü—ñ</strong>. (She's in the library.)</li>
</ul>
<p><strong>On surfaces (–Ω–∞):</strong></p>
<ul>
<li>–ö–Ω–∏–≥–∞ <strong>–Ω–∞ —Å—Ç–æ–ª—ñ</strong>. (Book is on the table.)</li>
<li>–ö–∞—Ä—Ç–∏–Ω–∞ <strong>–Ω–∞ —Å—Ç—ñ–Ω—ñ</strong>. (Picture is on the wall.)</li>
<li>–ú–∏ –∑—É—Å—Ç—Ä—ñ–Ω–µ–º–æ—Å—è <strong>–Ω–∞ –≤–æ–∫–∑–∞–ª—ñ</strong>. (We'll meet at the station.)</li>
</ul>
<p><strong>Remember:</strong> Locative is always about WHERE something IS, not where it's going. For movement, use accusative!</p>
<hr /></div>
    </div>
  
    <div class="card section-content">
      <h3>Vocative ‚Äî Direct Address</h3>
      <div class="md-content"><p>The vocative is the "calling" case ‚Äî used when addressing someone directly. No question word, just direct address!</p>
<p><strong>Family:</strong></p>
<ul>
<li><strong>–ú–∞–º–æ</strong>, –¥–µ —Ç–∏? (Mom, where are you?)</li>
<li><strong>–¢–∞—Ç—É</strong>, –¥–æ–ø–æ–º–æ–∂–∏! (Dad, help!)</li>
<li><strong>–ë–∞–±—É—Å—é</strong>, —Ä–æ–∑–∫–∞–∂–∏ –∫–∞–∑–∫—É. (Grandma, tell a story.)</li>
</ul>
<p><strong>Names:</strong></p>
<ul>
<li><strong>–¢–∞—Ä–∞—Å–µ</strong>, –π–¥–∏ —Å—é–¥–∏! (Taras, come here!)</li>
<li><strong>–û–∫—Å–∞–Ω–æ</strong>, –∑–∞—á–µ–∫–∞–π! (Oksana, wait!)</li>
</ul>
<p><strong>Groups:</strong></p>
<ul>
<li><strong>–î—Ä—É–∑—ñ</strong>, –ø–æ—Å–ª—É—Ö–∞–π—Ç–µ! (Friends, listen!)</li>
<li><strong>–ü–∞–Ω—ñ —Ç–∞ –ø–∞–Ω–æ–≤–µ</strong>! (Ladies and gentlemen!)</li>
</ul>
<div class="callout callout-tip" data-callout="tip">üåç Real World</div>
<blockquote>
  <p>You'll hear vocative constantly in Ukraine: <em>–î—Ä—É–∂–µ!</em> (Friend!), <em>–ü–∞–Ω–µ!</em> (Sir!), <em>–î–æ–±—Ä–æ–¥—ñ—é!</em> (Gentleman!), <em>–°–∏–Ω–∫—É!</em> (Son!). It's much warmer than using the nominative ‚Äî it shows you're really talking TO someone, not about them.</p>
</blockquote>
<hr /></div>
    </div>
  
    <div class="card section-content">
      <h3>Mini-Dialogues: Cases in Action</h3>
      <div class="md-content"><p>Let's see how all seven cases work together in natural conversation.</p>
<h2 id="dialogue1atacoffeeshop">Dialogue 1: At a Coffee Shop</h2>
<p>‚Äî <strong>–û–∫—Å–∞–Ω–æ</strong>, —â–æ —Ç–∏ —Ö–æ—á–µ—à –∑–∞–º–æ–≤–∏—Ç–∏? (Voc + Acc)<br />
‚Äî –Ø —Ö–æ—á—É <strong>–∫–∞–≤—É</strong> –∑ <strong>–º–æ–ª–æ–∫–æ–º</strong>. (Acc + Inst)<br />
‚Äî –ê –¥–ª—è <strong>–º–µ–Ω–µ</strong> ‚Äî —á–∞–π. –£ –Ω–∏—Ö –Ω–µ–º–∞—î <strong>—Å–æ–∫—É</strong>? (Gen + Gen)<br />
‚Äî –Ñ. –î–∞–π <strong>–æ—Ñ—ñ—Ü—ñ–∞–Ω—Ç—É</strong> –∑–Ω–∞–∫. (Dat)<br />
‚Äî <strong>–ü–∞–Ω–µ</strong>, –º–æ–∂–Ω–∞ –Ω–∞–º —Ä–∞—Ö—É–Ω–æ–∫? (Voc)<br />
‚Äî –ó–≤–∏—á–∞–π–Ω–æ! –í–∞—à —Å—Ç–æ–ª–∏–∫ <strong>—É –∫—É—Ç–∫—É</strong>? (Loc)</p>
<p><em>Notice how each bolded word uses a different case based on its role in the sentence.</em></p>
<h2 id="dialogue2givingdirections">Dialogue 2: Giving Directions</h2>
<p>‚Äî –í–∏–±–∞—á—Ç–µ, –¥–µ <strong>–≤–æ–∫–∑–∞–ª</strong>? (Nom)<br />
‚Äî –ô–¥—ñ—Ç—å <strong>–≤—É–ª–∏—Ü–µ—é –•—Ä–µ—â–∞—Ç–∏–∫</strong> –¥–æ –∫—ñ–Ω—Ü—è. (Inst)<br />
‚Äî –ê –ø–æ—Ç—ñ–º?<br />
‚Äî –ü–æ–≤–µ—Ä–Ω—ñ—Ç—å <strong>—É –ø–∞—Ä–∫</strong> —ñ –ø—Ä–æ–π–¥—ñ—Ç—å <strong>–ø–æ–≤–∑</strong> <strong>—Ñ–æ–Ω—Ç–∞–Ω</strong>. (Acc + Acc)<br />
‚Äî –í–æ–∫–∑–∞–ª –±—É–¥–µ <strong>–ø—Ä–∞–≤–æ—Ä—É—á</strong>? (Nom)<br />
‚Äî –¢–∞–∫, <strong>–±—ñ–ª—è</strong> <strong>–±–∞–Ω–∫—É</strong>. –ù–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç–µ! (Gen)<br />
‚Äî <strong>–î—è–∫—É—é</strong> <strong>–≤–∞–º</strong>! (Dat)</p>
<h2 id="dialogue3familydinner">Dialogue 3: Family Dinner</h2>
<p>‚Äî <strong>–ú–∞–º–æ</strong>, –ø–µ—Ä–µ–¥–∞–π, –±—É–¥—å –ª–∞—Å–∫–∞, <strong>—Å—ñ–ª—å</strong>. (Voc + Acc)<br />
‚Äî –û—Å—å, <strong>—Å–∏–Ω–∫—É</strong>. –ê –¥–µ <strong>—Ç–∞—Ç–æ</strong>? (Voc + Nom)<br />
‚Äî –í—ñ–Ω —Ä–æ–∑–º–æ–≤–ª—è—î <strong>–∑</strong> <strong>—Å—É—Å—ñ–¥–æ–º</strong> <strong>–Ω–∞</strong> <strong>–ø–æ–¥–≤—ñ—Ä'—ó</strong>. (Inst + Loc)<br />
‚Äî –°–∫–∞–∂–∏ <strong>–π–æ–º—É</strong>, —â–æ <strong>–≤–µ—á–µ—Ä—è</strong> –≥–æ—Ç–æ–≤–∞. (Dat + Nom)<br />
‚Äî –î–æ–±—Ä–µ. <strong>–¢–∞—Ç—É</strong>, —ñ–¥–∏ <strong>–¥–æ</strong> <strong>—Å—Ç–æ–ª—É</strong>! (Voc + Gen)</p>
<hr /></div>
    </div>
  
    <div class="card section-content">
      <h3>Case Selection Practice</h3>
      <div class="md-content"><p><strong>Read the sentence and identify which case is needed:</strong></p>
<table>
<thead>
<tr>
<th>Sentence</th>
<th>Case Needed</th>
</tr>
</thead>
<tbody>
<tr>
<td>–Ø –±–∞—á—É ___. (–±—Ä–∞—Ç)</td>
<td>Accusative (direct object)</td>
</tr>
<tr>
<td>–¶–µ –º–∞—à–∏–Ω–∞ ___. (—Ç–∞—Ç–æ)</td>
<td>Genitive (possession)</td>
</tr>
<tr>
<td>–î–∞–π —Ü–µ ___. (–º–∞–º–∞)</td>
<td>Dative (recipient)</td>
</tr>
<tr>
<td>–Ø –π–¥—É –∑ ___. (–¥—Ä—É–≥)</td>
<td>Instrumental (accompaniment)</td>
</tr>
<tr>
<td>–í—ñ–Ω —É ___. (–º–∞–≥–∞–∑–∏–Ω)</td>
<td>Locative (location)</td>
</tr>
</tbody>
</table>
<hr /></div>
    </div>
  
    <div class="card section-content">
      <h3>Common Mistakes to Avoid</h3>
      <div class="md-content"><table>
<thead>
<tr>
<th>Mistake</th>
<th>Why It's Wrong</th>
<th>Correct</th>
</tr>
</thead>
<tbody>
<tr>
<td>–Ø –π–¥—É <strong>–≤ –º–∞–≥–∞–∑–∏–Ω—ñ</strong></td>
<td>Locative = where you ARE, not where you're GOING</td>
<td>–Ø –π–¥—É <strong>–≤ –º–∞–≥–∞–∑–∏–Ω</strong> (Acc)</td>
</tr>
<tr>
<td>–î–∞—é –∫–Ω–∏–≥—É <strong>–º–∞–º–∞</strong></td>
<td>Recipients need dative, not nominative</td>
<td>–î–∞—é –∫–Ω–∏–≥—É <strong>–º–∞–º—ñ</strong> (Dat)</td>
</tr>
<tr>
<td>–ù–µ–º–∞—î <strong>—á–∞—Å</strong></td>
<td>Absence requires genitive</td>
<td>–ù–µ–º–∞—î <strong>—á–∞—Å—É</strong> (Gen)</td>
</tr>
<tr>
<td>–ü–∏—à—É <strong>—Ä—É—á–∫–∞</strong></td>
<td>Tools need instrumental</td>
<td>–ü–∏—à—É <strong>—Ä—É—á–∫–æ—é</strong> (Inst)</td>
</tr>
<tr>
<td><strong>–¢–∞—Ä–∞—Å</strong>, –π–¥–∏!</td>
<td>Direct address needs vocative</td>
<td><strong>–¢–∞—Ä–∞—Å–µ</strong>, –π–¥–∏! (Voc)</td>
</tr>
</tbody>
</table>
<div class="callout callout-tip" data-callout="tip">üéØ Fun Fact</div>
<blockquote>
  <p>The most common case confusion is between accusative and locative with direction words. Remember: <strong>–í –º–∞–≥–∞–∑–∏–Ω</strong> (I'm going TO) vs <strong>–í –º–∞–≥–∞–∑–∏–Ω—ñ</strong> (I'm AT). The ending change is small, but the meaning is completely different!</p>
</blockquote>
<hr /></div>
    </div>
  
    <div class="card section-content">
      <h3>Mixed Practice Sentences</h3>
      <div class="md-content"><p>Let's analyze sentences that use multiple cases together:</p>
<ul>
<li><strong>–ë—Ä–∞—Ç</strong> –¥–∞—î <strong>—Å–µ—Å—Ç—Ä—ñ</strong> <strong>–∫–Ω–∏–≥—É</strong>. (Nom + Dat + Acc)</li>
<li><em>Brother (doer) gives sister (recipient) a book (object)</em></li>
<li>–Ø –ø–∏—à—É <strong>—Ä—É—á–∫–æ—é</strong> –ª–∏—Å—Ç <strong>–º–∞–º—ñ</strong>. (Inst + Dat)</li>
<li><em>I write with a pen a letter to mom</em></li>
<li><strong>–°—Ç—É–¥–µ–Ω—Ç</strong> —á–∏—Ç–∞—î <strong>–≤ –±—ñ–±–ª—ñ–æ—Ç–µ—Ü—ñ</strong>. (Nom + Loc)</li>
<li><em>Student (doer) reads in the library (location)</em></li>
<li>–£ <strong>—Ç–∞—Ç–∞</strong> —î <strong>–º–∞—à–∏–Ω–∞</strong>. (Gen + Nom)</li>
<li><em>At dad's (possession) there is a car (subject)</em></li>
<li>–ú–∏ –π–¥–µ–º–æ <strong>–∑ –¥—Ä—É–∑—è–º–∏</strong> <strong>–≤ –∫—ñ–Ω–æ</strong>. (Inst + Acc)</li>
<li><em>We go with friends (companion) to the cinema (direction)</em></li>
</ul>
<div class="callout callout-tip" data-callout="tip">üí° Did You Know?</div>
<blockquote>
  <p>A single sentence can contain 3-4 different cases! Each word has its role to play. Professional writers and poets sometimes construct sentences using all seven cases ‚Äî a linguistic feat!</p>
</blockquote>
<hr /></div>
    </div>
  
    <div class="card section-content">
      <h3>Common Patterns Summary</h3>
      <div class="md-content"><table>
<thead>
<tr>
<th>Pattern</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td>Subject + Verb</td>
<td>–ë—Ä–∞—Ç —á–∏—Ç–∞—î.</td>
</tr>
<tr>
<td>Verb + Direct Object</td>
<td>–ë–∞—á—É –±—Ä–∞—Ç–∞.</td>
</tr>
<tr>
<td>Give + Dat + Acc</td>
<td>–î–∞—é –±—Ä–∞—Ç–æ–≤—ñ –∫–Ω–∏–≥—É.</td>
</tr>
<tr>
<td>With + Inst</td>
<td>–ó –±—Ä–∞—Ç–æ–º.</td>
</tr>
<tr>
<td>In/At + Loc</td>
<td>–í –º–∞–≥–∞–∑–∏–Ω—ñ.</td>
</tr>
<tr>
<td>Of/From + Gen</td>
<td>–í—ñ–¥ –±—Ä–∞—Ç–∞.</td>
</tr>
<tr>
<td>Hey + Voc</td>
<td>–ë—Ä–∞—Ç–µ!</td>
</tr>
</tbody>
</table>
<hr />
<hr />
<hr /></div>
    </div>
  
      
    <div class="card section-summary">
      <h3>üìã Summary</h3>
      <div class="md-content"><p>Congratulations! You've practiced:</p>
<ul>
<li><strong>Nominative</strong>: Subject (–ë—Ä–∞—Ç —á–∏—Ç–∞—î)</li>
<li><strong>Genitive</strong>: Possession, absence, quantities (–∫–Ω–∏–≥–∞ –±—Ä–∞—Ç–∞, –Ω–µ–º–∞—î —á–∞—Å—É)</li>
<li><strong>Dative</strong>: Recipient, impersonal (–¥–∞—Ç–∏ –º–∞–º—ñ, –º–µ–Ω—ñ —Ö–æ–ª–æ–¥–Ω–æ)</li>
<li><strong>Accusative</strong>: Direct object, direction (–±–∞—á—É –±—Ä–∞—Ç–∞, –π–¥—É –≤ –º–∞–≥–∞–∑–∏–Ω)</li>
<li><strong>Instrumental</strong>: Tool, companion, profession (—Ä—É—á–∫–æ—é, –∑ –¥—Ä—É–≥–æ–º, –ª—ñ–∫–∞—Ä–µ–º)</li>
<li><strong>Locative</strong>: Location (–≤ –º–∞–≥–∞–∑–∏–Ω—ñ, –Ω–∞ —Å—Ç–æ–ª—ñ)</li>
<li><strong>Vocative</strong>: Direct address (–ú–∞–º–æ!, –¢–∞—Ä–∞—Å–µ!)</li>
</ul>
<p><strong>Coming up next</strong>: At the Post Office &amp; Bank ‚Äî practical vocabulary for everyday errands!</p></div>
    </div>
  
      <div class="btn-group">
        <button class="btn btn-primary" onclick="showSection('activity-0')">Activities ‚Üí</button>
      </div>
    </section>
  
    
    <section id="activity-0" class="section"><div class="card"><h3>Choose the Correct Case Form</h3>
      <div class="score-display"><span class="score"><span id="activity-0-score">0</span>/12</span></div>
      <div id="activity-0-container" class="fill-container"></div>
      <div class="completion-message" id="activity-0-complete"><h3>Complete!</h3></div>
      <div class="btn-group"><button class="btn btn-outline" onclick="resetActivity('activity-0')">Reset</button><button class="btn btn-primary" onclick="showSection('activity-1')">Next ‚Üí</button></div>
    </div></section>

    <section id="activity-1" class="section"><div class="card"><h3>Case and Function</h3>
      <div class="score-display"><span class="score"><span id="activity-1-score">0</span>/12</span></div>
      <div class="match-container" id="activity-1-container"><svg class="match-lines" id="activity-1-lines"></svg>
        <div class="match-column" id="activity-1-left"></div>
        <div class="match-column" id="activity-1-right"></div>
      </div>
      <div class="completion-message" id="activity-1-complete"><h3>Perfect!</h3></div>
      <div class="btn-group"><button class="btn btn-outline" onclick="resetActivity('activity-1')">Reset</button><button class="btn btn-primary" onclick="showSection('activity-2')">Next ‚Üí</button></div>
    </div></section>

    <section id="activity-2" class="section"><div class="card"><h3>Word Order</h3>
      <div class="score-display"><span class="score"><span id="activity-2-score">0</span>/12</span></div>
      <div id="activity-2-container" class="order-container"></div>
      <div class="completion-message" id="activity-2-complete"><h3>Perfect Order!</h3></div>
      <div class="btn-group"><button class="btn btn-outline" onclick="resetActivity('activity-2')">Reset</button><button class="btn btn-primary" onclick="showSection('activity-3')">Next ‚Üí</button></div>
    </div></section>

    <section id="activity-3" class="section"><div class="card"><h3>Identify the Case</h3>
      <div class="score-display"><span class="score"><span id="activity-3-score">0</span>/12</span></div>
      <div id="activity-3-container"></div>
      <div class="completion-message" id="activity-3-complete"><h3>Complete!</h3></div>
      <div class="btn-group"><button class="btn btn-outline" onclick="resetActivity('activity-3')">Reset</button><button class="btn btn-primary" onclick="showSection('activity-4')">Next ‚Üí</button></div>
    </div></section>

    <section id="activity-4" class="section"><div class="card"><h3>Case Facts</h3>
      <div class="score-display"><span class="score"><span id="activity-4-score">0</span>/12</span></div>
      <div id="activity-4-container"></div>
      <div class="completion-message" id="activity-4-complete"><h3>Complete!</h3></div>
      <div class="btn-group"><button class="btn btn-outline" onclick="resetActivity('activity-4')">Reset</button><button class="btn btn-primary" onclick="showSection('activity-5')">Next ‚Üí</button></div>
    </div></section>

    <section id="activity-5" class="section"><div class="card"><h3>Case Usage</h3>
      <div class="score-display"><span class="score"><span id="activity-5-score">0</span>/12</span></div>
      <div class="sort-pool" id="activity-5-pool"><div class="sort-items" id="activity-5-items"></div></div>
      <div class="sort-groups" id="activity-5-groups"></div>
      <div class="completion-message" id="activity-5-complete"><h3>All Sorted!</h3></div>
      <div class="btn-group"><button class="btn btn-outline" onclick="resetActivity('activity-5')">Reset</button><button class="btn btn-primary" onclick="showSection('activity-6')">Next ‚Üí</button></div>
    </div></section>

    <section id="activity-6" class="section"><div class="card"><h3>Mixed Case Challenge</h3>
      <div class="score-display"><span class="score"><span id="activity-6-score">0</span>/12</span></div>
      <div id="activity-6-container" class="fill-container"></div>
      <div class="completion-message" id="activity-6-complete"><h3>Complete!</h3></div>
      <div class="btn-group"><button class="btn btn-outline" onclick="resetActivity('activity-6')">Reset</button><button class="btn btn-primary" onclick="showSection('activity-7')">Next ‚Üí</button></div>
    </div></section>

    <section id="activity-7" class="section"><div class="card"><h3>Identify the Case</h3>
      <div class="score-display"><span class="score"><span id="activity-7-score">0</span>/12</span></div>
      <div id="activity-7-container" class="select-container"></div>
      <div class="completion-message" id="activity-7-complete"><h3>Complete!</h3></div>
      <div class="btn-group"><button class="btn btn-outline" onclick="resetActivity('activity-7')">Reset</button><button class="btn btn-primary" onclick="showSection('activity-8')">Next ‚Üí</button></div>
    </div></section>

    <section id="activity-8" class="section"><div class="card"><h3>Complex Case Sentences</h3>
      <div class="score-display"><span class="score"><span id="activity-8-score">0</span>/12</span></div>
      <div id="activity-8-container" class="order-container"></div>
      <div class="completion-message" id="activity-8-complete"><h3>Perfect Order!</h3></div>
      <div class="btn-group"><button class="btn btn-outline" onclick="resetActivity('activity-8')">Reset</button><button class="btn btn-primary" onclick="showSection('activity-9')">Next ‚Üí</button></div>
    </div></section>

    <section id="activity-9" class="section"><div class="card"><h3>Seven Cases Mastery</h3>
      <div class="score-display"><span class="score"><span id="activity-9-score">0</span>/12</span></div>
      <div id="activity-9-container"></div>
      <div class="completion-message" id="activity-9-complete"><h3>Complete!</h3></div>
      <div class="btn-group"><button class="btn btn-outline" onclick="resetActivity('activity-9')">Reset</button><button class="btn btn-primary" onclick="showSection('vocab')">Next ‚Üí</button></div>
    </div></section>
    
    <section id="vocab" class="section">
      <div class="card">
        <h3>–°–ª–æ–≤–Ω–∏–∫ (30)</h3>
        <div class="vocab-table-container">
          <table class="vocab-table">
            <thead><tr>
    <th>–°–ª–æ–≤–æ</th>
    
    <th>IPA</th>
    <th>–ü–µ—Ä–µ–∫–ª–∞–¥</th>
    <th>–ü—Ä–∏–º—ñ—Ç–∫–∞</th>
  </tr></thead>
            <tbody><tr><td class="vocab-uk">–Ω–∞–∑–∏–≤–Ω–∏–π</td><td class="vocab-ipa">/naz…™wÀàn…™j/</td><td class="vocab-en">nominative</td><td class="vocab-note">case name</td></tr><tr><td class="vocab-uk">—Ä–æ–¥–æ–≤–∏–π</td><td class="vocab-ipa">/rodoÀàw…™j/</td><td class="vocab-en">genitive</td><td class="vocab-note">case name</td></tr><tr><td class="vocab-uk">–¥–∞–≤–∞–ª—å–Ω–∏–π</td><td class="vocab-ipa">/daÀàwal ≤n…™j/</td><td class="vocab-en">dative</td><td class="vocab-note">case name</td></tr><tr><td class="vocab-uk">–∑–Ω–∞—Ö—ñ–¥–Ω–∏–π</td><td class="vocab-ipa">/znaÀàxidn…™j/</td><td class="vocab-en">accusative</td><td class="vocab-note">case name</td></tr><tr><td class="vocab-uk">–æ—Ä—É–¥–Ω–∏–π</td><td class="vocab-ipa">/oÀàrudn…™j/</td><td class="vocab-en">instrumental</td><td class="vocab-note">case name</td></tr><tr><td class="vocab-uk">–º—ñ—Å—Ü–µ–≤–∏–π</td><td class="vocab-ipa">/misÀàtÕ°s…õw…™j/</td><td class="vocab-en">locative</td><td class="vocab-note">case name</td></tr><tr><td class="vocab-uk">–∫–ª–∏—á–Ω–∏–π</td><td class="vocab-ipa">/Ààkl…™t Én…™j/</td><td class="vocab-en">vocative</td><td class="vocab-note">case name</td></tr><tr><td class="vocab-uk">–≤—ñ–¥–º—ñ–Ω–æ–∫</td><td class="vocab-ipa">/widÀàminok/</td><td class="vocab-en">case (grammar)</td><td class="vocab-note"></td></tr><tr><td class="vocab-uk">—Ä–µ—á–µ–Ω–Ω—è</td><td class="vocab-ipa">/Ààr…õt É…õn ≤Àêa/</td><td class="vocab-en">sentence</td><td class="vocab-note"></td></tr><tr><td class="vocab-uk">–ø—ñ–¥–º–µ—Ç</td><td class="vocab-ipa">/Ààpidm…õt/</td><td class="vocab-en">subject</td><td class="vocab-note"></td></tr><tr><td class="vocab-uk">–ø—Ä–∏—Å—É–¥–æ–∫</td><td class="vocab-ipa">/pr…™Ààsudok/</td><td class="vocab-en">predicate</td><td class="vocab-note"></td></tr><tr><td class="vocab-uk">–¥–æ–¥–∞—Ç–æ–∫</td><td class="vocab-ipa">/doÀàdatok/</td><td class="vocab-en">object</td><td class="vocab-note"></td></tr><tr><td class="vocab-uk">—Å–∫–ª—è–Ω–∫–∞</td><td class="vocab-ipa">/Ààskl ≤anka/</td><td class="vocab-en">glass</td><td class="vocab-note"></td></tr><tr><td class="vocab-uk">–ª–∏—Å—Ç</td><td class="vocab-ipa">/l…™st/</td><td class="vocab-en">letter</td><td class="vocab-note"></td></tr><tr><td class="vocab-uk">–±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞</td><td class="vocab-ipa">/bibliÀàot…õka/</td><td class="vocab-en">library</td><td class="vocab-note"></td></tr><tr><td class="vocab-uk">–º–∞–≥–∞–∑–∏–Ω</td><td class="vocab-ipa">/ma…¶aÀàz…™n/</td><td class="vocab-en">store</td><td class="vocab-note"></td></tr><tr><td class="vocab-uk">–≤–µ—á–µ—Ä—è</td><td class="vocab-ipa">/weÀàt É…õr ≤a/</td><td class="vocab-en">dinner</td><td class="vocab-note"></td></tr><tr><td class="vocab-uk">—á–∞—Å</td><td class="vocab-ipa">/t Éas/</td><td class="vocab-en">time</td><td class="vocab-note"></td></tr><tr><td class="vocab-uk">–∫—ñ–Ω–æ</td><td class="vocab-ipa">/kiÀàno/</td><td class="vocab-en">cinema</td><td class="vocab-note">indecl.</td></tr><tr><td class="vocab-uk">—Å–ª–∞–≤–∞</td><td class="vocab-ipa">/Ààslawa/</td><td class="vocab-en">glory</td><td class="vocab-note"></td></tr><tr><td class="vocab-uk">–æ—Ñ—ñ—Ü—ñ–∞–Ω—Ç</td><td class="vocab-ipa">/ofitÕ°siÀàant/</td><td class="vocab-en">waiter</td><td class="vocab-note"></td></tr><tr><td class="vocab-uk">—Ä–∞—Ö—É–Ω–æ–∫</td><td class="vocab-ipa">/raÀàxunok/</td><td class="vocab-en">bill, account</td><td class="vocab-note"></td></tr><tr><td class="vocab-uk">–≤–æ–∫–∑–∞–ª</td><td class="vocab-ipa">/wokÀàzal/</td><td class="vocab-en">train station</td><td class="vocab-note"></td></tr><tr><td class="vocab-uk">—Ñ–æ–Ω—Ç–∞–Ω</td><td class="vocab-ipa">/fonÀàtan/</td><td class="vocab-en">fountain</td><td class="vocab-note"></td></tr><tr><td class="vocab-uk">—Å—É—Å—ñ–¥</td><td class="vocab-ipa">/suÀàsid/</td><td class="vocab-en">neighbor</td><td class="vocab-note"></td></tr><tr><td class="vocab-uk">–ø–æ–¥–≤—ñ—Ä&#039;—è</td><td class="vocab-ipa">/podÀàwirja/</td><td class="vocab-en">yard, courtyard</td><td class="vocab-note"></td></tr><tr><td class="vocab-uk">–∫—ñ–ª–æ–≥—Ä–∞–º</td><td class="vocab-ipa">/kiloÀà…¶ram/</td><td class="vocab-en">kilogram</td><td class="vocab-note"></td></tr><tr><td class="vocab-uk">—Ü—É–∫–æ—Ä</td><td class="vocab-ipa">/ÀàtÕ°sukor/</td><td class="vocab-en">sugar</td><td class="vocab-note"></td></tr><tr><td class="vocab-uk">–ª–æ–∂–∫–∞</td><td class="vocab-ipa">/Ààlo íka/</td><td class="vocab-en">spoon</td><td class="vocab-note"></td></tr><tr><td class="vocab-uk">—Å—Ç—ñ–Ω–∞</td><td class="vocab-ipa">/stiÀàna/</td><td class="vocab-en">wall</td><td class="vocab-note"></td></tr></tbody>
          </table>
        </div>
      </div>
      
      <div class="btn-group">
        <button class="btn btn-primary" onclick="showSection('lesson')">‚Üê Back to Lesson</button>
      </div>
    </section>
  </main><footer>Module 08 ¬∑ curricula-opus</footer>
  <script>

    const activitiesData = [{"id":"activity-0","type":"fill-blank","title":"Choose the Correct Case Form","data":{"type":"fill-blank","items":[{"prompt":"–Ø –±–∞—á—É ___ (–±—Ä–∞—Ç).","answer":"–±—Ä–∞—Ç–∞","hints":["–±—Ä–∞—Ç"]},{"prompt":"–¶–µ –∫–Ω–∏–≥–∞ ___ (—Å–µ—Å—Ç—Ä–∞).","answer":"—Å–µ—Å—Ç—Ä–∏","hints":["—Å–µ—Å—Ç—Ä–∞"]},{"prompt":"–î–∞–π —Ü–µ ___ (–º–∞–º–∞).","answer":"–º–∞–º—ñ","hints":["–º–∞–º–∞"]},{"prompt":"–Ø –π–¥—É –∑ ___ (–¥—Ä—É–≥).","answer":"–¥—Ä—É–≥–æ–º","hints":["–¥—Ä—É–≥"]},{"prompt":"–í—ñ–Ω —É ___ (–º–∞–≥–∞–∑–∏–Ω).","answer":"–º–∞–≥–∞–∑–∏–Ω—ñ","hints":["–º–∞–≥–∞–∑–∏–Ω"]},{"prompt":"___ (–¢–∞—Ä–∞—Å), –π–¥–∏ —Å—é–¥–∏!","answer":"–¢–∞—Ä–∞—Å–µ","hints":["–¢–∞—Ä–∞—Å"]},{"prompt":"–£ –º–µ–Ω–µ –Ω–µ–º–∞—î ___ (—á–∞—Å).","answer":"—á–∞—Å—É","hints":["—á–∞—Å"]},{"prompt":"–í–æ–Ω–∞ –ø–∏—à–µ ___ (—Ä—É—á–∫–∞).","answer":"—Ä—É—á–∫–æ—é","hints":["—Ä—É—á–∫–∞"]},{"prompt":"–ú–∏ –π–¥–µ–º–æ –≤ ___ (–∫—ñ–Ω–æ).","answer":"–∫—ñ–Ω–æ","hints":["–∫—ñ–Ω–æ"]},{"prompt":"–î–æ–ø–æ–º–æ–∂–∏ ___ (–±–∞–±—É—Å—è)!","answer":"–±–∞–±—É—Å—ñ","hints":["–±–∞–±—É—Å—è"]},{"prompt":"–ö–Ω–∏–≥–∞ –Ω–∞ ___ (—Å—Ç—ñ–ª).","answer":"—Å—Ç–æ–ª—ñ","hints":["—Å—Ç—ñ–ª"]},{"prompt":"–¶–µ –º–∞—à–∏–Ω–∞ ___ (—Ç–∞—Ç–æ).","answer":"—Ç–∞—Ç–∞","hints":["—Ç–∞—Ç–æ"]}]}},{"id":"activity-1","type":"match-up","title":"Case and Function","data":{"type":"match-up","pairs":[{"left":"Nominative","right":"subject"},{"left":"Genitive","right":"possession"},{"left":"Dative","right":"recipient"},{"left":"Accusative","right":"direct object"},{"left":"Instrumental","right":"tool/companion"},{"left":"Locative","right":"location"},{"left":"Vocative","right":"direct address"},{"left":"Genitive","right":"absence (–Ω–µ–º–∞—î)"},{"left":"Accusative","right":"direction (–∫—É–¥–∏?)"},{"left":"Instrumental","right":"profession (–±—É—Ç–∏)"},{"left":"Dative","right":"impersonal (—Ö–æ–ª–æ–¥–Ω–æ)"},{"left":"Genitive","right":"quantity (–±–∞–≥–∞—Ç–æ)"}],"shuffleRight":true}},{"id":"activity-2","type":"unjumble","title":"Word Order","data":{"type":"unjumble","isUnjumble":true,"items":[{"words":["–±–∞—á—É","–Ø","–±—Ä–∞—Ç–∞","—Å—Ç–∞—Ä—à–æ–≥–æ","—Å–≤–æ–≥–æ","–≤—É–ª–∏—Ü—ñ","–Ω–∞","—á–∞—Å—Ç–æ"],"answer":"–Ø —á–∞—Å—Ç–æ –±–∞—á—É —Å–≤–æ–≥–æ —Å—Ç–∞—Ä—à–æ–≥–æ –±—Ä–∞—Ç–∞ –Ω–∞ –≤—É–ª–∏—Ü—ñ.","translation":"I often see my older brother on the street."},{"words":["–∫–Ω–∏–≥–∞","—Å–µ—Å—Ç—Ä–∏","–¶–µ","–Ω–æ–≤–∞","—É–ª—é–±–ª–µ–Ω–∞","–º–æ—î—ó","–º–æ–ª–æ–¥—à–æ—ó","—Ü—ñ–∫–∞–≤–∞"],"answer":"–¶–µ –Ω–æ–≤–∞ —Ü—ñ–∫–∞–≤–∞ —É–ª—é–±–ª–µ–Ω–∞ –∫–Ω–∏–≥–∞ –º–æ—î—ó –º–æ–ª–æ–¥—à–æ—ó —Å–µ—Å—Ç—Ä–∏.","translation":"This is a new interesting favorite book of my younger sister."},{"words":["—Ü–µ","–º–∞–º—ñ","–î–∞–π","–±—É–¥—å","–ª–∞—Å–∫–∞","—Å—å–æ–≥–æ–¥–Ω—ñ","–≤–≤–µ—á–µ—Ä—ñ","–º–æ—ó–π"],"answer":"–î–∞–π —Ü–µ, –±—É–¥—å –ª–∞—Å–∫–∞, –º–æ—ó–π –º–∞–º—ñ —Å—å–æ–≥–æ–¥–Ω—ñ –≤–≤–µ—á–µ—Ä—ñ.","translation":"Give this to my mom this evening, please."},{"words":["–¥—Ä—É–≥–æ–º","–Ø","–∑","–Ω–∞–π–∫—Ä–∞—â–∏–º","–π–¥—É","—Å–≤–æ—ó–º","–≤","–ø–∞—Ä–∫"],"answer":"–Ø –π–¥—É –∑ —Å–≤–æ—ó–º –Ω–∞–π–∫—Ä–∞—â–∏–º –¥—Ä—É–≥–æ–º –≤ –ø–∞—Ä–∫.","translation":"I'm going with my best friend to the park."},{"words":["–º–∞–≥–∞–∑–∏–Ω—ñ","–í—ñ–Ω","—É","–Ω–æ–≤–æ–º—É","–≤–µ–ª–∏–∫–æ–º—É","–∑–∞—Ä–∞–∑","–ø—Ä–∞—Ü—é—î","–ø—Ä–æ–¥—É–∫—Ç–æ–≤–æ–º—É"],"answer":"–í—ñ–Ω –∑–∞—Ä–∞–∑ –ø—Ä–∞—Ü—é—î —É –Ω–æ–≤–æ–º—É –≤–µ–ª–∏–∫–æ–º—É –ø—Ä–æ–¥—É–∫—Ç–æ–≤–æ–º—É –º–∞–≥–∞–∑–∏–Ω—ñ.","translation":"He now works at a new big grocery store."},{"words":["—Å—é–¥–∏","–¢–∞—Ä–∞—Å–µ","–π–¥–∏","–±—É–¥—å","–ª–∞—Å–∫–∞","–∑–∞—Ä–∞–∑","—à–≤–∏–¥–∫–æ","–º–µ–Ω—ñ"],"answer":"–¢–∞—Ä–∞—Å–µ, –π–¥–∏, –±—É–¥—å –ª–∞—Å–∫–∞, —à–≤–∏–¥–∫–æ —Å—é–¥–∏ –¥–æ –º–µ–Ω–µ.","translation":"Taras, please come quickly here to me."},{"words":["–Ω–µ–º–∞—î","–£","–º–µ–Ω–µ","—á–∞—Å—É","—Å—å–æ–≥–æ–¥–Ω—ñ","–Ω–∞","—Ü–µ","–∑–æ–≤—Å—ñ–º"],"answer":"–£ –º–µ–Ω–µ —Å—å–æ–≥–æ–¥–Ω—ñ –∑–æ–≤—Å—ñ–º –Ω–µ–º–∞—î —á–∞—Å—É –Ω–∞ —Ü–µ.","translation":"I don't have any time for this today."},{"words":["—Ä—É—á–∫–æ—é","—Å–∏–Ω—å–æ—é","–ø–∏—à–µ","–í–æ–Ω–∞","–Ω–æ–≤–æ—é","—Å–≤–æ—î—é","–ª–∏—Å—Ç–∞","–¥–æ–≤–≥–æ–≥–æ"],"answer":"–í–æ–Ω–∞ –ø–∏—à–µ –¥–æ–≤–≥–æ–≥–æ –ª–∏—Å—Ç–∞ —Å–≤–æ—î—é –Ω–æ–≤–æ—é —Å–∏–Ω—å–æ—é —Ä—É—á–∫–æ—é.","translation":"She writes a long letter with her new blue pen."},{"words":["–∫—ñ–Ω–æ","–≤","–π–¥–µ–º–æ","–ú–∏","–Ω–æ–≤–µ","—Å—å–æ–≥–æ–¥–Ω—ñ","–≤–≤–µ—á–µ—Ä—ñ","—Ä–∞–∑–æ–º"],"answer":"–ú–∏ —Å—å–æ–≥–æ–¥–Ω—ñ –≤–≤–µ—á–µ—Ä—ñ —Ä–∞–∑–æ–º –π–¥–µ–º–æ –≤ –Ω–æ–≤–µ –∫—ñ–Ω–æ.","translation":"We're going together to the new cinema this evening."},{"words":["–±–∞–±—É—Å—ñ","–Ω–∞—à—ñ–π","–î–æ–ø–æ–º–æ–∂–∏","–±—É–¥—å","–ª–∞—Å–∫–∞","–ª—é–±—ñ–π","—Å—Ç–∞—Ä–µ–Ω—å–∫—ñ–π","–¥–æ—Ä–æ–≥—ñ–π"],"answer":"–î–æ–ø–æ–º–æ–∂–∏, –±—É–¥—å –ª–∞—Å–∫–∞, –Ω–∞—à—ñ–π –ª—é–±—ñ–π —Å—Ç–∞—Ä–µ–Ω—å–∫—ñ–π –¥–æ—Ä–æ–≥—ñ–π –±–∞–±—É—Å—ñ.","translation":"Please help our dear sweet elderly beloved grandma."},{"words":["—Å—Ç–æ–ª—ñ","–Ω–∞","–∫—É—Ö–æ–Ω–Ω–æ–º—É","–ö–Ω–∏–≥–∞","–ª–µ–∂–∏—Ç—å","–≤–µ–ª–∏–∫–æ–º—É","–Ω–∞—à–æ–º—É","–Ω–æ–≤–æ–º—É"],"answer":"–ö–Ω–∏–≥–∞ –ª–µ–∂–∏—Ç—å –Ω–∞ –Ω–∞—à–æ–º—É –Ω–æ–≤–æ–º—É –≤–µ–ª–∏–∫–æ–º—É –∫—É—Ö–æ–Ω–Ω–æ–º—É —Å—Ç–æ–ª—ñ.","translation":"The book lies on our new big kitchen table."},{"words":["—Å–µ—Å—Ç—Ä—ñ","–∫–Ω–∏–≥—É","–ë—Ä–∞—Ç","–º–æ–ª–æ–¥—à—ñ–π","–¥–∞—î","—Ü—ñ–∫–∞–≤—É","–Ω–æ–≤—É","—Å–≤–æ—ó–π"],"answer":"–ë—Ä–∞—Ç –¥–∞—î —Å–≤–æ—ó–π –º–æ–ª–æ–¥—à—ñ–π —Å–µ—Å—Ç—Ä—ñ –Ω–æ–≤—É —Ü—ñ–∫–∞–≤—É –∫–Ω–∏–≥—É.","translation":"Brother gives his younger sister a new interesting book."}]}},{"id":"activity-3","type":"quiz","title":"Identify the Case","data":{"type":"quiz","questions":[{"question":"In \"–Ø –±–∞—á—É –±—Ä–∞—Ç–∞,\" what case is \"–±—Ä–∞—Ç–∞\"?","options":["Nominative","Genitive","Dative","Accusative"],"correctIndex":3,"explanation":""},{"question":"In \"–¶–µ –∫–Ω–∏–≥–∞ —Å–µ—Å—Ç—Ä–∏,\" what case is \"—Å–µ—Å—Ç—Ä–∏\"?","options":["Nominative","Genitive","Dative","Locative"],"correctIndex":1,"explanation":""},{"question":"In \"–î–∞–π —Ü–µ –º–∞–º—ñ,\" what case is \"–º–∞–º—ñ\"?","options":["Nominative","Genitive","Dative","Locative"],"correctIndex":2,"explanation":""},{"question":"In \"–Ø –π–¥—É –∑ –¥—Ä—É–≥–æ–º,\" what case is \"–¥—Ä—É–≥–æ–º\"?","options":["Accusative","Dative","Instrumental","Locative"],"correctIndex":2,"explanation":""},{"question":"In \"–í—ñ–Ω —É –º–∞–≥–∞–∑–∏–Ω—ñ,\" what case is \"–º–∞–≥–∞–∑–∏–Ω—ñ\"?","options":["Accusative","Genitive","Instrumental","Locative"],"correctIndex":3,"explanation":""},{"question":"In \"–¢–∞—Ä–∞—Å–µ, –π–¥–∏ —Å—é–¥–∏,\" what case is \"–¢–∞—Ä–∞—Å–µ\"?","options":["Nominative","Dative","Accusative","Vocative"],"correctIndex":3,"explanation":""},{"question":"In \"–ë—Ä–∞—Ç —á–∏—Ç–∞—î –∫–Ω–∏–≥—É,\" what case is \"–ë—Ä–∞—Ç\"?","options":["Nominative","Genitive","Accusative","Vocative"],"correctIndex":0,"explanation":""},{"question":"In \"–£ –º–µ–Ω–µ –Ω–µ–º–∞—î —á–∞—Å—É,\" what case is \"—á–∞—Å—É\"?","options":["Nominative","Genitive","Dative","Locative"],"correctIndex":1,"explanation":""},{"question":"In \"–í–æ–Ω–∞ –ø–∏—à–µ —Ä—É—á–∫–æ—é,\" what case is \"—Ä—É—á–∫–æ—é\"?","options":["Accusative","Dative","Instrumental","Locative"],"correctIndex":2,"explanation":""},{"question":"In \"–î–æ–ø–æ–º–æ–∂–∏ –±–∞–±—É—Å—ñ,\" what case is \"–±–∞–±—É—Å—ñ\"?","options":["Nominative","Genitive","Dative","Locative"],"correctIndex":2,"explanation":""},{"question":"In \"–Ø –π–¥—É –≤ –º–∞–≥–∞–∑–∏–Ω,\" what case is \"–º–∞–≥–∞–∑–∏–Ω\"?","options":["Nominative","Genitive","Accusative","Locative"],"correctIndex":2,"explanation":""},{"question":"In \"–°–ª–∞–≤–∞ –£–∫—Ä–∞—ó–Ω—ñ,\" what case is \"–£–∫—Ä–∞—ó–Ω—ñ\"?","options":["Nominative","Genitive","Dative","Locative"],"correctIndex":2,"explanation":""}],"shuffleQuestions":true,"shuffleOptions":true,"showCorrectAnswers":true}},{"id":"activity-4","type":"true-false","title":"Case Facts","data":{"type":"true-false","statements":[{"statement":"Nominative is used for the subject of a sentence.","isTrue":true,"explanation":""},{"statement":"Genitive is used for direct objects.","isTrue":false,"explanation":""},{"statement":"Dative is used for recipients (to whom).","isTrue":true,"explanation":""},{"statement":"Accusative is used for direction (–∫—É–¥–∏?).","isTrue":true,"explanation":""},{"statement":"Instrumental expresses location.","isTrue":false,"explanation":""},{"statement":"Locative always needs a preposition.","isTrue":true,"explanation":""},{"statement":"Vocative is used for possessions.","isTrue":false,"explanation":""},{"statement":"\"–ù–µ–º–∞—î\" requires genitive case.","isTrue":true,"explanation":""},{"statement":"Instrumental can express profession.","isTrue":true,"explanation":""},{"statement":"All seven cases can appear in one sentence.","isTrue":true,"explanation":""},{"statement":"Dative is used in impersonal expressions.","isTrue":true,"explanation":""},{"statement":"Genitive is used for quantities.","isTrue":true,"explanation":""}]}},{"id":"activity-5","type":"group-sort","title":"Case Usage","data":{"type":"group-sort","groups":[{"id":"nominativeaccusative","name":"Nominative/Accusative","items":["subject","direct object","direction"]},{"id":"genitivedative","name":"Genitive/Dative","items":["possession","recipient","absence (–Ω–µ–º–∞—î)","quantity (–±–∞–≥–∞—Ç–æ)","verb dopomahaty"]},{"id":"instrumentallocative","name":"Instrumental/Locative","items":["tool","location","companion (–∑)","profession (–±—É—Ç–∏)"]}],"shuffleItems":true}},{"id":"activity-6","type":"fill-blank","title":"Mixed Case Challenge","data":{"type":"fill-blank","items":[{"prompt":"–Ø —á–∏—Ç–∞—é ___ (–∫–Ω–∏–≥–∞). (accusative)","answer":"–∫–Ω–∏–≥—É","hints":["–∫–Ω–∏–≥–∞"]},{"prompt":"–¶–µ –º–∞—à–∏–Ω–∞ ___ (—Ç–∞—Ç–æ). (genitive)","answer":"—Ç–∞—Ç–∞","hints":["—Ç–∞—Ç–æ"]},{"prompt":"–î–æ–ø–æ–º–æ–∂–∏ ___ (—Å–µ—Å—Ç—Ä–∞). (dative)","answer":"—Å–µ—Å—Ç—Ä—ñ","hints":["—Å–µ—Å—Ç—Ä–∞"]},{"prompt":"–í—ñ–Ω –ø–∏—à–µ ___ (–æ–ª—ñ–≤–µ—Ü—å). (instrumental)","answer":"–æ–ª—ñ–≤—Ü–µ–º","hints":["–æ–ª—ñ–≤–µ—Ü—å"]},{"prompt":"–í–æ–Ω–∞ –∂–∏–≤–µ ___ (–º—ñ—Å—Ç–æ). (locative)","answer":"–≤ –º—ñ—Å—Ç—ñ","hints":["–º—ñ—Å—Ç–æ"]},{"prompt":"___ (–ú–∞—Ä—ñ—è), –π–¥–∏ —Å—é–¥–∏! (vocative)","answer":"–ú–∞—Ä—ñ—î","hints":["–ú–∞—Ä—ñ—è"]},{"prompt":"–£ –º–µ–Ω–µ –Ω–µ–º–∞—î ___ (–≥—Ä–æ—à—ñ). (genitive)","answer":"–≥—Ä–æ—à–µ–π","hints":["–≥—Ä–æ—à—ñ"]},{"prompt":"–Ø –π–¥—É –∑ ___ (–º–∞–º–∞). (instrumental)","answer":"–º–∞–º–æ—é","hints":["–º–∞–º–∞"]},{"prompt":"–ú–∏ —ó–¥–µ–º–æ –≤ ___ (—Å–µ–ª–æ). (accusative)","answer":"—Å–µ–ª–æ","hints":["—Å–µ–ª–æ"]},{"prompt":"–î–∞–π —Ü—é –∫–Ω–∏–≥—É ___ (–≤—á–∏—Ç–µ–ª—å). (dative)","answer":"–≤—á–∏—Ç–µ–ª—é/–≤—á–∏—Ç–µ–ª–µ–≤—ñ","hints":["–≤—á–∏—Ç–µ–ª—å"]},{"prompt":"–ë–∞–≥–∞—Ç–æ ___ (—Å—Ç—É–¥–µ–Ω—Ç). (genitive plural)","answer":"—Å—Ç—É–¥–µ–Ω—Ç—ñ–≤","hints":["—Å—Ç—É–¥–µ–Ω—Ç"]},{"prompt":"–ö—ñ—Ç —Å–ø–∏—Ç—å –Ω–∞ ___ (–¥–∏–≤–∞–Ω). (locative)","answer":"–¥–∏–≤–∞–Ω—ñ","hints":["–¥–∏–≤–∞–Ω"]}]}},{"id":"activity-7","type":"select","title":"Identify the Case","data":{"type":"select","items":[{"question":"–Ø –±–∞—á—É **—Å–µ—Å—Ç—Ä—É**.","options":[{"text":"Nominative","correct":false},{"text":"Genitive","correct":false},{"text":"Dative","correct":false},{"text":"Accusative","correct":true}]},{"question":"–¶–µ –∫–Ω–∏–≥–∞ **–±—Ä–∞—Ç–∞**.","options":[{"text":"Nominative","correct":false},{"text":"Genitive","correct":true},{"text":"Dative","correct":false},{"text":"Accusative","correct":false}]},{"question":"–î–∞–π **–º–∞–º—ñ** –∫–≤—ñ—Ç–∏.","options":[{"text":"Nominative","correct":false},{"text":"Genitive","correct":false},{"text":"Dative","correct":true},{"text":"Accusative","correct":false}]},{"question":"–í—ñ–Ω –ø–∏—à–µ **—Ä—É—á–∫–æ—é**.","options":[{"text":"Accusative","correct":false},{"text":"Dative","correct":false},{"text":"Instrumental","correct":true},{"text":"Locative","correct":false}]},{"question":"–í–æ–Ω–∞ –≤ **–º–∞–≥–∞–∑–∏–Ω—ñ**.","options":[{"text":"Accusative","correct":false},{"text":"Instrumental","correct":false},{"text":"Locative","correct":true},{"text":"Genitive","correct":false}]},{"question":"**–¢–∞—Ä–∞—Å–µ**, –π–¥–∏ —Å—é–¥–∏!","options":[{"text":"Nominative","correct":false},{"text":"Dative","correct":false},{"text":"Accusative","correct":false},{"text":"Vocative","correct":true}]},{"question":"**–ë—Ä–∞—Ç** —á–∏—Ç–∞—î.","options":[{"text":"Nominative","correct":true},{"text":"Genitive","correct":false},{"text":"Accusative","correct":false},{"text":"Dative","correct":false}]},{"question":"–ù–µ–º–∞—î **—á–∞—Å—É**.","options":[{"text":"Nominative","correct":false},{"text":"Genitive","correct":true},{"text":"Dative","correct":false},{"text":"Accusative","correct":false}]},{"question":"–ô–¥—É –∑ **–¥—Ä—É–≥–æ–º**.","options":[{"text":"Dative","correct":false},{"text":"Accusative","correct":false},{"text":"Instrumental","correct":true},{"text":"Locative","correct":false}]},{"question":"–î—è–∫—É—é **–≤–∞–º**.","options":[{"text":"Genitive","correct":false},{"text":"Dative","correct":true},{"text":"Accusative","correct":false},{"text":"Instrumental","correct":false}]},{"question":"–ô–¥—É –≤ **–º–∞–≥–∞–∑–∏–Ω**.","options":[{"text":"Nominative","correct":false},{"text":"Genitive","correct":false},{"text":"Accusative","correct":true},{"text":"Locative","correct":false}]},{"question":"–°–ª–∞–≤–∞ **–£–∫—Ä–∞—ó–Ω—ñ**!","options":[{"text":"Genitive","correct":false},{"text":"Dative","correct":true},{"text":"Accusative","correct":false},{"text":"Locative","correct":false}]}]}},{"id":"activity-8","type":"unjumble","title":"Complex Case Sentences","data":{"type":"unjumble","isUnjumble":true,"items":[{"words":["–∫–Ω–∏–≥—É","–ë—Ä–∞—Ç","–¥–∞—î","—Å–µ—Å—Ç—Ä—ñ","—Ü—ñ–∫–∞–≤—É","–∑","–∫–∞—Ä—Ç–∏–Ω–∫–∞–º–∏","–Ω–æ–≤—É"],"answer":"–ë—Ä–∞—Ç –¥–∞—î —Å–µ—Å—Ç—Ä—ñ –Ω–æ–≤—É —Ü—ñ–∫–∞–≤—É –∫–Ω–∏–≥—É –∑ –∫–∞—Ä—Ç–∏–Ω–∫–∞–º–∏.","translation":"Brother gives sister a new interesting book with pictures."},{"words":["–¥—Ä—É–≥–æ–≤—ñ","–Ø","–¥–æ–ø–æ–º–∞–≥–∞—é","—Ä–æ–±–∏—Ç–∏","–∑–∞–≤–¥–∞–Ω–Ω—è","–¥–æ–º–∞—à–Ω—î","—Å–∫–ª–∞–¥–Ω–µ","–∫–æ–∂–Ω–æ–≥–æ","–¥–Ω—è"],"answer":"–Ø –∫–æ–∂–Ω–æ–≥–æ –¥–Ω—è –¥–æ–ø–æ–º–∞–≥–∞—é –¥—Ä—É–≥–æ–≤—ñ —Ä–æ–±–∏—Ç–∏ —Å–∫–ª–∞–¥–Ω–µ –¥–æ–º–∞—à–Ω—î –∑–∞–≤–¥–∞–Ω–Ω—è.","translation":"I help my friend do difficult homework every day."},{"words":["–º–∞–º—ñ","–î–æ—á–∫–∞","–≥–æ—Ç—É—î","–≤–µ—á–µ—Ä—é","—Å–º–∞—á–Ω—É","–Ω–∞","–∫—É—Ö–Ω—ñ","–≤–µ–ª–∏–∫—ñ–π"],"answer":"–î–æ—á–∫–∞ –≥–æ—Ç—É—î –º–∞–º—ñ —Å–º–∞—á–Ω—É –≤–µ—á–µ—Ä—é –Ω–∞ –≤–µ–ª–∏–∫—ñ–π –∫—É—Ö–Ω—ñ.","translation":"Daughter prepares mom a tasty dinner in the big kitchen."},{"words":["–±–∞—Ç—å–∫–æ–≤—ñ","–°–∏–Ω","–ø–æ–∫–∞–∑—É—î","–º–∞—à–∏–Ω—É","–Ω–æ–≤—É","—Å–≤–æ—é","–≥–∞—Ä–Ω—É","—á–µ—Ä–≤–æ–Ω—É"],"answer":"–°–∏–Ω –ø–æ–∫–∞–∑—É—î –±–∞—Ç—å–∫–æ–≤—ñ —Å–≤–æ—é –Ω–æ–≤—É –≥–∞—Ä–Ω—É —á–µ—Ä–≤–æ–Ω—É –º–∞—à–∏–Ω—É.","translation":"Son shows father his new beautiful red car."},{"words":["–≤—á–∏—Ç–µ–ª–µ–≤—ñ","–°—Ç—É–¥–µ–Ω—Ç–∏","–¥—è–∫—É—é—Ç—å","–∑–∞","—É—Ä–æ–∫","—Ü—ñ–∫–∞–≤–∏–π","–¥—É–∂–µ","–∫–æ–∂–µ–Ω"],"answer":"–°—Ç—É–¥–µ–Ω—Ç–∏ –¥—è–∫—É—é—Ç—å –≤—á–∏—Ç–µ–ª–µ–≤—ñ –∑–∞ –∫–æ–∂–µ–Ω –¥—É–∂–µ —Ü—ñ–∫–∞–≤–∏–π —É—Ä–æ–∫.","translation":"Students thank teacher for every very interesting lesson."},{"words":["–ø–æ–¥—Ä—É–∑—ñ","–í–æ–Ω–∞","—Ä–æ–∑–ø–æ–≤—ñ–¥–∞—î","–ø—Ä–æ","–ø–æ—ó–∑–¥–∫—É","—Å–≤–æ—é","—Ü—ñ–∫–∞–≤—É","–¥–æ–≤–≥—É"],"answer":"–í–æ–Ω–∞ —Ä–æ–∑–ø–æ–≤—ñ–¥–∞—î –ø–æ–¥—Ä—É–∑—ñ –ø—Ä–æ —Å–≤–æ—é –¥–æ–≤–≥—É —Ü—ñ–∫–∞–≤—É –ø–æ—ó–∑–¥–∫—É.","translation":"She tells her friend about her long interesting trip."},{"words":["–ª—ñ–∫–∞—Ä–µ–≤—ñ","–•–≤–æ—Ä–∏–π","–ø–æ—è—Å–Ω—é—î","–ø—Ä–æ","—Å–∏–º–ø—Ç–æ–º–∏","—Å–≤–æ—ó","–≤—Å—ñ","–≤–∞–∂–∫—ñ"],"answer":"–•–≤–æ—Ä–∏–π –ø–æ—è—Å–Ω—é—î –ª—ñ–∫–∞—Ä–µ–≤—ñ –ø—Ä–æ –≤—Å—ñ —Å–≤–æ—ó –≤–∞–∂–∫—ñ —Å–∏–º–ø—Ç–æ–º–∏.","translation":"Patient explains to doctor about all his serious symptoms."},{"words":["–±–∞–±—É—Å—ñ","–í–Ω—É–∫","—Ç–µ–ª–µ—Ñ–æ–Ω—É—î","—â–æ–¥–Ω—è","—Å–≤–æ—ó–π","–∫–æ—Ö–∞–Ω—ñ–π","–≤–≤–µ—á–µ—Ä—ñ","—Å—Ç–∞—Ä—ñ–π"],"answer":"–í–Ω—É–∫ —â–æ–¥–Ω—è –≤–≤–µ—á–µ—Ä—ñ —Ç–µ–ª–µ—Ñ–æ–Ω—É—î —Å–≤–æ—ó–π –∫–æ—Ö–∞–Ω—ñ–π —Å—Ç–∞—Ä—ñ–π –±–∞–±—É—Å—ñ.","translation":"Grandson calls his dear old grandmother every evening."},{"words":["–∫–æ–ª–µ–∑—ñ","–í—ñ–Ω","–ø–∏—à–µ","–ª–∏—Å—Ç–∞","–¥–æ–≤–≥–æ–≥–æ","–µ–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–≥–æ","–≤–∞–∂–ª–∏–≤–æ–≥–æ","—Å—å–æ–≥–æ–¥–Ω—ñ"],"answer":"–í—ñ–Ω —Å—å–æ–≥–æ–¥–Ω—ñ –ø–∏—à–µ –∫–æ–ª–µ–∑—ñ –¥–æ–≤–≥–æ–≥–æ –≤–∞–∂–ª–∏–≤–æ–≥–æ –µ–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–≥–æ –ª–∏—Å—Ç–∞.","translation":"Today he writes colleague a long important email."},{"words":["–¥–∏—Ç–∏–Ω—ñ","–ú–∞–º–∞","—á–∏—Ç–∞—î","–∫–∞–∑–∫—É","—Ü—ñ–∫–∞–≤—É","—É–∫—Ä–∞—ó–Ω—Å—å–∫—É","–Ω–∞—Ä–æ–¥–Ω—É","–Ω–∞","–Ω—ñ—á"],"answer":"–ú–∞–º–∞ —á–∏—Ç–∞—î –¥–∏—Ç–∏–Ω—ñ —Ü—ñ–∫–∞–≤—É —É–∫—Ä–∞—ó–Ω—Å—å–∫—É –Ω–∞—Ä–æ–¥–Ω—É –∫–∞–∑–∫—É –Ω–∞ –Ω—ñ—á.","translation":"Mom reads child an interesting Ukrainian folk tale at night."},{"words":["–±—Ä–∞—Ç–æ–≤—ñ","–°–µ—Å—Ç—Ä–∞","–∫—É–ø—É—î","–ø–æ–¥–∞—Ä—É–Ω–æ–∫","–≥–∞—Ä–Ω–∏–π","–≤–µ–ª–∏–∫–∏–π","–Ω–∞","–¥–µ–Ω—å","–Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è"],"answer":"–°–µ—Å—Ç—Ä–∞ –∫—É–ø—É—î –±—Ä–∞—Ç–æ–≤—ñ –≥–∞—Ä–Ω–∏–π –≤–µ–ª–∏–∫–∏–π –ø–æ–¥–∞—Ä—É–Ω–æ–∫ –Ω–∞ –¥–µ–Ω—å –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è.","translation":"Sister buys brother a nice big present for birthday."},{"words":["–¥–∏—Ä–µ–∫—Ç–æ—Ä–æ–≤—ñ","–°–µ–∫—Ä–µ—Ç–∞—Ä–∫–∞","–Ω–µ—Å–µ","–¥–æ–∫—É–º–µ–Ω—Ç–∏","–≤–∞–∂–ª–∏–≤—ñ","–Ω–æ–≤—ñ","–Ω–∞","–ø—ñ–¥–ø–∏—Å","—Ç–µ—Ä–º—ñ–Ω–æ–≤—ñ"],"answer":"–°–µ–∫—Ä–µ—Ç–∞—Ä–∫–∞ –Ω–µ—Å–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–æ–≤—ñ –Ω–æ–≤—ñ –≤–∞–∂–ª–∏–≤—ñ —Ç–µ—Ä–º—ñ–Ω–æ–≤—ñ –¥–æ–∫—É–º–µ–Ω—Ç–∏ –Ω–∞ –ø—ñ–¥–ø–∏—Å.","translation":"Secretary brings director new important urgent documents to sign."}]}},{"id":"activity-9","type":"quiz","title":"Seven Cases Mastery","data":{"type":"quiz","questions":[{"question":"How many cases does Ukrainian have?","options":["Five","Six","Seven","Eight"],"correctIndex":2,"explanation":""},{"question":"Which case is used for the subject?","options":["Nominative","Genitive","Accusative","Dative"],"correctIndex":0,"explanation":""},{"question":"Which case expresses \"of\" or possession?","options":["Nominative","Genitive","Dative","Accusative"],"correctIndex":1,"explanation":""},{"question":"Which case is used for indirect objects?","options":["Nominative","Genitive","Dative","Accusative"],"correctIndex":2,"explanation":""},{"question":"Which case is used for direct objects?","options":["Nominative","Genitive","Dative","Accusative"],"correctIndex":3,"explanation":""},{"question":"Which case expresses tools and companions?","options":["Genitive","Dative","Accusative","Instrumental"],"correctIndex":3,"explanation":""},{"question":"Which case always requires a preposition?","options":["Genitive","Dative","Instrumental","Locative"],"correctIndex":3,"explanation":""},{"question":"Which case is used for direct address?","options":["Nominative","Dative","Accusative","Vocative"],"correctIndex":3,"explanation":""},{"question":"\"–ù–µ–º–∞—î\" requires which case?","options":["Nominative","Genitive","Accusative","Instrumental"],"correctIndex":1,"explanation":""},{"question":"\"–î–æ–ø–æ–º–∞–≥–∞—Ç–∏\" requires which case?","options":["Genitive","Dative","Accusative","Instrumental"],"correctIndex":1,"explanation":""},{"question":"Direction uses which case?","options":["Nominative","Genitive","Accusative","Locative"],"correctIndex":2,"explanation":""},{"question":"Location uses which case?","options":["Nominative","Accusative","Instrumental","Locative"],"correctIndex":3,"explanation":""}],"shuffleQuestions":true,"shuffleOptions":true,"showCorrectAnswers":true}}];
    const vocabData = [{"uk":"–Ω–∞–∑–∏–≤–Ω–∏–π","translit":"","en":"nominative","note":"case name"},{"uk":"—Ä–æ–¥–æ–≤–∏–π","translit":"","en":"genitive","note":"case name"},{"uk":"–¥–∞–≤–∞–ª—å–Ω–∏–π","translit":"","en":"dative","note":"case name"},{"uk":"–∑–Ω–∞—Ö—ñ–¥–Ω–∏–π","translit":"","en":"accusative","note":"case name"},{"uk":"–æ—Ä—É–¥–Ω–∏–π","translit":"","en":"instrumental","note":"case name"},{"uk":"–º—ñ—Å—Ü–µ–≤–∏–π","translit":"","en":"locative","note":"case name"},{"uk":"–∫–ª–∏—á–Ω–∏–π","translit":"","en":"vocative","note":"case name"},{"uk":"–≤—ñ–¥–º—ñ–Ω–æ–∫","translit":"","en":"case (grammar)","note":""},{"uk":"—Ä–µ—á–µ–Ω–Ω—è","translit":"","en":"sentence","note":""},{"uk":"–ø—ñ–¥–º–µ—Ç","translit":"","en":"subject","note":""},{"uk":"–ø—Ä–∏—Å—É–¥–æ–∫","translit":"","en":"predicate","note":""},{"uk":"–¥–æ–¥–∞—Ç–æ–∫","translit":"","en":"object","note":""},{"uk":"—Å–∫–ª—è–Ω–∫–∞","translit":"","en":"glass","note":""},{"uk":"–ª–∏—Å—Ç","translit":"","en":"letter","note":""},{"uk":"–±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞","translit":"","en":"library","note":""},{"uk":"–º–∞–≥–∞–∑–∏–Ω","translit":"","en":"store","note":""},{"uk":"–≤–µ—á–µ—Ä—è","translit":"","en":"dinner","note":""},{"uk":"—á–∞—Å","translit":"","en":"time","note":""},{"uk":"–∫—ñ–Ω–æ","translit":"","en":"cinema","note":"indecl."},{"uk":"—Å–ª–∞–≤–∞","translit":"","en":"glory","note":""},{"uk":"–æ—Ñ—ñ—Ü—ñ–∞–Ω—Ç","translit":"","en":"waiter","note":""},{"uk":"—Ä–∞—Ö—É–Ω–æ–∫","translit":"","en":"bill, account","note":""},{"uk":"–≤–æ–∫–∑–∞–ª","translit":"","en":"train station","note":""},{"uk":"—Ñ–æ–Ω—Ç–∞–Ω","translit":"","en":"fountain","note":""},{"uk":"—Å—É—Å—ñ–¥","translit":"","en":"neighbor","note":""},{"uk":"–ø–æ–¥–≤—ñ—Ä'—è","translit":"","en":"yard, courtyard","note":""},{"uk":"–∫—ñ–ª–æ–≥—Ä–∞–º","translit":"","en":"kilogram","note":""},{"uk":"—Ü—É–∫–æ—Ä","translit":"","en":"sugar","note":""},{"uk":"–ª–æ–∂–∫–∞","translit":"","en":"spoon","note":""},{"uk":"—Å—Ç—ñ–Ω–∞","translit":"","en":"wall","note":""}];
  
// Answer callout toggle (for new > [!answer] syntax)
function toggleAnswer(id, btn) {
  const el = document.getElementById(id);
  if (!el) return;
  const isUkrainian = document.querySelector('.level-badge')?.textContent.match(/B[12]|C[12]/);
  const showText = isUkrainian ? '–ü–æ–∫–∞–∑–∞—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—å' : 'Show Answer';
  const hideText = isUkrainian ? '–°—Ö–æ–≤–∞—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—å' : 'Hide Answer';
  const show = !el.classList.contains('show');
  if (show) {
    el.classList.add('show');
    btn.textContent = hideText;
    btn.classList.add('revealed');
  } else {
    el.classList.remove('show');
    btn.textContent = showText;
    btn.classList.remove('revealed');
  }
}

// Section navigation
function showSection(id) {
  document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
  document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
  document.getElementById(id)?.classList.add('active');
  document.querySelector('[data-section="' + id + '"]')?.classList.add('active');
}
document.querySelectorAll('.nav-tab').forEach(t => t.addEventListener('click', () => showSection(t.dataset.section)));

// Activity reset dispatcher
function resetActivity(sectionId) {
  const activity = activitiesData.find(a => a.id === sectionId);
  if (!activity) return;

  switch (activity.type) {
    case 'match-up':
      resetMatch(sectionId);
      break;
    case 'quiz':
      resetQuiz(sectionId);
      break;
    case 'true-false':
      resetTf(sectionId);
      break;
    case 'group-sort':
      resetSort(sectionId);
      break;
    case 'fill-blank':
    case 'gap-fill':
      resetFill(sectionId);
      break;
    case 'unjumble':
    case 'anagram':
      resetOrder(sectionId);
      break;
    case 'select':
      resetSelect(sectionId);
      break;
  }
}

// Initialize all activities from activitiesData array
document.addEventListener('DOMContentLoaded', () => {
  if (typeof activitiesData === 'undefined') return;

  activitiesData.forEach(activity => {
    switch (activity.type) {
      case 'match-up':
        initMatch(activity.id, activity.data);
        break;
      case 'quiz':
        initQuiz(activity.id, activity.data);
        break;
      case 'true-false':
        initTf(activity.id, activity.data);
        break;
      case 'group-sort':
        initSort(activity.id, activity.data);
        break;
      case 'fill-blank':
      case 'gap-fill':
        initFill(activity.id, activity.data);
        break;
      case 'unjumble':
      case 'anagram':
        initOrder(activity.id, activity.data);
        break;
      case 'select':
        initSelect(activity.id, activity.data);
        break;
    }
  });

  // Initialize vocabulary
  if (typeof initVocab === 'function') initVocab();
});


// Quiz Activity - supports multiple instances
const quizState = {};

function initQuiz(sectionId, data) {
  const c = document.getElementById(sectionId + '-container');
  if (!c || !data.questions || !data.questions.length) return;

  quizState[sectionId] = { score: 0, answered: 0, total: data.questions.length, data: data };

  c.innerHTML = '';
  data.questions.forEach((q, i) => {
    const sh = [...q.options].sort(() => Math.random() - 0.5);
    const cor = sh.indexOf(q.options[q.correctIndex]);
    const div = document.createElement('div');
    div.className = 'quiz-question';
    div.dataset.section = sectionId;
    div.innerHTML = '<h4>Q' + (i + 1) + ': ' + q.question + '</h4><div class="quiz-options">' + sh.map((o, j) => '<div class="quiz-option" data-c="' + (j === cor) + '" data-q="' + i + '" data-section="' + sectionId + '">' + o + '</div>').join('') + '</div><div class="quiz-explanation" id="' + sectionId + '-exp-' + i + '">' + (q.explanation || '') + '</div>';
    c.appendChild(div);
  });
  c.querySelectorAll('.quiz-option').forEach(o => o.addEventListener('click', handleQuiz));
}

function handleQuiz(e) {
  const opt = e.target, q = opt.closest('.quiz-question');
  const sectionId = opt.dataset.section;
  if (q.classList.contains('answered')) return;
  q.classList.add('answered');

  const state = quizState[sectionId];
  if (opt.dataset.c === 'true') {
    opt.classList.add('correct');
    state.score++;
  } else {
    opt.classList.add('wrong');
    q.querySelector('[data-c="true"]').classList.add('correct');
  }
  document.getElementById(sectionId + '-exp-' + opt.dataset.q)?.classList.add('show');
  document.getElementById(sectionId + '-score').textContent = state.score;
  state.answered++;
  if (state.answered === state.total) document.getElementById(sectionId + '-complete').classList.add('show');
}

function resetQuiz(sectionId) {
  const state = quizState[sectionId];
  if (!state) return;
  document.getElementById(sectionId + '-score').textContent = '0';
  document.getElementById(sectionId + '-complete')?.classList.remove('show');
  initQuiz(sectionId, state.data);
}


// True/False Activity - supports multiple instances
const tfState = {};

function initTf(sectionId, data) {
  const c = document.getElementById(sectionId + '-container');
  if (!c || !data.statements || !data.statements.length) return;

  tfState[sectionId] = { score: 0, answered: 0, total: data.statements.length, data: data };

  c.innerHTML = '';
  data.statements.forEach((s, i) => {
    const div = document.createElement('div');
    div.className = 'tf-statement';
    div.dataset.section = sectionId;
    div.innerHTML = '<p class="tf-text">' + s.statement + '</p>' +
      '<div class="tf-buttons">' +
      '<button class="tf-btn" data-value="true" data-idx="' + i + '" data-section="' + sectionId + '">True</button>' +
      '<button class="tf-btn" data-value="false" data-idx="' + i + '" data-section="' + sectionId + '">False</button>' +
      '</div>' +
      '<div class="tf-explanation" id="' + sectionId + '-exp-' + i + '">' + (s.explanation || '') + '</div>';
    div.dataset.correct = s.isTrue;
    c.appendChild(div);
  });
  c.querySelectorAll('.tf-btn').forEach(b => b.addEventListener('click', handleTf));
}

function handleTf(e) {
  const btn = e.target;
  const sectionId = btn.dataset.section;
  const idx = parseInt(btn.dataset.idx);
  const statement = btn.closest('.tf-statement');
  const state = tfState[sectionId];
  if (statement.classList.contains('answered')) return;

  statement.classList.add('answered');
  const correct = state.data.statements[idx].isTrue;
  const clicked = btn.dataset.value === 'true';

  if (clicked === correct) {
    btn.classList.add('correct');
    state.score++;
  } else {
    btn.classList.add('wrong');
    // Highlight the correct answer
    statement.querySelector('[data-value="' + correct + '"]').classList.add('correct');
  }

  const exp = document.getElementById(sectionId + '-exp-' + idx);
  if (exp && exp.textContent) exp.classList.add('show');

  document.getElementById(sectionId + '-score').textContent = state.score;
  state.answered++;
  if (state.answered === state.total) document.getElementById(sectionId + '-complete').classList.add('show');
}

function resetTf(sectionId) {
  const state = tfState[sectionId];
  if (!state) return;
  document.getElementById(sectionId + '-score').textContent = '0';
  document.getElementById(sectionId + '-complete')?.classList.remove('show');
  initTf(sectionId, state.data);
}


// Match Activity - supports multiple instances
const matchState = {};

function initMatch(sectionId, data) {
  const container = document.getElementById(sectionId + '-container');
  const leftCol = document.getElementById(sectionId + '-left');
  const rightCol = document.getElementById(sectionId + '-right');
  if (!container || !leftCol || !rightCol || !data.pairs || !data.pairs.length) return;

  const pairs = data.pairs;
  matchState[sectionId] = { selected: null, score: 0, matched: [], total: pairs.length, data: data };

  // Create left column items
  const shuffledLeft = pairs.map((p, i) => ({ text: p.left, idx: i })).sort(() => Math.random() - 0.5);
  leftCol.innerHTML = shuffledLeft.map(p => '<div class="match-item" data-pair="' + p.idx + '" data-section="' + sectionId + '" data-side="left">' + p.text + '</div>').join('');

  // Create right column items
  const shuffledRight = pairs.map((p, i) => ({ text: p.right, idx: i })).sort(() => Math.random() - 0.5);
  rightCol.innerHTML = shuffledRight.map(p => '<div class="match-item" data-pair="' + p.idx + '" data-section="' + sectionId + '" data-side="right">' + p.text + '</div>').join('');

  // Attach click handlers
  leftCol.querySelectorAll('.match-item').forEach(item => {
    item.addEventListener('click', () => handleMatchLeft(item));
  });
  rightCol.querySelectorAll('.match-item').forEach(item => {
    item.addEventListener('click', () => handleMatchRight(item));
  });
}

function handleMatchLeft(item) {
  const sectionId = item.dataset.section;
  const state = matchState[sectionId];
  if (item.classList.contains('matched')) return;

  const leftCol = document.getElementById(sectionId + '-left');
  leftCol.querySelectorAll('.match-item').forEach(i => i.classList.remove('selected'));
  item.classList.add('selected');
  state.selected = { el: item, pair: item.dataset.pair };
}

function handleMatchRight(item) {
  const sectionId = item.dataset.section;
  const state = matchState[sectionId];
  if (item.classList.contains('matched') || !state.selected) return;

  if (state.selected.pair === item.dataset.pair) {
    state.selected.el.classList.remove('selected');
    state.selected.el.classList.add('matched');
    item.classList.add('matched');
    state.matched.push({ left: state.selected.el, right: item });
    state.score++;
    document.getElementById(sectionId + '-score').textContent = state.score;
    drawMatchLines(sectionId);
    if (state.score === state.total) document.getElementById(sectionId + '-complete').classList.add('show');
  } else {
    item.classList.add('wrong');
    setTimeout(() => item.classList.remove('wrong'), 300);
  }
  state.selected = null;
}

function drawMatchLines(sectionId) {
  const svg = document.getElementById(sectionId + '-lines');
  const container = document.getElementById(sectionId + '-container');
  const state = matchState[sectionId];
  if (!svg || !container || !state) return;

  const r = container.getBoundingClientRect();
  svg.innerHTML = '';
  svg.setAttribute('viewBox', '0 0 ' + r.width + ' ' + r.height);
  state.matched.forEach(p => {
    const lr = p.left.getBoundingClientRect(), rr = p.right.getBoundingClientRect();
    const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
    line.setAttribute('x1', lr.right - r.left);
    line.setAttribute('y1', lr.top + lr.height / 2 - r.top);
    line.setAttribute('x2', rr.left - r.left);
    line.setAttribute('y2', rr.top + rr.height / 2 - r.top);
    line.setAttribute('stroke', '#26a269');
    line.setAttribute('stroke-width', '2');
    svg.appendChild(line);
  });
}

function resetMatch(sectionId) {
  const state = matchState[sectionId];
  if (!state) return;
  document.getElementById(sectionId + '-score').textContent = '0';
  document.getElementById(sectionId + '-complete')?.classList.remove('show');
  document.getElementById(sectionId + '-lines').innerHTML = '';
  initMatch(sectionId, state.data);
}

// Redraw lines on resize for all match activities
window.addEventListener('resize', () => {
  Object.keys(matchState).forEach(sectionId => drawMatchLines(sectionId));
});


// Sort Activity - supports multiple instances
const sortState = {};

function initSort(sectionId, data) {
  const pool = document.getElementById(sectionId + '-items');
  const groupsContainer = document.getElementById(sectionId + '-groups');
  if (!pool || !groupsContainer || !data.groups || !data.groups.length) return;

  const groups = data.groups;
  const totalItems = groups.reduce((sum, g) => sum + g.items.length, 0);
  sortState[sectionId] = { score: 0, total: totalItems, dragItem: null, data: data };

  // Create group containers
  groupsContainer.innerHTML = groups.map((g, i) =>
    '<div class="sort-group" data-group="' + i + '" data-section="' + sectionId + '"><h4>' + g.name + '</h4><div class="sort-items"></div></div>'
  ).join('');

  // Flatten and shuffle all items
  const allItems = groups.flatMap((g, gi) => g.items.map(item => ({ text: item, group: gi })));
  allItems.sort(() => Math.random() - 0.5);

  // Create draggable items
  pool.innerHTML = '';
  allItems.forEach(item => {
    const el = document.createElement('div');
    el.className = 'sort-item';
    el.textContent = item.text;
    el.draggable = true;
    el.dataset.group = item.group;
    el.dataset.section = sectionId;
    el.addEventListener('dragstart', () => {
      sortState[sectionId].dragItem = el;
      el.classList.add('dragging');
    });
    el.addEventListener('dragend', () => {
      el.classList.remove('dragging');
      sortState[sectionId].dragItem = null;
    });
    pool.appendChild(el);
  });

  // Setup drop zones
  groupsContainer.querySelectorAll('.sort-group').forEach(g => {
    g.addEventListener('dragover', e => {
      e.preventDefault();
      g.classList.add('drag-over');
    });
    g.addEventListener('dragleave', () => g.classList.remove('drag-over'));
    g.addEventListener('drop', e => handleSortDrop(e, g));
  });
}

function handleSortDrop(e, groupEl) {
  e.preventDefault();
  groupEl.classList.remove('drag-over');
  const sectionId = groupEl.dataset.section;
  const state = sortState[sectionId];
  const dragItem = state.dragItem;
  if (!dragItem) return;

  if (groupEl.dataset.group === dragItem.dataset.group) {
    dragItem.classList.add('correct');
    groupEl.querySelector('.sort-items').appendChild(dragItem);
    dragItem.draggable = false;
    state.score++;
    document.getElementById(sectionId + '-score').textContent = state.score;
    if (state.score === state.total) document.getElementById(sectionId + '-complete').classList.add('show');
  } else {
    dragItem.classList.add('wrong');
    setTimeout(() => dragItem.classList.remove('wrong'), 300);
  }
}

function resetSort(sectionId) {
  const state = sortState[sectionId];
  if (!state) return;
  document.getElementById(sectionId + '-score').textContent = '0';
  document.getElementById(sectionId + '-complete')?.classList.remove('show');
  initSort(sectionId, state.data);
}


// Fill-in Activity - supports multiple instances
const fillState = {};

function initFill(sectionId, data) {
  const c = document.getElementById(sectionId + '-container');
  if (!c || !data.items || !data.items.length) return;

  fillState[sectionId] = { score: 0, answered: 0, total: data.items.length, data: data };
  c.innerHTML = '';

  data.items.forEach((item, i) => {
    const div = document.createElement('div');
    div.className = 'fill-question';
    div.dataset.section = sectionId;

    // Generate options: correct answer + 3 distractors
    let options = [];
    if (item.options && item.options.length >= 4) {
      options = item.options;
    } else {
      // Fallback: generate distractors from other items' answers
      options = [item.answer];
      const otherAnswers = data.items
        .filter((_, idx) => idx !== i)
        .map(it => it.answer)
        .filter(a => a && a !== item.answer);

      const shuffled = otherAnswers.sort(() => Math.random() - 0.5);
      options.push(...shuffled.slice(0, 3));

      while (options.length < 4) {
        options.push('‚Äî');
      }
    }

    // Shuffle options
    const shuffledOptions = [...options].sort(() => Math.random() - 0.5);

    // Replace ___ in the sentence with a dropdown
    const sentence = (item.prompt || item.sentence || '').replace(/___/g,
      `<select class="fill-dropdown" data-idx="${i}" data-answer="${item.answer}" data-section="${sectionId}">
        <option value="" disabled selected>‚Äî</option>
        ${shuffledOptions.map(opt => `<option value="${opt}">${opt}</option>`).join('')}
      </select>`
    );

    div.innerHTML = `
      <div class="fill-sentence">
        <span class="fill-number">${i + 1}.</span>
        ${sentence}
      </div>
      <div class="fill-feedback" id="${sectionId}-fb-${i}"></div>
    `;
    c.appendChild(div);
  });

  // Event delegation for dropdown changes
  c.addEventListener('change', (e) => {
    if (e.target.classList.contains('fill-dropdown')) {
      handleFillChoice(e.target);
    }
  });
}

function handleFillChoice(dropdown) {
  const q = dropdown.closest('.fill-question');
  const sectionId = dropdown.dataset.section;
  const state = fillState[sectionId];
  if (q.classList.contains('answered')) return;

  const idx = dropdown.dataset.idx;
  const userAnswer = dropdown.value;
  const correctAnswer = dropdown.dataset.answer;
  const fb = document.getElementById(sectionId + '-fb-' + idx);

  q.classList.add('answered');
  dropdown.disabled = true;

  if (userAnswer === correctAnswer) {
    dropdown.classList.add('correct');
    fb.innerHTML = '<span class="correct-text">‚úì Correct!</span>';
    state.score++;
  } else {
    dropdown.classList.add('wrong');
    fb.innerHTML = `<span class="wrong-text">‚úó Answer: ${correctAnswer}</span>`;
  }

  document.getElementById(sectionId + '-score').textContent = state.score;
  state.answered++;
  if (state.answered === state.total) {
    document.getElementById(sectionId + '-complete').classList.add('show');
  }
}

function resetFill(sectionId) {
  const state = fillState[sectionId];
  if (!state) return;
  document.getElementById(sectionId + '-score').textContent = '0';
  document.getElementById(sectionId + '-complete')?.classList.remove('show');
  initFill(sectionId, state.data);
}


// Order/Unjumble/Anagram Activity - supports multiple instances
const orderState = {};

function initOrder(sectionId, data) {
  const c = document.getElementById(sectionId + '-container');
  if (!c || !data.items || !data.items.length) return;

  orderState[sectionId] = { score: 0, total: data.items.length, data: data };
  c.innerHTML = '';

  if (data.isAnagram) {
    initAnagram(sectionId, c, data);
  } else if (data.isUnjumble) {
    initUnjumble(sectionId, c, data);
  } else {
    initClassicOrder(sectionId, c, data);
  }
}

// UNJUMBLE: Drag-and-drop words to form sentences
function initUnjumble(sectionId, container, data) {
  data.items.forEach((item, idx) => {
    const question = document.createElement('div');
    question.className = 'unjumble-question';
    question.dataset.idx = idx;
    question.dataset.section = sectionId;

    // Shuffle words
    const shuffledWords = [...item.words].sort(() => Math.random() - 0.5);

    question.innerHTML = `
      <div class="unjumble-number">${idx + 1}.</div>
      <div class="unjumble-word-row" data-idx="${idx}" data-section="${sectionId}">
        ${shuffledWords.map((word, i) => `
          <span class="unjumble-word" draggable="true" data-word="${word}">${word}</span>
        `).join('')}
      </div>
      <div class="unjumble-actions">
        <button class="btn btn-sm btn-outline unjumble-check" data-idx="${idx}" data-section="${sectionId}">Check</button>
        <button class="btn btn-sm btn-outline unjumble-reset" data-idx="${idx}" data-section="${sectionId}">Reset</button>
      </div>
      <div class="unjumble-feedback" data-idx="${idx}" data-section="${sectionId}"></div>
    `;

    container.appendChild(question);

    // Initialize drag-and-drop for this row
    initUnjumbleDragDrop(question.querySelector('.unjumble-word-row'));
  });

  // Event delegation for buttons
  container.addEventListener('click', handleUnjumbleClick);
}

function initUnjumbleDragDrop(row) {
  let dragItem = null;

  row.querySelectorAll('.unjumble-word').forEach(word => {
    word.addEventListener('dragstart', (e) => {
      dragItem = word;
      word.classList.add('dragging');
      e.dataTransfer.effectAllowed = 'move';
    });

    word.addEventListener('dragend', () => {
      word.classList.remove('dragging');
      dragItem = null;
    });

    word.addEventListener('dragover', (e) => {
      e.preventDefault();
      if (!dragItem || dragItem === word) return;

      const rect = word.getBoundingClientRect();
      const midX = rect.left + rect.width / 2;

      if (e.clientX < midX) {
        row.insertBefore(dragItem, word);
      } else {
        row.insertBefore(dragItem, word.nextSibling);
      }
    });
  });

  // Touch support for mobile
  let touchItem = null;
  let touchClone = null;

  row.querySelectorAll('.unjumble-word').forEach(word => {
    word.addEventListener('touchstart', (e) => {
      touchItem = word;
      word.classList.add('dragging');

      // Create a clone for visual feedback
      touchClone = word.cloneNode(true);
      touchClone.classList.add('touch-clone');
      document.body.appendChild(touchClone);
      updateTouchClone(e.touches[0]);
    });

    word.addEventListener('touchmove', (e) => {
      e.preventDefault();
      if (!touchItem) return;
      updateTouchClone(e.touches[0]);

      // Find which word we're over
      const touch = e.touches[0];
      const elements = document.elementsFromPoint(touch.clientX, touch.clientY);
      const targetWord = elements.find(el => el.classList.contains('unjumble-word') && el !== touchItem);

      if (targetWord && targetWord.parentNode === row) {
        const rect = targetWord.getBoundingClientRect();
        const midX = rect.left + rect.width / 2;
        if (touch.clientX < midX) {
          row.insertBefore(touchItem, targetWord);
        } else {
          row.insertBefore(touchItem, targetWord.nextSibling);
        }
      }
    });

    word.addEventListener('touchend', () => {
      if (touchItem) touchItem.classList.remove('dragging');
      if (touchClone) touchClone.remove();
      touchItem = null;
      touchClone = null;
    });
  });

  function updateTouchClone(touch) {
    if (touchClone) {
      touchClone.style.left = (touch.clientX - 40) + 'px';
      touchClone.style.top = (touch.clientY - 20) + 'px';
    }
  }
}

function handleUnjumbleClick(e) {
  const target = e.target;

  if (target.classList.contains('unjumble-check')) {
    checkUnjumbleAnswer(target.dataset.section, parseInt(target.dataset.idx));
  }

  if (target.classList.contains('unjumble-reset')) {
    resetUnjumbleQuestion(target.dataset.section, parseInt(target.dataset.idx));
  }
}

function checkUnjumbleAnswer(sectionId, idx) {
  const state = orderState[sectionId];
  const item = state.data.items[idx];
  const row = document.querySelector(`.unjumble-word-row[data-section="${sectionId}"][data-idx="${idx}"]`);
  const feedback = document.querySelector(`.unjumble-feedback[data-section="${sectionId}"][data-idx="${idx}"]`);
  const question = document.querySelector(`.unjumble-question[data-section="${sectionId}"][data-idx="${idx}"]`);

  // Build user's answer from current word order
  const words = row.querySelectorAll('.unjumble-word');
  const userAnswer = Array.from(words).map(w => w.dataset.word).join(' ');

  // Normalize for comparison (handle punctuation)
  const normalize = (s) => s.replace(/[?!.,]/g, '').toLowerCase().trim();
  const isCorrect = normalize(userAnswer) === normalize(item.answer);

  if (isCorrect) {
    question.classList.add('answered', 'correct');
    row.classList.add('correct');
    words.forEach(w => w.setAttribute('draggable', 'false'));
    state.score++;
    document.getElementById(sectionId + '-score').textContent = state.score;

    feedback.innerHTML = `
      <span class="correct-text">‚úì Correct!</span>
      <span class="translation">${item.translation || ''}</span>
    `;
    feedback.classList.add('show');

    if (state.score === state.total) {
      document.getElementById(sectionId + '-complete').classList.add('show');
    }
  } else {
    question.classList.add('wrong');
    row.classList.add('wrong');

    feedback.innerHTML = `
      <span class="wrong-text">‚úó Try again. Hint: ${item.answer}</span>
    `;
    feedback.classList.add('show');

    setTimeout(() => {
      question.classList.remove('wrong');
      row.classList.remove('wrong');
      feedback.classList.remove('show');
    }, 2000);
  }
}

function resetUnjumbleQuestion(sectionId, idx) {
  const state = orderState[sectionId];
  const item = state.data.items[idx];
  const row = document.querySelector(`.unjumble-word-row[data-section="${sectionId}"][data-idx="${idx}"]`);
  const question = document.querySelector(`.unjumble-question[data-section="${sectionId}"][data-idx="${idx}"]`);
  const feedback = document.querySelector(`.unjumble-feedback[data-section="${sectionId}"][data-idx="${idx}"]`);

  if (question.classList.contains('correct')) return;

  // Re-shuffle and rebuild
  const shuffledWords = [...item.words].sort(() => Math.random() - 0.5);
  row.innerHTML = shuffledWords.map(word => `
    <span class="unjumble-word" draggable="true" data-word="${word}">${word}</span>
  `).join('');

  initUnjumbleDragDrop(row);

  question.classList.remove('wrong');
  row.classList.remove('wrong');
  feedback.innerHTML = '';
  feedback.classList.remove('show');
}

// ANAGRAM: Drag-and-drop letters to form a single word
function initAnagram(sectionId, container, data) {
  data.items.forEach((item, idx) => {
    const question = document.createElement('div');
    question.className = 'anagram-question';
    question.dataset.idx = idx;
    question.dataset.section = sectionId;

    // Shuffle letters
    const shuffledLetters = [...item.letters].sort(() => Math.random() - 0.5);

    question.innerHTML = `
      <div class="anagram-number">${idx + 1}.</div>
      <div class="anagram-letter-row" data-idx="${idx}" data-section="${sectionId}">
        ${shuffledLetters.map((letter, i) => `
          <span class="anagram-letter" draggable="true" data-letter="${letter}">${letter}</span>
        `).join('')}
      </div>
      <div class="anagram-actions">
        <button class="btn btn-sm btn-outline anagram-check" data-idx="${idx}" data-section="${sectionId}">Check</button>
        <button class="btn btn-sm btn-outline anagram-reset" data-idx="${idx}" data-section="${sectionId}">Reset</button>
      </div>
      <div class="anagram-feedback" data-idx="${idx}" data-section="${sectionId}"></div>
    `;

    container.appendChild(question);

    // Initialize drag-and-drop for this row
    initAnagramDragDrop(question.querySelector('.anagram-letter-row'));
  });

  // Event delegation for buttons
  container.addEventListener('click', handleAnagramClick);
}

function initAnagramDragDrop(row) {
  let dragItem = null;

  row.querySelectorAll('.anagram-letter').forEach(letter => {
    letter.addEventListener('dragstart', (e) => {
      dragItem = letter;
      letter.classList.add('dragging');
      e.dataTransfer.effectAllowed = 'move';
    });

    letter.addEventListener('dragend', () => {
      letter.classList.remove('dragging');
      dragItem = null;
    });

    letter.addEventListener('dragover', (e) => {
      e.preventDefault();
      if (!dragItem || dragItem === letter) return;

      const rect = letter.getBoundingClientRect();
      const midX = rect.left + rect.width / 2;

      if (e.clientX < midX) {
        row.insertBefore(dragItem, letter);
      } else {
        row.insertBefore(dragItem, letter.nextSibling);
      }
    });
  });

  // Touch support for mobile
  let touchItem = null;
  let touchClone = null;

  row.querySelectorAll('.anagram-letter').forEach(letter => {
    letter.addEventListener('touchstart', (e) => {
      touchItem = letter;
      letter.classList.add('dragging');

      // Create a clone for visual feedback
      touchClone = letter.cloneNode(true);
      touchClone.classList.add('touch-clone');
      document.body.appendChild(touchClone);
      updateAnagramTouchClone(e.touches[0], touchClone);
    });

    letter.addEventListener('touchmove', (e) => {
      e.preventDefault();
      if (!touchItem) return;
      updateAnagramTouchClone(e.touches[0], touchClone);

      // Find which letter we're over
      const touch = e.touches[0];
      const elements = document.elementsFromPoint(touch.clientX, touch.clientY);
      const targetLetter = elements.find(el => el.classList.contains('anagram-letter') && el !== touchItem);

      if (targetLetter && targetLetter.parentNode === row) {
        const rect = targetLetter.getBoundingClientRect();
        const midX = rect.left + rect.width / 2;
        if (touch.clientX < midX) {
          row.insertBefore(touchItem, targetLetter);
        } else {
          row.insertBefore(touchItem, targetLetter.nextSibling);
        }
      }
    });

    letter.addEventListener('touchend', () => {
      if (touchItem) touchItem.classList.remove('dragging');
      if (touchClone) touchClone.remove();
      touchItem = null;
      touchClone = null;
    });
  });

  function updateAnagramTouchClone(touch, clone) {
    if (clone) {
      clone.style.left = (touch.clientX - 20) + 'px';
      clone.style.top = (touch.clientY - 20) + 'px';
    }
  }
}

function handleAnagramClick(e) {
  const target = e.target;

  if (target.classList.contains('anagram-check')) {
    checkAnagramAnswer(target.dataset.section, parseInt(target.dataset.idx));
  }

  if (target.classList.contains('anagram-reset')) {
    resetAnagramQuestion(target.dataset.section, parseInt(target.dataset.idx));
  }
}

function checkAnagramAnswer(sectionId, idx) {
  const state = orderState[sectionId];
  const item = state.data.items[idx];
  const row = document.querySelector(`.anagram-letter-row[data-section="${sectionId}"][data-idx="${idx}"]`);
  const feedback = document.querySelector(`.anagram-feedback[data-section="${sectionId}"][data-idx="${idx}"]`);
  const question = document.querySelector(`.anagram-question[data-section="${sectionId}"][data-idx="${idx}"]`);

  // Build user's answer from current letter order
  const letters = row.querySelectorAll('.anagram-letter');
  const userAnswer = Array.from(letters).map(l => l.dataset.letter).join('');

  // Compare with correct answer
  const isCorrect = userAnswer.toLowerCase() === item.answer.toLowerCase();

  if (isCorrect) {
    question.classList.add('answered', 'correct');
    row.classList.add('correct');
    letters.forEach(l => l.setAttribute('draggable', 'false'));
    state.score++;
    document.getElementById(sectionId + '-score').textContent = state.score;

    feedback.innerHTML = `
      <span class="correct-text">‚úì Correct!</span>
      <span class="translation">${item.translation || ''}</span>
    `;
    feedback.classList.add('show');

    if (state.score === state.total) {
      document.getElementById(sectionId + '-complete').classList.add('show');
    }
  } else {
    question.classList.add('wrong');
    row.classList.add('wrong');

    feedback.innerHTML = `
      <span class="wrong-text">‚úó Try again. Hint: ${item.answer}</span>
    `;
    feedback.classList.add('show');

    setTimeout(() => {
      question.classList.remove('wrong');
      row.classList.remove('wrong');
      feedback.classList.remove('show');
    }, 2000);
  }
}

function resetAnagramQuestion(sectionId, idx) {
  const state = orderState[sectionId];
  const item = state.data.items[idx];
  const row = document.querySelector(`.anagram-letter-row[data-section="${sectionId}"][data-idx="${idx}"]`);
  const question = document.querySelector(`.anagram-question[data-section="${sectionId}"][data-idx="${idx}"]`);
  const feedback = document.querySelector(`.anagram-feedback[data-section="${sectionId}"][data-idx="${idx}"]`);

  if (question.classList.contains('correct')) return;

  // Re-shuffle and rebuild
  const shuffledLetters = [...item.letters].sort(() => Math.random() - 0.5);
  row.innerHTML = shuffledLetters.map(letter => `
    <span class="anagram-letter" draggable="true" data-letter="${letter}">${letter}</span>
  `).join('');

  initAnagramDragDrop(row);

  question.classList.remove('wrong');
  row.classList.remove('wrong');
  feedback.innerHTML = '';
  feedback.classList.remove('show');
}

// CLASSIC ORDER: Drag items into correct sequence
function initClassicOrder(sectionId, container, data) {
  const state = orderState[sectionId];

  // Create array with original indices, then shuffle
  const items = [...data.items].map((item, idx) => ({ text: item, origIdx: idx }));
  // Fisher-Yates shuffle
  for (let i = items.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [items[i], items[j]] = [items[j], items[i]];
  }

  // Create container div for all items
  const wrapper = document.createElement('div');
  wrapper.className = 'order-items-wrapper';
  wrapper.dataset.section = sectionId;

  // Create each sentence as a draggable item
  items.forEach((item, i) => {
    const div = document.createElement('div');
    div.className = 'order-sentence-card';
    div.draggable = true;
    div.dataset.orig = item.origIdx;
    div.dataset.section = sectionId;
    div.innerHTML = '<span class="order-card-num">' + (i + 1) + '</span><span class="order-card-text">' + item.text + '</span>';
    wrapper.appendChild(div);
  });

  container.appendChild(wrapper);

  // Add buttons
  const btnDiv = document.createElement('div');
  btnDiv.className = 'order-buttons';
  btnDiv.innerHTML = '<button class="btn btn-outline order-check-btn" data-section="' + sectionId + '">Check Order</button>';
  container.appendChild(btnDiv);

  // Add feedback area
  const feedback = document.createElement('div');
  feedback.className = 'order-feedback';
  feedback.dataset.section = sectionId;
  container.appendChild(feedback);

  // Initialize drag-and-drop
  initOrderCardDragDrop(wrapper);

  // Button click handler
  btnDiv.querySelector('.order-check-btn').onclick = function() { checkOrder(sectionId); };
}

function initOrderCardDragDrop(wrapper) {
  let dragItem = null;

  wrapper.querySelectorAll('.order-sentence-card').forEach(function(card) {
    card.addEventListener('dragstart', function(e) {
      dragItem = card;
      card.classList.add('dragging');
      e.dataTransfer.effectAllowed = 'move';
    });

    card.addEventListener('dragend', function() {
      card.classList.remove('dragging');
      dragItem = null;
      updateCardNumbers(wrapper);
    });

    card.addEventListener('dragover', function(e) {
      e.preventDefault();
      if (!dragItem || dragItem === card) return;
      const rect = card.getBoundingClientRect();
      const midY = rect.top + rect.height / 2;
      if (e.clientY < midY) {
        wrapper.insertBefore(dragItem, card);
      } else {
        wrapper.insertBefore(dragItem, card.nextSibling);
      }
    });
  });

  // Touch support
  let touchItem = null;
  let touchClone = null;

  wrapper.querySelectorAll('.order-sentence-card').forEach(function(card) {
    card.addEventListener('touchstart', function(e) {
      touchItem = card;
      card.classList.add('dragging');
      touchClone = card.cloneNode(true);
      touchClone.style.position = 'fixed';
      touchClone.style.zIndex = '1000';
      touchClone.style.pointerEvents = 'none';
      touchClone.style.opacity = '0.8';
      touchClone.style.maxWidth = '90vw';
      document.body.appendChild(touchClone);
      moveTouchClone(e.touches[0]);
    });

    card.addEventListener('touchmove', function(e) {
      e.preventDefault();
      if (!touchItem) return;
      moveTouchClone(e.touches[0]);
      const touch = e.touches[0];
      const els = document.elementsFromPoint(touch.clientX, touch.clientY);
      const target = els.find(function(el) { return el.classList.contains('order-sentence-card') && el !== touchItem; });
      if (target && target.parentNode === wrapper) {
        const rect = target.getBoundingClientRect();
        const midY = rect.top + rect.height / 2;
        if (touch.clientY < midY) {
          wrapper.insertBefore(touchItem, target);
        } else {
          wrapper.insertBefore(touchItem, target.nextSibling);
        }
      }
    });

    card.addEventListener('touchend', function() {
      if (touchItem) touchItem.classList.remove('dragging');
      if (touchClone) touchClone.remove();
      touchItem = null;
      touchClone = null;
      updateCardNumbers(wrapper);
    });
  });

  function moveTouchClone(touch) {
    if (touchClone) {
      touchClone.style.left = (touch.clientX - 100) + 'px';
      touchClone.style.top = (touch.clientY - 25) + 'px';
    }
  }
}

function updateCardNumbers(wrapper) {
  wrapper.querySelectorAll('.order-sentence-card').forEach(function(card, i) {
    card.querySelector('.order-card-num').textContent = i + 1;
  });
}

function initOrderSentenceDragDrop(row) {
  let dragItem = null;

  row.querySelectorAll('.order-sentence-item').forEach(item => {
    item.addEventListener('dragstart', (e) => {
      dragItem = item;
      item.classList.add('dragging');
      e.dataTransfer.effectAllowed = 'move';
    });

    item.addEventListener('dragend', () => {
      item.classList.remove('dragging');
      dragItem = null;
      // Update numbers after drag
      updateOrderNumbers(row);
    });

    item.addEventListener('dragover', (e) => {
      e.preventDefault();
      if (!dragItem || dragItem === item) return;

      const rect = item.getBoundingClientRect();
      const midY = rect.top + rect.height / 2;

      if (e.clientY < midY) {
        row.insertBefore(dragItem, item);
      } else {
        row.insertBefore(dragItem, item.nextSibling);
      }
    });
  });

  // Touch support
  let touchItem = null;
  let touchClone = null;

  row.querySelectorAll('.order-sentence-item').forEach(item => {
    item.addEventListener('touchstart', (e) => {
      touchItem = item;
      item.classList.add('dragging');
      touchClone = item.cloneNode(true);
      touchClone.classList.add('touch-clone');
      document.body.appendChild(touchClone);
      updateTouchClonePos(e.touches[0], touchClone);
    });

    item.addEventListener('touchmove', (e) => {
      e.preventDefault();
      if (!touchItem) return;
      updateTouchClonePos(e.touches[0], touchClone);

      const touch = e.touches[0];
      const elements = document.elementsFromPoint(touch.clientX, touch.clientY);
      const target = elements.find(el => el.classList.contains('order-sentence-item') && el !== touchItem);

      if (target && target.parentNode === row) {
        const rect = target.getBoundingClientRect();
        const midY = rect.top + rect.height / 2;
        if (touch.clientY < midY) {
          row.insertBefore(touchItem, target);
        } else {
          row.insertBefore(touchItem, target.nextSibling);
        }
      }
    });

    item.addEventListener('touchend', () => {
      if (touchItem) touchItem.classList.remove('dragging');
      if (touchClone) touchClone.remove();
      touchItem = null;
      touchClone = null;
      updateOrderNumbers(row);
    });
  });

  function updateTouchClonePos(touch, clone) {
    if (clone) {
      clone.style.left = (touch.clientX - 100) + 'px';
      clone.style.top = (touch.clientY - 20) + 'px';
    }
  }
}

function updateOrderNumbers(row) {
  row.querySelectorAll('.order-sentence-item').forEach((item, i) => {
    item.querySelector('.order-num').textContent = i + 1;
  });
}

function initDragDrop(container) {
  const items = container.querySelectorAll('.order-item');
  let dragItem = null;

  items.forEach(item => {
    item.addEventListener('dragstart', (e) => {
      dragItem = item;
      item.classList.add('dragging');
    });

    item.addEventListener('dragend', () => {
      item.classList.remove('dragging');
      dragItem = null;
    });

    item.addEventListener('dragover', (e) => {
      e.preventDefault();
      if (!dragItem || dragItem === item) return;
      const rect = item.getBoundingClientRect();
      const midY = rect.top + rect.height / 2;
      if (e.clientY < midY) {
        container.insertBefore(dragItem, item);
      } else {
        container.insertBefore(dragItem, item.nextSibling);
      }
    });
  });
}

function checkOrder(sectionId) {
  const state = orderState[sectionId];
  const data = state.data;
  // Support multiple class names for order items
  let items = document.querySelectorAll('.order-sentence-card[data-section="' + sectionId + '"]');
  if (!items.length) {
    items = document.querySelectorAll('.order-sentence-item[data-section="' + sectionId + '"]');
  }
  if (!items.length) {
    items = document.querySelectorAll('.order-item[data-section="' + sectionId + '"]');
  }
  const currentOrder = Array.from(items).map(function(item) { return parseInt(item.dataset.orig); });
  const feedback = document.querySelector('.order-feedback[data-section="' + sectionId + '"]');

  let correct = true;
  currentOrder.forEach((val, idx) => {
    const expectedIdx = data.correctOrder && data.correctOrder.length ? data.correctOrder[idx] : idx;
    if (val !== expectedIdx) correct = false;
  });

  items.forEach((item, idx) => {
    const expectedIdx = data.correctOrder && data.correctOrder.length ? data.correctOrder[idx] : idx;
    if (parseInt(item.dataset.orig) === expectedIdx) {
      item.classList.add('correct');
      item.classList.remove('wrong');
    } else {
      item.classList.add('wrong');
      item.classList.remove('correct');
    }
  });

  if (correct) {
    state.score = state.total;
    document.getElementById(sectionId + '-score').textContent = state.score;
    document.getElementById(sectionId + '-complete').classList.add('show');
    if (feedback) {
      feedback.innerHTML = '<span class="correct-text">‚úì Perfect order!</span>';
      feedback.classList.add('show');
    }
  } else {
    if (feedback) {
      feedback.innerHTML = '<span class="wrong-text">‚úó Not quite right. Try again!</span>';
      feedback.classList.add('show');
    }
    setTimeout(function() {
      items.forEach(function(item) { item.classList.remove('wrong'); });
      if (feedback) feedback.classList.remove('show');
    }, 2000);
  }
}

function resetOrder(sectionId) {
  const state = orderState[sectionId];
  if (!state) return;
  document.getElementById(sectionId + '-score').textContent = '0';
  document.getElementById(sectionId + '-complete')?.classList.remove('show');
  initOrder(sectionId, state.data);
}


// Select Activity - supports multiple instances
const selectState = {};

function initSelect(sectionId, data) {
  const c = document.getElementById(sectionId + '-container');
  if (!c || !data.items || !data.items.length) return;

  selectState[sectionId] = { score: 0, answered: 0, total: data.items.length, data: data };
  c.innerHTML = '';

  data.items.forEach((item, idx) => {
    const div = document.createElement('div');
    div.className = 'select-question';
    div.dataset.section = sectionId;
    div.dataset.idx = idx;

    const optionsHtml = item.options.map((opt, oi) =>
      `<label class="select-option" data-correct="${opt.correct}" data-section="${sectionId}" data-idx="${idx}">
        <input type="checkbox" class="select-checkbox" data-oi="${oi}">
        <span class="select-text">${opt.text}</span>
      </label>`
    ).join('');

    div.innerHTML = `
      <div class="select-number">${idx + 1}.</div>
      <div class="select-content">
        <p class="select-prompt">${item.question}</p>
        <div class="select-options">${optionsHtml}</div>
        <button class="btn btn-sm btn-outline select-check" data-section="${sectionId}" data-idx="${idx}">Check</button>
        <div class="select-feedback" id="${sectionId}-fb-${idx}"></div>
      </div>
    `;
    c.appendChild(div);
  });

  // Event delegation for check buttons
  c.addEventListener('click', (e) => {
    if (e.target.classList.contains('select-check')) {
      checkSelectAnswer(e.target.dataset.section, parseInt(e.target.dataset.idx));
    }
  });
}

function checkSelectAnswer(sectionId, idx) {
  const state = selectState[sectionId];
  const item = state.data.items[idx];
  const question = document.querySelector(`.select-question[data-section="${sectionId}"][data-idx="${idx}"]`);
  const fb = document.getElementById(sectionId + '-fb-' + idx);

  if (question.classList.contains('answered')) return;

  const options = question.querySelectorAll('.select-option');
  let allCorrect = true;

  options.forEach(opt => {
    const checkbox = opt.querySelector('.select-checkbox');
    const isChecked = checkbox.checked;
    const shouldBeChecked = opt.dataset.correct === 'true';

    if (isChecked === shouldBeChecked) {
      opt.classList.add(shouldBeChecked ? 'correct' : 'correct-unchecked');
    } else {
      opt.classList.add(shouldBeChecked ? 'missed' : 'wrong');
      allCorrect = false;
    }
    checkbox.disabled = true;
  });

  question.classList.add('answered');

  if (allCorrect) {
    fb.innerHTML = '<span class="correct-text">‚úì Perfect!</span>';
    state.score++;
  } else {
    fb.innerHTML = '<span class="wrong-text">‚úó Some answers were incorrect.</span>';
  }
  fb.classList.add('show');

  document.getElementById(sectionId + '-score').textContent = state.score;
  state.answered++;

  if (state.answered === state.total) {
    document.getElementById(sectionId + '-complete').classList.add('show');
  }
}

function resetSelect(sectionId) {
  const state = selectState[sectionId];
  if (!state) return;
  document.getElementById(sectionId + '-score').textContent = '0';
  document.getElementById(sectionId + '-complete')?.classList.remove('show');
  initSelect(sectionId, state.data);
}


// Error-Correction Activity
// Two-step interaction: 1) Click wrong word, 2) Select correct form
const errorState = {};

function initErrorCorrection(sectionId, data) {
  const c = document.getElementById(sectionId + '-container');
  if (!c || !data.items || !data.items.length) return;

  errorState[sectionId] = {
    score: 0,
    completed: 0,
    total: data.items.length,
    data: data
  };
  c.innerHTML = '';

  data.items.forEach((item, i) => {
    const div = document.createElement('div');
    div.className = 'error-item';
    div.dataset.section = sectionId;
    div.dataset.idx = i;

    // Parse sentence into clickable words
    const words = item.sentence.split(/(\s+)/);
    const wordsHtml = words.map((word, wi) => {
      if (/^\s+$/.test(word)) return word; // preserve whitespace
      const isError = item.errorWord && word.replace(/[.,!?;:]/g, '') === item.errorWord;
      return `<span class="error-word" data-word="${word.replace(/[.,!?;:]/g, '')}" data-is-error="${isError}">${word}</span>`;
    }).join('');

    const hasNoError = item.errorWord === null;

    div.innerHTML = `
      <div class="error-sentence" id="${sectionId}-sentence-${i}">
        <span class="error-number">${i + 1}.</span>
        <span class="error-words">${wordsHtml}</span>
        ${hasNoError ? '' : ''}
      </div>
      <div class="error-no-error-btn" id="${sectionId}-noerror-${i}">
        <button class="btn btn-outline btn-sm" onclick="handleNoError('${sectionId}', ${i})">No error</button>
      </div>
      <div class="error-options" id="${sectionId}-options-${i}" style="display:none;">
        <span class="error-prompt">Choose the correct form:</span>
        <div class="error-option-btns">
          ${(item.options || []).map(opt =>
            `<button class="btn btn-outline btn-sm error-option"
                     data-option="${opt}"
                     data-correct="${opt === item.correctForm}"
                     onclick="handleErrorOption('${sectionId}', ${i}, '${opt}', ${opt === item.correctForm})">${opt}</button>`
          ).join('')}
        </div>
      </div>
      <div class="error-feedback" id="${sectionId}-fb-${i}" style="display:none;"></div>
    `;

    c.appendChild(div);
  });

  // Event delegation for word clicks
  c.addEventListener('click', (e) => {
    const wordEl = e.target.closest('.error-word');
    if (wordEl && !wordEl.closest('.error-item').classList.contains('completed')) {
      const item = wordEl.closest('.error-item');
      handleWordClick(item.dataset.section, parseInt(item.dataset.idx), wordEl);
    }
  });
}

function handleWordClick(sectionId, idx, wordEl) {
  const state = errorState[sectionId];
  const item = state.data.items[idx];
  const itemEl = document.querySelector(`.error-item[data-section="${sectionId}"][data-idx="${idx}"]`);

  if (itemEl.classList.contains('step2') || itemEl.classList.contains('completed')) return;

  // Clear previous selection in this item
  itemEl.querySelectorAll('.error-word.selected').forEach(w => w.classList.remove('selected'));

  const clickedWord = wordEl.dataset.word;
  const isError = wordEl.dataset.isError === 'true';

  if (isError) {
    // Correct identification! Move to step 2
    wordEl.classList.add('selected', 'found');
    itemEl.classList.add('step2');
    state.score++;
    document.getElementById(sectionId + '-score').textContent = state.score;

    // Hide no-error button, show options
    document.getElementById(`${sectionId}-noerror-${idx}`).style.display = 'none';
    document.getElementById(`${sectionId}-options-${idx}`).style.display = 'block';
  } else {
    // Wrong word selected
    wordEl.classList.add('selected', 'wrong-selection');
    setTimeout(() => wordEl.classList.remove('selected', 'wrong-selection'), 500);
  }
}

function handleNoError(sectionId, idx) {
  const state = errorState[sectionId];
  const item = state.data.items[idx];
  const itemEl = document.querySelector(`.error-item[data-section="${sectionId}"][data-idx="${idx}"]`);
  const fb = document.getElementById(`${sectionId}-fb-${idx}`);

  if (itemEl.classList.contains('completed')) return;

  itemEl.classList.add('completed');
  document.getElementById(`${sectionId}-noerror-${idx}`).style.display = 'none';

  if (item.errorWord === null) {
    // Correct! No error in this sentence
    state.score += 2; // Full points for no-error items
    fb.innerHTML = `<span class="correct-text">Correct! No error in this sentence.</span>`;
    if (item.explanation) {
      fb.innerHTML += `<div class="error-explanation">${item.explanation}</div>`;
    }
  } else {
    // Wrong - there was an error
    fb.innerHTML = `<span class="wrong-text">There was an error: <strong>${item.errorWord}</strong> ‚Üí <strong>${item.correctForm}</strong></span>`;
    if (item.explanation) {
      fb.innerHTML += `<div class="error-explanation">${item.explanation}</div>`;
    }
  }

  fb.style.display = 'block';
  document.getElementById(sectionId + '-score').textContent = state.score;

  state.completed++;
  checkComplete(sectionId);
}

function handleErrorOption(sectionId, idx, option, isCorrect) {
  const state = errorState[sectionId];
  const item = state.data.items[idx];
  const itemEl = document.querySelector(`.error-item[data-section="${sectionId}"][data-idx="${idx}"]`);
  const fb = document.getElementById(`${sectionId}-fb-${idx}`);
  const optionsEl = document.getElementById(`${sectionId}-options-${idx}`);

  if (itemEl.classList.contains('completed')) return;

  itemEl.classList.add('completed');

  // Highlight correct/wrong options
  optionsEl.querySelectorAll('.error-option').forEach(btn => {
    btn.disabled = true;
    if (btn.dataset.correct === 'true') {
      btn.classList.add('correct');
    } else if (btn.dataset.option === option && !isCorrect) {
      btn.classList.add('wrong');
    }
  });

  if (isCorrect) {
    state.score++;
    fb.innerHTML = `<span class="correct-text">Correct!</span>`;
  } else {
    fb.innerHTML = `<span class="wrong-text">The correct form is: <strong>${item.correctForm}</strong></span>`;
  }

  if (item.explanation) {
    fb.innerHTML += `<div class="error-explanation">${item.explanation}</div>`;
  }

  fb.style.display = 'block';
  document.getElementById(sectionId + '-score').textContent = state.score;

  state.completed++;
  checkComplete(sectionId);
}

function checkComplete(sectionId) {
  const state = errorState[sectionId];
  if (state.completed === state.total) {
    document.getElementById(sectionId + '-complete').classList.add('show');
  }
}

function resetErrorCorrection(sectionId) {
  const state = errorState[sectionId];
  if (!state) return;
  document.getElementById(sectionId + '-score').textContent = '0';
  document.getElementById(sectionId + '-complete')?.classList.remove('show');
  initErrorCorrection(sectionId, state.data);
}


// Vocabulary
function initVocab() {
  const grid = document.getElementById('vocab-grid');
  if (!grid) return;
  grid.innerHTML = '';
  vocabData.forEach(v => {
    const card = document.createElement('div');
    card.className = 'vocab-card';
    card.innerHTML = '<div class="uk">' + v.uk + '</div><div class="translit">' + v.translit + '</div><div class="en">' + v.en + '</div>' + (v.note ? '<div class="note">' + v.note + '</div>' : '');
    grid.appendChild(card);
  });
}

  </script>
</body>
</html>