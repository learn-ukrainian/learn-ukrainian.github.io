<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Module 30: Checkpoint: Complex Sentences | Ukrainian A2</title>
  <style>
:root { --primary: #1a5fb4; --primary-light: #3584e4; --success: #26a269; --warning: #e5a50a; --danger: #c01c28; --bg: #fafafa; --card-bg: #fff; --text: #1e1e1e; --text-muted: #5e5e5e; --border: #e0e0e0; }
* { box-sizing: border-box; margin: 0; padding: 0; }
body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: var(--bg); color: var(--text); line-height: 1.6; }
.top-nav { background: #2e2e2e; color: white; padding: 0.5rem 2rem; display: flex; justify-content: space-between; align-items: center; font-size: 0.875rem; }
.top-nav a { color: white; text-decoration: none; }
.top-nav a:hover { text-decoration: underline; }
.module-nav { display: flex; gap: 1rem; align-items: center; }
.module-nav-link { color: rgba(255,255,255,0.8); text-decoration: none; padding: 0.25rem 0.5rem; }
.module-nav-link:hover { color: white; }
.module-nav-link.disabled { color: rgba(255,255,255,0.3); pointer-events: none; }
.nav { position: sticky; top: 0; background: var(--primary); color: white; padding: 1rem 2rem; display: flex; justify-content: space-between; align-items: center; z-index: 100; }
.nav h1 { font-size: 1.25rem; }
.nav-tabs { display: flex; gap: 0.5rem; }
.nav-tab { background: rgba(255,255,255,0.2); border: none; color: white; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer; }
.nav-tab.active { background: white; color: var(--primary); }
main { max-width: 1000px; margin: 0 auto; padding: 2rem; }
.section { display: none; } .section.active { display: block; }
.lesson-header { text-align: center; margin-bottom: 2rem; padding: 2rem; background: linear-gradient(135deg, #e8f4fd, #f0e8fd); border-radius: 12px; }
.level-badge { background: var(--primary); color: white; padding: 0.25rem 0.75rem; border-radius: 4px; font-size: 0.875rem; }
.card { background: var(--card-bg); border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); padding: 1.5rem; margin-bottom: 1.5rem; }
.card h3 { color: var(--primary); margin-bottom: 1rem; }
.section-intro { border-left: 4px solid var(--primary); }
.section-intro h3 { color: var(--primary); }
.section-topic { border-left: 4px solid var(--border); }
.section-summary { background: linear-gradient(135deg, #f0f9ff, #e8f4fd); border-left: 4px solid var(--success); }
.section-summary h3 { color: var(--success); }
.canvas-note { background: #fffbeb; border-left: 4px solid var(--warning); padding: 1rem; margin: 1rem 0; border-radius: 0 8px 8px 0; }
.canvas-note h4 { color: var(--warning); margin-bottom: 0.5rem; }
.md-content { line-height: 1.7; }
.md-content p { margin: 0.75rem 0; }
.md-content ul, .md-content ol { margin: 0.75rem 0; padding-left: 1.5rem; }
.md-content li { margin: 0.25rem 0; }
.md-content strong { color: var(--primary); }
.md-content blockquote { background: #e8f4fd; border-left: 4px solid var(--primary); padding: 0.75rem 1rem; margin: 1rem 0; border-radius: 0 8px 8px 0; }
.md-content blockquote p { margin: 0.25rem 0; }
.md-content table { width: 100%; border-collapse: collapse; margin: 1rem 0; font-size: 0.9rem; }
.md-content th, .md-content td { border: 1px solid var(--border); padding: 0.5rem 0.75rem; text-align: left; }
.md-content th { background: #f5f5f5; font-weight: 600; }
.md-content code { background: #f0f0f0; padding: 0.125rem 0.375rem; border-radius: 4px; font-family: monospace; font-size: 0.9em; }
.md-content details { background: #f8f9fa; border: 1px solid var(--border); border-radius: 8px; padding: 0; margin: 1rem 0; }
.md-content details summary { background: linear-gradient(135deg, #e8f4fd, #f0e8fd); padding: 0.75rem 1rem; cursor: pointer; font-weight: 600; color: var(--primary); border-radius: 8px; list-style: none; display: flex; align-items: center; gap: 0.5rem; }
.md-content details summary::-webkit-details-marker { display: none; }
.md-content details summary::before { content: '‚ñ∂'; font-size: 0.75rem; transition: transform 0.2s; }
.md-content details[open] summary::before { transform: rotate(90deg); }
.md-content details[open] summary { border-radius: 8px 8px 0 0; }
.md-content details > *:not(summary) { padding: 0 1rem; }
.md-content details > *:last-child { padding-bottom: 1rem; }
.md-content p > details { margin: 0; }
.md-content p:has(> details) { margin: 1rem 0; }
.inline-answer { background: linear-gradient(135deg, #d4edda, #e8f4fd); padding: 0.125rem 0.5rem; border-radius: 4px; transition: opacity 0.2s; }
.inline-answer.hidden { opacity: 0; user-select: none; }
.answer-toggle-btn { display: inline-flex; align-items: center; gap: 0.5rem; background: linear-gradient(135deg, #e8f4fd, #f0e8fd); border: 1px solid var(--primary); color: var(--primary); padding: 0.5rem 1rem; border-radius: 8px; cursor: pointer; font-size: 0.875rem; font-weight: 600; margin: 1rem 0; }
.answer-toggle-btn:hover { background: var(--primary); color: white; }
.answer-toggle-btn svg { width: 1rem; height: 1rem; }
.letter-groups { display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; margin: 1.5rem 0; }
.letter-group { border: 2px solid var(--border); border-radius: 8px; padding: 1rem; text-align: center; }
.letter-group.true-friends { border-color: var(--success); } .letter-group.true-friends .letters { color: var(--success); }
.letter-group.false-friends { border-color: var(--danger); } .letter-group.false-friends .letters { color: var(--danger); }
.letter-group.new-letters { border-color: var(--primary); } .letter-group.new-letters .letters { color: var(--primary); }
.letters { font-size: 1.75rem; letter-spacing: 0.3rem; }
.btn { padding: 0.75rem 1.5rem; border: none; border-radius: 8px; cursor: pointer; }
.btn-primary { background: var(--primary); color: white; }
.btn-outline { background: transparent; border: 2px solid var(--border); }
.btn-group { display: flex; gap: 1rem; justify-content: center; margin-top: 1.5rem; }
.score-display { text-align: center; padding: 1rem; background: linear-gradient(135deg, #e8f8f0, #e8f4fd); border-radius: 8px; margin-bottom: 1rem; }
.score-display .score { font-size: 2rem; font-weight: 700; color: var(--success); }
.completion-message { text-align: center; padding: 2rem; background: linear-gradient(135deg, #d4edda, #e8f4fd); border-radius: 12px; margin-top: 1rem; display: none; }
.completion-message.show { display: block; }
footer { text-align: center; padding: 2rem; color: var(--text-muted); }
@media (max-width: 768px) { .nav { flex-direction: column; gap: 1rem; } .letter-groups, .sort-groups, .quiz-options { grid-template-columns: 1fr; } .match-container { flex-direction: column; } }


/**
 * Layout styles - Navigation, page structure
 */

/* Top Navigation */
.top-nav {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.75rem 1.5rem;
  background: #f8f8f8;
  border-bottom: 1px solid var(--border);
  font-size: 0.875rem;
}

.top-nav a {
  color: var(--text-muted);
}

.top-nav a:hover {
  color: var(--primary);
}

.module-nav {
  display: flex;
  gap: 1rem;
}

.module-nav-link {
  padding: 0.25rem 0.5rem;
  border-radius: 4px;
}

.module-nav-link:hover {
  background: #e8f4fd;
}

/* Main Navigation */
.nav {
  background: linear-gradient(135deg, #1a5fb4, #613583);
  color: white;
  padding: 1.5rem 2rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.nav h1 {
  font-size: 1.5rem;
}

.nav-tabs {
  display: flex;
  gap: 0.5rem;
}

.nav-tab {
  background: rgba(255, 255, 255, 0.2);
  border: none;
  color: white;
  padding: 0.5rem 1rem;
  border-radius: 4px;
  cursor: pointer;
  font-size: 0.875rem;
  transition: background 0.2s;
}

.nav-tab:hover {
  background: rgba(255, 255, 255, 0.3);
}

.nav-tab.active {
  background: white;
  color: var(--primary);
}

/* Main Content */
main {
  max-width: 1000px;
  margin: 0 auto;
  padding: 2rem;
}

/* Sections */
.section {
  display: none;
}

.section.active {
  display: block;
}

/* Lesson Header */
.lesson-header {
  text-align: center;
  margin-bottom: 2rem;
  padding: 2rem;
  background: linear-gradient(135deg, #e8f4fd, #f0e8fd);
  border-radius: 12px;
}

.lesson-header h2 {
  font-size: 2rem;
  margin: 0.5rem 0;
}

/* Section Cards */
.section-intro {
  border-left: 4px solid var(--primary);
}

.section-intro h3 {
  color: var(--primary);
}

.section-topic {
  border-left: 4px solid var(--border);
}

.section-summary {
  background: linear-gradient(135deg, #f0f9ff, #e8f4fd);
  border-left: 4px solid var(--success);
}

.section-summary h3 {
  color: var(--success);
}

/* Canvas Notes */
.canvas-note {
  background: #fffbeb;
  border-left: 4px solid var(--warning);
  padding: 1rem;
  margin: 1rem 0;
  border-radius: 0 8px 8px 0;
}

.canvas-note h4 {
  color: var(--warning);
  margin-bottom: 0.5rem;
}

/* Footer */
footer {
  text-align: center;
  padding: 2rem;
  color: var(--text-muted);
}

/* Responsive Layout */
@media (max-width: 768px) {
  .nav {
    flex-direction: column;
    gap: 1rem;
  }

  .nav h1 {
    font-size: 1.25rem;
    text-align: center;
  }

  .nav-tabs {
    flex-wrap: wrap;
    justify-content: center;
  }

  main {
    padding: 1rem;
  }

  .top-nav {
    flex-direction: column;
    gap: 0.5rem;
  }
}


/* Match Activity */
.match-container { display: flex; gap: 3rem; padding: 1rem; position: relative; }
.match-column { flex: 1; display: flex; flex-direction: column; gap: 0.75rem; }
.match-item { background: var(--card-bg); border: 2px solid var(--border); border-radius: 8px; padding: 1rem; text-align: center; font-size: 1.25rem; cursor: pointer; }
.match-item.selected { border-color: var(--primary); background: #e8f4fd; }
.match-item.matched { border-color: var(--success); background: #e8f8f0; }
.match-item.wrong { border-color: var(--danger); background: #fde8e8; }
.match-lines { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; }

/* Quiz Activity */
.quiz-question { border: 1px solid var(--border); border-radius: 12px; padding: 1.5rem; margin-bottom: 1rem; }
.quiz-question.answered { pointer-events: none; }
.quiz-question .cyrillic { font-size: 1.5rem; color: var(--primary); font-weight: 600; }
.quiz-options { display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.75rem; margin-top: 1rem; }
.quiz-option { background: #f5f5f5; border: 2px solid var(--border); border-radius: 8px; padding: 1rem; cursor: pointer; text-align: center; }
.quiz-option.correct { border-color: var(--success); background: #d4edda; }
.quiz-option.wrong { border-color: var(--danger); background: #f8d7da; }
.quiz-explanation { margin-top: 1rem; padding: 1rem; background: #e8f4fd; border-radius: 8px; display: none; }
.quiz-explanation.show { display: block; }

/* True/False Activity */
.tf-statement { border: 1px solid var(--border); border-radius: 12px; padding: 1.5rem; margin-bottom: 1rem; }
.tf-statement.answered { pointer-events: none; }
.tf-text { font-size: 1.15rem; margin-bottom: 1rem; }
.tf-buttons { display: flex; gap: 1rem; }
.tf-btn { flex: 1; background: #f5f5f5; border: 2px solid var(--border); border-radius: 8px; padding: 0.75rem 1rem; cursor: pointer; font-size: 1rem; font-weight: 500; }
.tf-btn:hover { background: #e8f4fd; border-color: var(--primary); }
.tf-btn.correct { border-color: var(--success); background: #d4edda; color: var(--success); }
.tf-btn.wrong { border-color: var(--danger); background: #f8d7da; color: var(--danger); }
.tf-explanation { margin-top: 1rem; padding: 1rem; background: #e8f4fd; border-radius: 8px; display: none; }
.tf-explanation.show { display: block; }

/* Sort Activity */
.sort-pool { background: #f5f5f5; border: 2px dashed var(--border); border-radius: 12px; padding: 1.5rem; min-height: 80px; margin-bottom: 1rem; }
.sort-items { display: flex; flex-wrap: wrap; gap: 0.5rem; justify-content: center; }
.sort-item { background: var(--card-bg); border: 2px solid var(--border); border-radius: 8px; padding: 0.75rem 1.25rem; font-size: 1.5rem; cursor: grab; }
.sort-item.correct { border-color: var(--success); background: #e8f8f0; }
.sort-item.wrong { border-color: var(--danger); background: #fde8e8; }
.sort-groups { display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; }
.sort-group { border: 2px solid var(--border); border-radius: 12px; padding: 1rem; min-height: 150px; }
.sort-group.drag-over { border-color: var(--primary); background: #e8f4fd; }
.sort-group h4 { font-size: 0.875rem; text-align: center; margin-bottom: 1rem; padding-bottom: 0.5rem; border-bottom: 2px solid var(--border); }
.sort-group.true-friends h4 { color: var(--success); border-color: var(--success); }
.sort-group.false-friends h4 { color: var(--danger); border-color: var(--danger); }
.sort-group.new-letters h4 { color: var(--primary); border-color: var(--primary); }

/* Vocabulary Grid (legacy) */
.vocab-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 1rem; }
.vocab-card { border: 1px solid var(--border); border-radius: 12px; padding: 1.25rem; text-align: center; }
.vocab-card .uk { font-size: 1.75rem; font-weight: 600; color: var(--primary); }
.vocab-card .translit { color: var(--text-muted); font-style: italic; }
.vocab-card .en { font-weight: 500; margin: 0.25rem 0; }
.vocab-card .note { font-size: 0.75rem; color: #613583; background: #f0e8fd; padding: 0.25rem 0.5rem; border-radius: 4px; }

/* Vocabulary Table (book-style) */
.vocab-table-container { overflow-x: auto; }
.vocab-table { width: 100%; border-collapse: collapse; font-size: 1rem; }
.vocab-table thead { background: var(--card-bg); border-bottom: 2px solid var(--border); }
.vocab-table th { padding: 0.75rem 1rem; text-align: left; font-weight: 600; color: var(--text-muted); font-size: 0.875rem; text-transform: uppercase; letter-spacing: 0.5px; }
.vocab-table td { padding: 0.75rem 1rem; border-bottom: 1px solid var(--border); }
.vocab-table tbody tr:hover { background: #f8f9fa; }
.vocab-table .vocab-uk { font-size: 1.25rem; font-weight: 600; color: var(--primary); }
.vocab-table .vocab-translit { color: var(--text-muted); font-style: italic; }
.vocab-table .vocab-ipa { font-family: monospace; color: var(--text-muted); font-size: 0.9rem; }
.vocab-table .vocab-en { font-weight: 500; }
.vocab-table .vocab-note { font-size: 0.85rem; color: #613583; }

/* Answer Callout Blocks */
.callout { padding: 0.5rem 1rem; margin: 0.25rem 0; border-radius: 4px; }
.callout-answer { background: #e8f8f0; border-left: 3px solid var(--success); }
.callout-explanation { background: #e8f4fd; border-left: 3px solid var(--primary); color: var(--text-muted); font-style: italic; }
.callout-alt { background: #f5f5f5; border-left: 3px solid var(--border); color: var(--text-muted); }

/* Answer Block Toggle */
.answer-block { display: none; }
.answer-block.show { display: block; }
.show-answer-btn { background: #f0f0f0; border: 1px solid var(--border); border-radius: 6px; padding: 0.25rem 0.75rem; font-size: 0.8rem; cursor: pointer; color: var(--text-muted); margin: 0.25rem 0; }
.show-answer-btn:hover { background: #e5e5e5; }
.show-answer-btn.revealed { background: #e8f8f0; border-color: var(--success); color: var(--success); }

/* Fill-in Activity - Dropdown in Sentence */
.fill-container { display: flex; flex-direction: column; gap: 0.75rem; }
.fill-question { border: 1px solid var(--border); border-radius: 12px; padding: 1rem 1.5rem; }

.fill-number { font-weight: 600; color: var(--text-muted); margin-right: 0.5rem; }
.fill-sentence { font-size: 1.15rem; line-height: 1.8; }

.fill-dropdown { font-size: 1rem; padding: 0.4rem 0.6rem; border: 2px solid var(--primary); border-radius: 6px; background: #fff; color: var(--primary); font-weight: 500; cursor: pointer; min-width: 120px; }
.fill-dropdown:focus { outline: none; box-shadow: 0 0 0 3px rgba(26, 115, 232, 0.2); }
.fill-dropdown.correct { border-color: var(--success); background: #e8f8f0; color: var(--success); }
.fill-dropdown.wrong { border-color: var(--danger); background: #fde8e8; color: var(--danger); }

.fill-feedback { margin-top: 0.5rem; font-weight: 500; }
.fill-feedback .correct-text { color: var(--success); }
.fill-feedback .wrong-text { color: var(--danger); }
.btn-sm { padding: 0.5rem 1rem; font-size: 0.875rem; }

/* Order/Unjumble Activity */
.order-container { display: flex; flex-direction: column; gap: 1rem; }
.order-items { display: flex; flex-direction: column; gap: 0.5rem; margin-bottom: 1rem; }
.order-item { background: var(--card-bg); border: 2px solid var(--border); border-radius: 8px; padding: 1rem; display: flex; align-items: center; gap: 1rem; cursor: grab; user-select: none; }
.order-item:active { cursor: grabbing; }
.order-item.dragging { opacity: 0.5; }
.order-item.correct { border-color: var(--success); background: #e8f8f0; }
.order-item.wrong { border-color: var(--danger); background: #fde8e8; }
.order-handle { color: var(--text-muted); font-size: 1.25rem; }
.order-text { font-size: 1.1rem; }

/* Unjumble Activity - Drag and Drop */
.unjumble-question { border: 1px solid var(--border); border-radius: 12px; padding: 1rem 1.5rem; margin-bottom: 0.75rem; display: flex; flex-wrap: wrap; align-items: center; gap: 0.75rem; }
.unjumble-question.answered .unjumble-word { cursor: default; }
.unjumble-question.correct { border-color: var(--success); background: #f8fff8; }
.unjumble-question.wrong { border-color: var(--danger); background: #fff8f8; }

.unjumble-number { font-weight: 600; color: var(--text-muted); min-width: 2rem; }

.unjumble-word-row { display: flex; flex-wrap: wrap; gap: 0.5rem; flex: 1; min-height: 42px; padding: 0.25rem; border-radius: 8px; background: #f8f9fa; }
.unjumble-word-row.correct { background: #e8f8f0; }
.unjumble-word-row.wrong { background: #fde8e8; }

.unjumble-word { background: var(--primary); color: white; border-radius: 6px; padding: 0.5rem 0.75rem; font-size: 1rem; cursor: grab; user-select: none; transition: transform 0.1s, box-shadow 0.1s; }
.unjumble-word:hover { transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.15); }
.unjumble-word:active { cursor: grabbing; }
.unjumble-word.dragging { opacity: 0.5; transform: scale(1.05); }

.unjumble-word.touch-clone { position: fixed; z-index: 1000; pointer-events: none; box-shadow: 0 8px 16px rgba(0,0,0,0.2); }

.unjumble-actions { display: flex; gap: 0.5rem; }
.unjumble-feedback { width: 100%; padding: 0.5rem 0 0 2.5rem; display: none; }
.unjumble-feedback.show { display: block; }
.unjumble-feedback .correct-text { color: var(--success); font-weight: 600; }
.unjumble-feedback .wrong-text { color: var(--danger); }
.unjumble-feedback .translation { color: var(--text-muted); font-style: italic; margin-left: 0.5rem; }

/* Order Sentence Activity - Sentence reordering with unjumble-style UI */
.order-sequence { display: flex; flex-direction: column; align-items: stretch; }
.order-sentence-row { display: flex; flex-direction: column; flex-wrap: nowrap; gap: 0.5rem; min-height: auto; padding: 0.5rem; flex: none; width: 100%; }
.order-sentence-item { background: var(--primary); color: white; border-radius: 8px; padding: 0.75rem 1rem; font-size: 1rem; cursor: grab; user-select: none; display: flex; align-items: center; gap: 0.75rem; transition: transform 0.1s, box-shadow 0.1s; }
.order-sentence-item:hover { transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.15); }
.order-sentence-item:active { cursor: grabbing; }
.order-sentence-item.dragging { opacity: 0.5; transform: scale(1.02); }
.order-sentence-item.correct { background: var(--success); }
.order-sentence-item.wrong { background: var(--danger); }
.order-sentence-item.touch-clone { position: fixed; z-index: 1000; pointer-events: none; box-shadow: 0 8px 16px rgba(0,0,0,0.2); max-width: 90vw; }
.order-num { background: rgba(255,255,255,0.3); padding: 0.25rem 0.5rem; border-radius: 4px; font-weight: 600; min-width: 1.5rem; text-align: center; }
.order-sentence-text { flex: 1; }
.order-feedback { width: 100%; padding: 0.5rem 0; display: none; }
.order-feedback.show { display: block; }
.order-feedback .correct-text { color: var(--success); font-weight: 600; }
.order-feedback .wrong-text { color: var(--danger); }

/* Order Card Activity - New class names for classic order */
.order-items-wrapper { display: flex; flex-direction: column; gap: 0.5rem; margin-bottom: 1rem; }
.order-sentence-card { background: var(--primary); color: white; border-radius: 8px; padding: 0.75rem 1rem; font-size: 1rem; cursor: grab; user-select: none; display: flex; align-items: center; gap: 0.75rem; transition: transform 0.1s, box-shadow 0.1s; }
.order-sentence-card:hover { transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.15); }
.order-sentence-card:active { cursor: grabbing; }
.order-sentence-card.dragging { opacity: 0.5; transform: scale(1.02); }
.order-sentence-card.correct { background: var(--success); }
.order-sentence-card.wrong { background: var(--danger); }
.order-card-num { background: rgba(255,255,255,0.3); padding: 0.25rem 0.5rem; border-radius: 4px; font-weight: 600; min-width: 1.5rem; text-align: center; }
.order-card-text { flex: 1; }
.order-buttons { margin-top: 0.5rem; }

/* Select Activity - Multi-choice checkboxes */
.select-container { display: flex; flex-direction: column; gap: 1rem; }
.select-question { border: 1px solid var(--border); border-radius: 12px; padding: 1.25rem; display: flex; gap: 0.75rem; }
.select-question.answered .select-checkbox { pointer-events: none; }
.select-number { font-weight: 600; color: var(--text-muted); min-width: 2rem; }
.select-content { flex: 1; }
.select-prompt { font-size: 1.1rem; font-weight: 500; margin-bottom: 0.75rem; }
.select-options { display: flex; flex-direction: column; gap: 0.5rem; margin-bottom: 0.75rem; }
.select-option { display: flex; align-items: center; gap: 0.75rem; padding: 0.5rem 0.75rem; border-radius: 6px; cursor: pointer; transition: background 0.15s; }
.select-option:hover { background: #f5f5f5; }
.select-option.correct { background: #d4edda; }
.select-option.correct-unchecked { background: #f8f9fa; }
.select-option.wrong { background: #f8d7da; }
.select-option.missed { background: #fff3cd; border: 1px dashed var(--warning); }
.select-checkbox { width: 1.25rem; height: 1.25rem; cursor: pointer; }
.select-text { font-size: 1rem; }
.select-check { margin-top: 0.5rem; }
.select-feedback { margin-top: 0.75rem; display: none; }
.select-feedback.show { display: block; }
.select-feedback .correct-text { color: var(--success); font-weight: 600; }
.select-feedback .wrong-text { color: var(--danger); }

/* Anagram Activity - Letter reordering to form words */
.anagram-question { border: 1px solid var(--border); border-radius: 12px; padding: 1rem 1.5rem; margin-bottom: 0.75rem; display: flex; flex-wrap: wrap; align-items: center; gap: 0.75rem; }
.anagram-question.answered .anagram-letter { cursor: default; }
.anagram-question.correct { border-color: var(--success); background: #f8fff8; }
.anagram-question.wrong { border-color: var(--danger); background: #fff8f8; }

.anagram-number { font-weight: 600; color: var(--text-muted); min-width: 2rem; }

.anagram-letter-row { display: flex; flex-wrap: wrap; gap: 0.35rem; flex: 1; min-height: 52px; padding: 0.25rem; border-radius: 8px; background: #f8f9fa; }
.anagram-letter-row.correct { background: #e8f8f0; }
.anagram-letter-row.wrong { background: #fde8e8; }

.anagram-letter { background: var(--primary); color: white; border-radius: 8px; padding: 0.6rem 0.9rem; font-size: 1.5rem; font-weight: 600; cursor: grab; user-select: none; transition: transform 0.1s, box-shadow 0.1s; min-width: 2.5rem; text-align: center; }
.anagram-letter:hover { transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.15); }
.anagram-letter:active { cursor: grabbing; }
.anagram-letter.dragging { opacity: 0.5; transform: scale(1.05); }

.anagram-letter.touch-clone { position: fixed; z-index: 1000; pointer-events: none; box-shadow: 0 8px 16px rgba(0,0,0,0.2); }

.anagram-actions { display: flex; gap: 0.5rem; }
.anagram-feedback { width: 100%; padding: 0.5rem 0 0 2.5rem; display: none; }
.anagram-feedback.show { display: block; }
.anagram-feedback .correct-text { color: var(--success); font-weight: 600; }
.anagram-feedback .wrong-text { color: var(--danger); }
.anagram-feedback .translation { color: var(--text-muted); font-style: italic; margin-left: 0.5rem; }

/* Error-Correction Activity - Identify and fix errors */
.error-correction-container { display: flex; flex-direction: column; gap: 0.75rem; }
.error-item { border: 1px solid var(--border); border-radius: 12px; padding: 1rem 1.5rem; margin-bottom: 0.5rem; }
.error-item.completed { opacity: 0.85; }
.error-item.step2 .error-words { background: #f0f9ff; }

.error-sentence { display: flex; align-items: baseline; gap: 0.5rem; font-size: 1.15rem; line-height: 1.8; flex-wrap: wrap; }
.error-number { font-weight: 600; color: var(--text-muted); min-width: 2rem; }
.error-words { display: inline; }

.error-word { cursor: pointer; padding: 0.15rem 0.25rem; border-radius: 4px; transition: background 0.15s, color 0.15s; }
.error-word:hover { background: #e8f4fd; }
.error-word.selected { background: var(--primary); color: white; }
.error-word.found { background: var(--success); color: white; cursor: default; }
.error-word.wrong-selection { background: var(--danger); color: white; animation: shake 0.3s; }
.error-item.completed .error-word { cursor: default; }
.error-item.completed .error-word:hover { background: transparent; }
.error-item.completed .error-word.found { background: var(--success); color: white; }

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-4px); }
  75% { transform: translateX(4px); }
}

.error-no-error-btn { margin-top: 0.75rem; }
.error-options { margin-top: 0.75rem; }
.error-prompt { font-weight: 500; color: var(--text-muted); display: block; margin-bottom: 0.5rem; }
.error-option-btns { display: flex; flex-wrap: wrap; gap: 0.5rem; }
.error-option { background: #f5f5f5; border: 2px solid var(--border); border-radius: 8px; padding: 0.5rem 1rem; cursor: pointer; font-size: 1rem; }
.error-option:hover { border-color: var(--primary); background: #e8f4fd; }
.error-option:disabled { cursor: default; }
.error-option.correct { border-color: var(--success); background: #d4edda; color: var(--success); }
.error-option.wrong { border-color: var(--danger); background: #f8d7da; color: var(--danger); }

.error-feedback { margin-top: 0.75rem; padding: 0.75rem 1rem; border-radius: 8px; background: #f8f9fa; }
.error-feedback .correct-text { color: var(--success); font-weight: 600; }
.error-feedback .wrong-text { color: var(--danger); }
.error-explanation { margin-top: 0.5rem; color: var(--text-muted); font-style: italic; font-size: 0.95rem; }

  </style>
</head>
<body>
  
  <div class="top-nav">
    <a href="../index.html">‚Üê l2-uk-en Curriculum</a>
    <div class="module-nav">
      <a href="module-29.html" class="module-nav-link">‚Üê Module 29</a>
      <a href="index.html" class="module-nav-link">A2 Index</a>
      <a href="module-31.html" class="module-nav-link">Module 31 ‚Üí</a>
    </div>
  </div>
  <nav class="nav">
    <h1>Module 30: Checkpoint: Complex Sentences</h1>
    <div class="nav-tabs">
      <button class="nav-tab active" data-section="lesson">Lesson</button>
      <button class="nav-tab" data-section="activity-0">1. Fill</button>
      <button class="nav-tab" data-section="activity-1">2. Match</button>
      <button class="nav-tab" data-section="activity-2">3. Order</button>
      <button class="nav-tab" data-section="activity-3">4. Quiz</button>
      <button class="nav-tab" data-section="activity-4">5. T/F</button>
      <button class="nav-tab" data-section="activity-5">6. Sort</button>
      <button class="nav-tab" data-section="activity-6">7. Fill</button>
      <button class="nav-tab" data-section="activity-7">8. Select</button>
      <button class="nav-tab" data-section="activity-8">9. Order</button>
      <button class="nav-tab" data-section="activity-9">10. Quiz</button>
      <button class="nav-tab" data-section="vocab">Vocab</button>
    </div>
  </nav>
  <main>
    
    <section id="lesson" class="section active">
      <div class="lesson-header">
        <span class="level-badge">A2 ¬∑ A2.3</span>
        <h2 style="font-size:2rem;margin:0.5rem 0">Checkpoint: Complex Sentences</h2>
        <p style="color:var(--text-muted)">Review of Phase A2.3</p>
      </div>
      
    <div class="card section-intro">
      <h3>üìñ Introduction</h3>
      <div class="md-content"><p>Congratulations on completing Phase A2.3! This checkpoint reviews everything you've learned about complex sentences ‚Äî from storytelling connectors to time clauses. Let's see how well you can combine ideas in Ukrainian!</p>
<hr /></div>
    </div>
  
    <div class="card section-content">
      <h3>Sequence Connectors Review</h3>
      <div class="md-content"><h2 id="storystructure">Story Structure</h2>
<table>
<thead>
<tr>
<th>Position</th>
<th>Connectors</th>
</tr>
</thead>
<tbody>
<tr>
<td>Beginning</td>
<td><strong>—Å–ø–æ—á–∞—Ç–∫—É</strong>, –æ–¥–Ω–æ–≥–æ —Ä–∞–∑—É, –∫–æ–ª–∏—Å—å</td>
</tr>
<tr>
<td>Middle</td>
<td><strong>–ø–æ—Ç—ñ–º</strong>, –ø—ñ—Å–ª—è —Ü—å–æ–≥–æ, –∑–≥–æ–¥–æ–º, —Ç–æ–¥—ñ</td>
</tr>
<tr>
<td>End</td>
<td><strong>–Ω–∞—Ä–µ—à—Ç—ñ</strong>, –≤—Ä–µ—à—Ç—ñ-—Ä–µ—à—Ç</td>
</tr>
<tr>
<td>Sudden</td>
<td><strong>—Ä–∞–ø—Ç–æ–º</strong>, –Ω–µ—Å–ø–æ–¥—ñ–≤–∞–Ω–æ</td>
</tr>
</tbody>
</table>
<p><strong>Example story:</strong><br />
<strong>–û–¥–Ω–æ–≥–æ —Ä–∞–∑—É</strong> —è –ø—ñ—à–æ–≤ —É –º–∞–≥–∞–∑–∏–Ω. <strong>–°–ø–æ—á–∞—Ç–∫—É</strong> —è –∫—É–ø–∏–≤ —Ö–ª—ñ–±. <strong>–ü–æ—Ç—ñ–º</strong> —è –∑—É—Å—Ç—Ä—ñ–≤ –¥—Ä—É–≥–∞. <strong>–†–∞–ø—Ç–æ–º</strong> –ø—ñ—à–æ–≤ –¥–æ—â. <strong>–ù–∞—Ä–µ—à—Ç—ñ</strong> –º–∏ –ø—Ä–∏–π—à–ª–∏ –¥–æ–¥–æ–º—É.</p>
<div class="callout callout-tip" data-callout="tip">üí° Remember</div>
<blockquote>
  <p>Use varied connectors to make your stories interesting and well-structured!</p>
</blockquote>
<hr /></div>
    </div>
  
    <div class="card section-content">
      <h3>Causal and Concessive Review</h3>
      <div class="md-content"><h2 id="causewhy">Cause (Why?)</h2>
<table>
<thead>
<tr>
<th>Conjunction</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>—Ç–æ–º—É —â–æ</strong></td>
<td>–Ø –Ω–µ –ø—Ä–∏–π—à–æ–≤, <strong>—Ç–æ–º—É —â–æ</strong> –±—É–≤ —Ö–≤–æ—Ä–∏–π.</td>
</tr>
<tr>
<td><strong>–±–æ</strong> (informal)</td>
<td>–Ø –Ω–µ –ø—Ä–∏–π—à–æ–≤, <strong>–±–æ</strong> –±—É–≤ —Ö–≤–æ—Ä–∏–π.</td>
</tr>
<tr>
<td><strong>–æ—Å–∫—ñ–ª—å–∫–∏</strong> (formal)</td>
<td><strong>–û—Å–∫—ñ–ª—å–∫–∏</strong> –ø—ñ–∑–Ω–æ, —è –π–¥—É.</td>
</tr>
</tbody>
</table>
<h2 id="contrastbut">Contrast (But‚Ä¶)</h2>
<table>
<thead>
<tr>
<th>Conjunction</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>—Ö–æ—á–∞</strong></td>
<td><strong>–•–æ—á–∞</strong> —Ö–æ–ª–æ–¥–Ω–æ, —è –≤–∏–π—à–æ–≤.</td>
</tr>
<tr>
<td><strong>–∞–ª–µ</strong></td>
<td>–î–æ—Ä–æ–≥–æ, <strong>–∞–ª–µ</strong> —è–∫—ñ—Å–Ω–æ.</td>
</tr>
<tr>
<td><strong>–ø—Ä–æ—Ç–µ</strong></td>
<td>–í—ñ–Ω —Å—Ç–∞—Ä–∏–π. <strong>–ü—Ä–æ—Ç–µ</strong> —Å–∏–ª—å–Ω–∏–π.</td>
</tr>
</tbody>
</table>
<div class="callout callout-example" data-callout="example">üåç Real World</div>
<blockquote>
  <p>In conversation, <em>–±–æ</em> is much more common than <em>—Ç–æ–º—É —â–æ</em>!</p>
</blockquote>
<hr /></div>
    </div>
  
    <div class="card section-content">
      <h3>Reported Speech Review</h3>
      <div class="md-content"><h2 id="statements">Statements (—â–æ)</h2>
<table>
<thead>
<tr>
<th>Direct</th>
<th>Reported</th>
</tr>
</thead>
<tbody>
<tr>
<td>"–Ø –ø—Ä–∏–π–¥—É."</td>
<td>–í—ñ–Ω —Å–∫–∞–∑–∞–≤, <strong>—â–æ</strong> –ø—Ä–∏–π–¥–µ.</td>
</tr>
<tr>
<td>"–Ø –±—É–≤ —Ç–∞–º."</td>
<td>–í–æ–Ω–∞ —Å–∫–∞–∑–∞–ª–∞, <strong>—â–æ</strong> –±—É–ª–∞ —Ç–∞–º.</td>
</tr>
</tbody>
</table>
<h2 id="questions">Questions (—á–∏, —â–æ, –¥–µ, –∫–æ–ª–∏‚Ä¶)</h2>
<table>
<thead>
<tr>
<th>Direct</th>
<th>Reported</th>
</tr>
</thead>
<tbody>
<tr>
<td>"–¢–∏ –ø—Ä–∏–π–¥–µ—à?"</td>
<td>–í—ñ–Ω –∑–∞–ø–∏—Ç–∞–≤, <strong>—á–∏</strong> —è –ø—Ä–∏–π–¥—É.</td>
</tr>
<tr>
<td>"–î–µ —Ç–∏ –∂–∏–≤–µ—à?"</td>
<td>–í–æ–Ω–∞ –∑–∞–ø–∏—Ç–∞–ª–∞, <strong>–¥–µ</strong> —è –∂–∏–≤—É.</td>
</tr>
</tbody>
</table>
<hr /></div>
    </div>
  
    <div class="card section-content">
      <h3>Opinion Review</h3>
      <div class="md-content"><h2 id="opinionexpressions">Opinion Expressions</h2>
<table>
<thead>
<tr>
<th>Strong ‚Üí Weak</th>
</tr>
</thead>
<tbody>
<tr>
<td>–Ø <strong>–≤–≤–∞–∂–∞—é</strong>, —â–æ‚Ä¶ (I believe)</td>
</tr>
<tr>
<td>–Ø <strong>–¥—É–º–∞—é</strong>, —â–æ‚Ä¶ (I think)</td>
</tr>
<tr>
<td>–Ø <strong>–≥–∞–¥–∞—é</strong>, —â–æ‚Ä¶ (I suppose)</td>
</tr>
<tr>
<td><strong>–ú–µ–Ω—ñ –∑–¥–∞—î—Ç—å—Å—è</strong>, —â–æ‚Ä¶ (It seems to me)</td>
</tr>
</tbody>
</table>
<h2 id="agreementdisagreement">Agreement/Disagreement</h2>
<table>
<thead>
<tr>
<th>Agreement</th>
<th>Disagreement</th>
</tr>
</thead>
<tbody>
<tr>
<td>–Ø <strong>–∑–≥–æ–¥–µ–Ω/–∑–≥–æ–¥–Ω–∞</strong>.</td>
<td>–Ø <strong>–Ω–µ –∑–≥–æ–¥–µ–Ω</strong>.</td>
</tr>
<tr>
<td><strong>–¢–æ—á–Ω–æ!</strong></td>
<td>–Ø —Ç–∞–∫ <strong>–Ω–µ –¥—É–º–∞—é</strong>.</td>
</tr>
<tr>
<td><strong>–ë–µ–∑—É–º–æ–≤–Ω–æ!</strong></td>
<td><strong>–ù–µ –∑–æ–≤—Å—ñ–º</strong> —Ç–∞–∫.</td>
</tr>
</tbody>
</table>
<div class="callout callout-example" data-callout="example">üé¨ Pop Culture Moment</div>
<blockquote>
  <p>Dramatic disagreement: <em>–ö–∞—Ç–µ–≥–æ—Ä–∏—á–Ω–æ –Ω–µ –∑–≥–æ–¥–µ–Ω!</em> ‚Äî I categorically disagree!</p>
</blockquote>
<hr /></div>
    </div>
  
    <div class="card section-content">
      <h3>Emotion Review</h3>
      <div class="md-content"><h2 id="emotion">Emotion + —â–æ</h2>
<table>
<thead>
<tr>
<th>Emotion</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td>—Ä–∞–¥–∏–π</td>
<td>–Ø <strong>—Ä–∞–¥–∏–π</strong>, —â–æ —Ç–∏ –ø—Ä–∏–π—à–æ–≤.</td>
</tr>
<tr>
<td>—Å—É–º–Ω–∏–π</td>
<td>–Ø <strong>—Å—É–º–Ω–∏–π</strong>, —â–æ –≤—ñ–Ω –ø—ñ—à–æ–≤.</td>
</tr>
<tr>
<td>–∑–¥–∏–≤–æ–≤–∞–Ω–∏–π</td>
<td>–Ø <strong>–∑–¥–∏–≤–æ–≤–∞–Ω–∏–π</strong>, —â–æ –≤–æ–Ω–∞ –Ω–µ –ø—Ä–∏–π—à–ª–∞.</td>
</tr>
<tr>
<td>–±–æ—é—Å—è</td>
<td>–Ø <strong>–±–æ—é—Å—è</strong>, —â–æ –∑–∞–ø—ñ–∑–Ω—é—Å—è.</td>
</tr>
</tbody>
</table>
<h2 id="dativeconstructions">Dative Constructions</h2>
<table>
<thead>
<tr>
<th>Structure</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>–ú–µ–Ω—ñ</strong> —Ä–∞–¥—ñ—Å–Ω–æ</td>
<td>I feel joyful</td>
</tr>
<tr>
<td><strong>–ú–µ–Ω—ñ</strong> —Å—É–º–Ω–æ</td>
<td>I feel sad</td>
</tr>
<tr>
<td><strong>–ú–µ–Ω—ñ</strong> –ø—Ä–∏—î–º–Ω–æ</td>
<td>It's pleasant for me</td>
</tr>
</tbody>
</table>
<hr /></div>
    </div>
  
    <div class="card section-content">
      <h3>Purpose Clauses Review</h3>
      <div class="md-content"><h2 id="samesubjectinfinitive">Same Subject (—â–æ–± + infinitive)</h2>
<table>
<thead>
<tr>
<th>Example</th>
<th>English</th>
</tr>
</thead>
<tbody>
<tr>
<td>–Ø –ø—Ä–∏–π—à–æ–≤, <strong>—â–æ–±</strong> –¥–æ–ø–æ–º–æ–≥—Ç–∏.</td>
<td>I came to help.</td>
</tr>
<tr>
<td>–í—ñ–Ω –≤—á–∏—Ç—å—Å—è, <strong>—â–æ–±</strong> –∑–Ω–∞—Ç–∏ –±—ñ–ª—å—à–µ.</td>
<td>He studies to know more.</td>
</tr>
</tbody>
</table>
<h2 id="differentsubjectspast">Different Subjects (—â–æ–± + past)</h2>
<table>
<thead>
<tr>
<th>Example</th>
<th>English</th>
</tr>
</thead>
<tbody>
<tr>
<td>–Ø —Ö–æ—á—É, <strong>—â–æ–±</strong> —Ç–∏ –ø—Ä–∏–π—à–æ–≤.</td>
<td>I want you to come.</td>
</tr>
<tr>
<td>–í–æ–Ω–∞ —Ö–æ—á–µ, <strong>—â–æ–±</strong> –≤—ñ–Ω –∑–Ω–∞–≤.</td>
<td>She wants him to know.</td>
</tr>
</tbody>
</table>
<div class="callout callout-tip" data-callout="tip">üåç Real World</div>
<blockquote>
  <p>"–©–æ–± –Ω–µ" for negative purpose: <em>–ì–æ–≤–æ—Ä–∏ —Ç–∏—Ö–æ, —â–æ–± –Ω–µ —Ä–æ–∑–±—É–¥–∏—Ç–∏</em> ‚Äî Speak quietly so as not to wake.</p>
</blockquote>
<hr /></div>
    </div>
  
    <div class="card section-content">
      <h3>Relative Clauses Review</h3>
      <div class="md-content"><h2 id="genderagreement">Gender Agreement</h2>
<table>
<thead>
<tr>
<th>Gender</th>
<th>Form</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td>Masculine</td>
<td><strong>—è–∫–∏–π</strong></td>
<td>–ß–æ–ª–æ–≤—ñ–∫, <strong>—è–∫–∏–π</strong> —á–∏—Ç–∞—î‚Ä¶</td>
</tr>
<tr>
<td>Feminine</td>
<td><strong>—è–∫–∞</strong></td>
<td>–ñ—ñ–Ω–∫–∞, <strong>—è–∫–∞</strong> –≥–æ–≤–æ—Ä–∏—Ç—å‚Ä¶</td>
</tr>
<tr>
<td>Neuter</td>
<td><strong>—è–∫–µ</strong></td>
<td>–ú—ñ—Å—Ç–æ, <strong>—è–∫–µ</strong> —è –ª—é–±–ª—é‚Ä¶</td>
</tr>
<tr>
<td>Plural</td>
<td><strong>—è–∫—ñ</strong></td>
<td>–õ—é–¥–∏, <strong>—è–∫—ñ</strong> –∂–∏–≤—É—Ç—å‚Ä¶</td>
</tr>
</tbody>
</table>
<h2 id="casechanges">Case Changes</h2>
<table>
<thead>
<tr>
<th>Case</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td>Nominative</td>
<td>–ß–æ–ª–æ–≤—ñ–∫, <strong>—è–∫–∏–π</strong> —á–∏—Ç–∞—î‚Ä¶</td>
</tr>
<tr>
<td>Accusative</td>
<td>–ö–Ω–∏–≥–∞, <strong>—è–∫—É</strong> —è —á–∏—Ç–∞—é‚Ä¶</td>
</tr>
<tr>
<td>With prep</td>
<td>–î—Ä—É–≥, –∑ <strong>—è–∫–∏–º</strong> —è –≥–æ–≤–æ—Ä–∏–≤‚Ä¶</td>
</tr>
</tbody>
</table>
<hr /></div>
    </div>
  
    <div class="card section-content">
      <h3>Time Clauses Review</h3>
      <div class="md-content"><h2 id="mainconjunctions">Main Conjunctions</h2>
<table>
<thead>
<tr>
<th>Conjunction</th>
<th>Meaning</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>–∫–æ–ª–∏</strong></td>
<td>when</td>
<td><strong>–ö–æ–ª–∏</strong> —è –ø—Ä–∏–π—à–æ–≤, –≤—ñ–Ω —Å–ø–∞–≤.</td>
</tr>
<tr>
<td><strong>–ø–æ–∫–∏</strong></td>
<td>while</td>
<td><strong>–ü–æ–∫–∏</strong> –≤—ñ–Ω —Å–ø–∞–≤, —è –ø—Ä–∞—Ü—é–≤–∞–≤.</td>
</tr>
<tr>
<td><strong>–ø–æ–∫–∏ –Ω–µ</strong></td>
<td>until</td>
<td>–ß–µ–∫–∞–π, <strong>–ø–æ–∫–∏</strong> –≤—ñ–Ω <strong>–Ω–µ</strong> –ø—Ä–∏–π–¥–µ.</td>
</tr>
<tr>
<td><strong>–ø—ñ—Å–ª—è —Ç–æ–≥–æ —è–∫</strong></td>
<td>after</td>
<td><strong>–ü—ñ—Å–ª—è —Ç–æ–≥–æ —è–∫</strong> —è –ø–æ—ó–≤‚Ä¶</td>
</tr>
<tr>
<td><strong>–ø–µ—Ä—à –Ω—ñ–∂</strong></td>
<td>before</td>
<td><strong>–ü–µ—Ä—à –Ω—ñ–∂</strong> –ø—ñ—Ç–∏‚Ä¶</td>
</tr>
<tr>
<td><strong>—â–æ–π–Ω–æ</strong></td>
<td>as soon as</td>
<td><strong>–©–æ–π–Ω–æ</strong> –≤—ñ–Ω –ø—Ä–∏–π—à–æ–≤‚Ä¶</td>
</tr>
</tbody>
</table>
<hr />
<hr />
<hr /></div>
    </div>
  
      
    <div class="card section-summary">
      <h3>üìã Summary</h3>
      <div class="md-content"><p>Congratulations on completing Phase A2.3! You've mastered:</p>
<ul>
<li><strong>Sequence connectors</strong>: —Å–ø–æ—á–∞—Ç–∫—É, –ø–æ—Ç—ñ–º, —Ä–∞–ø—Ç–æ–º, –Ω–∞—Ä–µ—à—Ç—ñ</li>
<li><strong>Causal clauses</strong>: —Ç–æ–º—É —â–æ, –±–æ, –æ—Å–∫—ñ–ª—å–∫–∏</li>
<li><strong>Concessive clauses</strong>: —Ö–æ—á–∞, –ø—Ä–æ—Ç–µ, –∞–ª–µ</li>
<li><strong>Reported speech</strong>: —Å–∫–∞–∑–∞–≤/–∑–∞–ø–∏—Ç–∞–≤, —â–æ/—á–∏</li>
<li><strong>Opinions</strong>: –¥—É–º–∞—é/–≤–≤–∞–∂–∞—é/–≥–∞–¥–∞—é, —â–æ</li>
<li><strong>Emotions</strong>: —Ä–∞–¥–∏–π/—Å—É–º–Ω–∏–π/–∑–¥–∏–≤–æ–≤–∞–Ω–∏–π, —â–æ</li>
<li><strong>Purpose clauses</strong>: —â–æ–± + infinitive/past</li>
<li><strong>Relative clauses</strong>: —è–∫–∏–π/—è–∫–∞/—è–∫–µ/—è–∫—ñ</li>
<li><strong>Time clauses</strong>: –∫–æ–ª–∏, –ø–æ–∫–∏, –ø—ñ—Å–ª—è —Ç–æ–≥–æ —è–∫, –ø–µ—Ä—à –Ω—ñ–∂</li>
</ul>
<p><strong>Coming up in Phase A2.4</strong>: Word Formation ‚Äî prefixes, suffixes, and building vocabulary!</p></div>
    </div>
  
      <div class="btn-group">
        <button class="btn btn-primary" onclick="showSection('activity-0')">Activities ‚Üí</button>
      </div>
    </section>
  
    
    <section id="activity-0" class="section"><div class="card"><h3>Mixed Review</h3>
      <div class="score-display"><span class="score"><span id="activity-0-score">0</span>/12</span></div>
      <div id="activity-0-container" class="fill-container"></div>
      <div class="completion-message" id="activity-0-complete"><h3>Complete!</h3></div>
      <div class="btn-group"><button class="btn btn-outline" onclick="resetActivity('activity-0')">Reset</button><button class="btn btn-primary" onclick="showSection('activity-1')">Next ‚Üí</button></div>
    </div></section>

    <section id="activity-1" class="section"><div class="card"><h3>Clause Types</h3>
      <div class="score-display"><span class="score"><span id="activity-1-score">0</span>/12</span></div>
      <div class="match-container" id="activity-1-container"><svg class="match-lines" id="activity-1-lines"></svg>
        <div class="match-column" id="activity-1-left"></div>
        <div class="match-column" id="activity-1-right"></div>
      </div>
      <div class="completion-message" id="activity-1-complete"><h3>Perfect!</h3></div>
      <div class="btn-group"><button class="btn btn-outline" onclick="resetActivity('activity-1')">Reset</button><button class="btn btn-primary" onclick="showSection('activity-2')">Next ‚Üí</button></div>
    </div></section>

    <section id="activity-2" class="section"><div class="card"><h3>Complex Sentences</h3>
      <div class="score-display"><span class="score"><span id="activity-2-score">0</span>/12</span></div>
      <div id="activity-2-container" class="order-container"></div>
      <div class="completion-message" id="activity-2-complete"><h3>Perfect Order!</h3></div>
      <div class="btn-group"><button class="btn btn-outline" onclick="resetActivity('activity-2')">Reset</button><button class="btn btn-primary" onclick="showSection('activity-3')">Next ‚Üí</button></div>
    </div></section>

    <section id="activity-3" class="section"><div class="card"><h3>Comprehensive Review</h3>
      <div class="score-display"><span class="score"><span id="activity-3-score">0</span>/12</span></div>
      <div id="activity-3-container"></div>
      <div class="completion-message" id="activity-3-complete"><h3>Complete!</h3></div>
      <div class="btn-group"><button class="btn btn-outline" onclick="resetActivity('activity-3')">Reset</button><button class="btn btn-primary" onclick="showSection('activity-4')">Next ‚Üí</button></div>
    </div></section>

    <section id="activity-4" class="section"><div class="card"><h3>Final Check</h3>
      <div class="score-display"><span class="score"><span id="activity-4-score">0</span>/12</span></div>
      <div id="activity-4-container"></div>
      <div class="completion-message" id="activity-4-complete"><h3>Complete!</h3></div>
      <div class="btn-group"><button class="btn btn-outline" onclick="resetActivity('activity-4')">Reset</button><button class="btn btn-primary" onclick="showSection('activity-5')">Next ‚Üí</button></div>
    </div></section>

    <section id="activity-5" class="section"><div class="card"><h3>Clause Functions</h3>
      <div class="score-display"><span class="score"><span id="activity-5-score">0</span>/12</span></div>
      <div class="sort-pool" id="activity-5-pool"><div class="sort-items" id="activity-5-items"></div></div>
      <div class="sort-groups" id="activity-5-groups"></div>
      <div class="completion-message" id="activity-5-complete"><h3>All Sorted!</h3></div>
      <div class="btn-group"><button class="btn btn-outline" onclick="resetActivity('activity-5')">Reset</button><button class="btn btn-primary" onclick="showSection('activity-6')">Next ‚Üí</button></div>
    </div></section>

    <section id="activity-6" class="section"><div class="card"><h3>Comprehensive Clause Practice</h3>
      <div class="score-display"><span class="score"><span id="activity-6-score">0</span>/12</span></div>
      <div id="activity-6-container" class="fill-container"></div>
      <div class="completion-message" id="activity-6-complete"><h3>Complete!</h3></div>
      <div class="btn-group"><button class="btn btn-outline" onclick="resetActivity('activity-6')">Reset</button><button class="btn btn-primary" onclick="showSection('activity-7')">Next ‚Üí</button></div>
    </div></section>

    <section id="activity-7" class="section"><div class="card"><h3>Identify the Clause Type</h3>
      <div class="score-display"><span class="score"><span id="activity-7-score">0</span>/12</span></div>
      <div id="activity-7-container" class="select-container"></div>
      <div class="completion-message" id="activity-7-complete"><h3>Complete!</h3></div>
      <div class="btn-group"><button class="btn btn-outline" onclick="resetActivity('activity-7')">Reset</button><button class="btn btn-primary" onclick="showSection('activity-8')">Next ‚Üí</button></div>
    </div></section>

    <section id="activity-8" class="section"><div class="card"><h3>Complex Sentence Review</h3>
      <div class="score-display"><span class="score"><span id="activity-8-score">0</span>/12</span></div>
      <div id="activity-8-container" class="order-container"></div>
      <div class="completion-message" id="activity-8-complete"><h3>Perfect Order!</h3></div>
      <div class="btn-group"><button class="btn btn-outline" onclick="resetActivity('activity-8')">Reset</button><button class="btn btn-primary" onclick="showSection('activity-9')">Next ‚Üí</button></div>
    </div></section>

    <section id="activity-9" class="section"><div class="card"><h3>Advanced Complex Sentence Analysis</h3>
      <div class="score-display"><span class="score"><span id="activity-9-score">0</span>/12</span></div>
      <div id="activity-9-container"></div>
      <div class="completion-message" id="activity-9-complete"><h3>Complete!</h3></div>
      <div class="btn-group"><button class="btn btn-outline" onclick="resetActivity('activity-9')">Reset</button><button class="btn btn-primary" onclick="showSection('vocab')">Next ‚Üí</button></div>
    </div></section>
    
    <section id="vocab" class="section">
      <div class="card">
        <h3>–°–ª–æ–≤–Ω–∏–∫ (20)</h3>
        <div class="vocab-table-container">
          <table class="vocab-table">
            <thead><tr>
    <th>–°–ª–æ–≤–æ</th>
    
    <th>IPA</th>
    <th>–ü–µ—Ä–µ–∫–ª–∞–¥</th>
    <th>–ü—Ä–∏–º—ñ—Ç–∫–∞</th>
  </tr></thead>
            <tbody><tr><td class="vocab-uk">—Å–ø–æ—á–∞—Ç–∫—É</td><td class="vocab-ipa">/spoÀàt Éatku/</td><td class="vocab-en">at first</td><td class="vocab-note"></td></tr><tr><td class="vocab-uk">–ø–æ—Ç—ñ–º</td><td class="vocab-ipa">/poÀàtim/</td><td class="vocab-en">then</td><td class="vocab-note"></td></tr><tr><td class="vocab-uk">–Ω–∞—Ä–µ—à—Ç—ñ</td><td class="vocab-ipa">/naÀàr…õ Éti/</td><td class="vocab-en">finally</td><td class="vocab-note"></td></tr><tr><td class="vocab-uk">—Ä–∞–ø—Ç–æ–º</td><td class="vocab-ipa">/Ààraptom/</td><td class="vocab-en">suddenly</td><td class="vocab-note"></td></tr><tr><td class="vocab-uk">—Ç–æ–º—É —â–æ</td><td class="vocab-ipa">/toÀàmu  Ét Éo/</td><td class="vocab-en">because</td><td class="vocab-note"></td></tr><tr><td class="vocab-uk">—Ö–æ—á–∞</td><td class="vocab-ipa">/xoÀàt Éa/</td><td class="vocab-en">although</td><td class="vocab-note"></td></tr><tr><td class="vocab-uk">—Å–∫–∞–∑–∞—Ç–∏</td><td class="vocab-ipa">/skaÀàzat…™/</td><td class="vocab-en">to say</td><td class="vocab-note">pf</td></tr><tr><td class="vocab-uk">–¥—É–º–∞—Ç–∏</td><td class="vocab-ipa">/duÀàmat…™/</td><td class="vocab-en">to think</td><td class="vocab-note"></td></tr><tr><td class="vocab-uk">–≤–≤–∞–∂–∞—Ç–∏</td><td class="vocab-ipa">/wwaÀà íat…™/</td><td class="vocab-en">to believe</td><td class="vocab-note"></td></tr><tr><td class="vocab-uk">—Ä–∞–¥–∏–π</td><td class="vocab-ipa">/Ààrad…™j/</td><td class="vocab-en">glad</td><td class="vocab-note"></td></tr><tr><td class="vocab-uk">—Å—É–º–Ω–∏–π</td><td class="vocab-ipa">/Ààsumn…™j/</td><td class="vocab-en">sad</td><td class="vocab-note"></td></tr><tr><td class="vocab-uk">—â–æ–±</td><td class="vocab-ipa">/ Ét Éob/</td><td class="vocab-en">in order to</td><td class="vocab-note"></td></tr><tr><td class="vocab-uk">—è–∫–∏–π</td><td class="vocab-ipa">/jaÀàk…™j/</td><td class="vocab-en">which, who</td><td class="vocab-note"></td></tr><tr><td class="vocab-uk">–∫–æ–ª–∏</td><td class="vocab-ipa">/koÀàl…™/</td><td class="vocab-en">when</td><td class="vocab-note"></td></tr><tr><td class="vocab-uk">–ø–æ–∫–∏</td><td class="vocab-ipa">/poÀàk…™/</td><td class="vocab-en">while</td><td class="vocab-note"></td></tr><tr><td class="vocab-uk">–ø—ñ—Å–ª—è —Ç–æ–≥–æ —è–∫</td><td class="vocab-ipa">/Ààpisl ≤a toÀà…¶o jak/</td><td class="vocab-en">after</td><td class="vocab-note"></td></tr><tr><td class="vocab-uk">–ø–µ—Ä—à –Ω—ñ–∂</td><td class="vocab-ipa">/p…õr É ni í/</td><td class="vocab-en">before</td><td class="vocab-note"></td></tr><tr><td class="vocab-uk">—Å–∫–ª–∞–¥–Ω–µ —Ä–µ—á–µ–Ω–Ω—è</td><td class="vocab-ipa">/skladÀàn…õ r…õÀàt É…õn ≤Àêa/</td><td class="vocab-en">complex sentence</td><td class="vocab-note"></td></tr><tr><td class="vocab-uk">–ø—ñ–¥—Ä—è–¥–Ω–µ —Ä–µ—á–µ–Ω–Ω—è</td><td class="vocab-ipa">/pidÀàr ≤adn…õ r…õÀàt É…õn ≤Àêa/</td><td class="vocab-en">subordinate clause</td><td class="vocab-note"></td></tr><tr><td class="vocab-uk">–≥–æ–ª–æ–≤–Ω–µ —Ä–µ—á–µ–Ω–Ω—è</td><td class="vocab-ipa">/…¶oÀàlown…õ r…õÀàt É…õn ≤Àêa/</td><td class="vocab-en">main clause</td><td class="vocab-note"></td></tr></tbody>
          </table>
        </div>
      </div>
      
      <div class="btn-group">
        <button class="btn btn-primary" onclick="showSection('lesson')">‚Üê Back to Lesson</button>
      </div>
    </section>
  </main><footer>Module 30 ¬∑ curricula-opus</footer>
  <script>

    const activitiesData = [{"id":"activity-0","type":"fill-blank","title":"Mixed Review","data":{"type":"fill-blank","items":[{"prompt":"___ —è –ø—Ä–æ–∫–∏–Ω—É–≤—Å—è –æ —Å—å–æ–º—ñ–π. (at first)","answer":"–°–ø–æ—á–∞—Ç–∫—É"},{"prompt":"–Ø –Ω–µ –ø—Ä–∏–π—à–æ–≤, ___ –±—É–≤ —Ö–≤–æ—Ä–∏–π. (because)","answer":"—Ç–æ–º—É —â–æ"},{"prompt":"–í—ñ–Ω —Å–∫–∞–∑–∞–≤, ___ –ø—Ä–∏–π–¥–µ –∑–∞–≤—Ç—Ä–∞. (that)","answer":"—â–æ"},{"prompt":"–Ø ___, —â–æ —Ü–µ –ø—Ä–∞–≤–¥–∞. (think)","answer":"–¥—É–º–∞—é"},{"prompt":"–Ø ___, —â–æ —Ç–∏ –ø—Ä–∏–π—à–æ–≤. (glad)","answer":"—Ä–∞–¥–∏–π"},{"prompt":"–Ø –ø—Ä–∏–π—à–æ–≤, ___ –¥–æ–ø–æ–º–æ–≥—Ç–∏. (in order to)","answer":"—â–æ–±"},{"prompt":"–ñ—ñ–Ω–∫–∞, ___ –≥–æ–≤–æ—Ä–∏—Ç—å, ‚Äî –≤—á–∏—Ç–µ–ª—å–∫–∞. (who - f)","answer":"—è–∫–∞"},{"prompt":"___ —è –ø—Ä–∏–π—à–æ–≤, –≤—ñ–Ω —Å–ø–∞–≤. (when)","answer":"–ö–æ–ª–∏"},{"prompt":"___ –≤—ñ–Ω —Å–ø–∞–≤, —è –ø—Ä–∞—Ü—é–≤–∞–≤. (while)","answer":"–ü–æ–∫–∏"},{"prompt":"___ —Ö–æ–ª–æ–¥–Ω–æ, —è –≤–∏–π—à–æ–≤. (although)","answer":"–•–æ—á–∞"},{"prompt":"___ –ø—ñ—à–æ–≤ –¥–æ—â. (suddenly)","answer":"–†–∞–ø—Ç–æ–º"},{"prompt":"–Ø —Ö–æ—á—É, ___ —Ç–∏ –ø—Ä–∏–π—à–æ–≤. (so that)","answer":"—â–æ–±"}]}},{"id":"activity-1","type":"match-up","title":"Clause Types","data":{"type":"match-up","pairs":[{"left":"—Ç–æ–º—É —â–æ","right":"causal (because)"},{"left":"—Ö–æ—á–∞","right":"concessive (although)"},{"left":"—â–æ (after —Å–∫–∞–∑–∞–≤)","right":"reported speech"},{"left":"—â–æ (after –¥—É–º–∞—é)","right":"opinion"},{"left":"—â–æ (after —Ä–∞–¥–∏–π)","right":"emotion"},{"left":"—â–æ–±","right":"purpose"},{"left":"—è–∫–∏–π/—è–∫–∞","right":"relative"},{"left":"–∫–æ–ª–∏","right":"time (when)"},{"left":"–ø–æ–∫–∏","right":"time (while)"},{"left":"–ø—ñ—Å–ª—è —Ç–æ–≥–æ —è–∫","right":"time (after)"},{"left":"–ø–µ—Ä—à –Ω—ñ–∂","right":"time (before)"},{"left":"—Ä–∞–ø—Ç–æ–º","right":"sequence (sudden)"}],"shuffleRight":true}},{"id":"activity-2","type":"unjumble","title":"Complex Sentences","data":{"type":"unjumble","isUnjumble":true,"items":[{"words":["–°–ø–æ—á–∞—Ç–∫—É","—è","–ø—Ä–æ–∫–∏–Ω—É–≤—Å—è","–æ","—Å—å–æ–º—ñ–π","–ø–æ—Ç—ñ–º","–ø–æ—Å–Ω—ñ–¥–∞–≤","—à–≤–∏–¥–∫–æ"],"answer":"–°–ø–æ—á–∞—Ç–∫—É —è –ø—Ä–æ–∫–∏–Ω—É–≤—Å—è –æ —Å—å–æ–º—ñ–π, –ø–æ—Ç—ñ–º —à–≤–∏–¥–∫–æ –ø–æ—Å–Ω—ñ–¥–∞–≤.","translation":"First I woke up at seven, then I quickly had breakfast."},{"words":["–ø—Ä–∏–π—à–æ–≤","–Ω–µ","–Ø","—Ç–æ–º—É —â–æ","—Ö–≤–æ—Ä–∏–π","–±—É–≤","–Ω–∞","—Ä–æ–±–æ—Ç—É"],"answer":"–Ø –Ω–µ –ø—Ä–∏–π—à–æ–≤ –Ω–∞ —Ä–æ–±–æ—Ç—É, —Ç–æ–º—É —â–æ –±—É–≤ —Ö–≤–æ—Ä–∏–π.","translation":"I didn't come to work because I was sick."},{"words":["—Å–∫–∞–∑–∞–≤","—â–æ","–í—ñ–Ω","–ø—Ä–∏–π–¥–µ","–∑–∞–≤—Ç—Ä–∞","–≤—Ä–∞–Ω—Ü—ñ","–¥–æ","–Ω–∞—Å"],"answer":"–í—ñ–Ω —Å–∫–∞–∑–∞–≤, —â–æ –ø—Ä–∏–π–¥–µ –¥–æ –Ω–∞—Å –∑–∞–≤—Ç—Ä–∞ –≤—Ä–∞–Ω—Ü—ñ.","translation":"He said that he would come to us tomorrow morning."},{"words":["–¥—É–º–∞—é","—â–æ","–ø—Ä–∞–≤–¥–∞","–Ø","—Ü–µ","–∞–ª–µ","–Ω–µ","–≤–ø–µ–≤–Ω–µ–Ω–∏–π"],"answer":"–Ø –¥—É–º–∞—é, —â–æ —Ü–µ –ø—Ä–∞–≤–¥–∞, –∞–ª–µ –Ω–µ –≤–ø–µ–≤–Ω–µ–Ω–∏–π.","translation":"I think that this is true, but I'm not sure."},{"words":["—Ä–∞–¥–∏–π","—â–æ","—Ç–∏","–ø—Ä–∏–π—à–æ–≤","–Ø","–¥–æ","–º–µ–Ω–µ","—Å—å–æ–≥–æ–¥–Ω—ñ"],"answer":"–Ø —Ä–∞–¥–∏–π, —â–æ —Ç–∏ —Å—å–æ–≥–æ–¥–Ω—ñ –ø—Ä–∏–π—à–æ–≤ –¥–æ –º–µ–Ω–µ.","translation":"I'm glad that you came to me today."},{"words":["–ø—Ä–∏–π—à–æ–≤","—â–æ–±","–¥–æ–ø–æ–º–æ–≥—Ç–∏","–Ø","—Ç–æ–±—ñ","–∑","—Ü–∏–º","–∑–∞–≤–¥–∞–Ω–Ω—è–º"],"answer":"–Ø –ø—Ä–∏–π—à–æ–≤, —â–æ–± –¥–æ–ø–æ–º–æ–≥—Ç–∏ —Ç–æ–±—ñ –∑ —Ü–∏–º –∑–∞–≤–¥–∞–Ω–Ω—è–º.","translation":"I came to help you with this task."},{"words":["—è–∫–∞","–ñ—ñ–Ω–∫–∞","–≥–æ–≤–æ—Ä–∏—Ç—å","–≤—á–∏—Ç–µ–ª—å–∫–∞","–∑–∞—Ä–∞–∑","—É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—ó","–º–æ–≤–∏","–Ω–∞—à–∞"],"answer":"–ñ—ñ–Ω–∫–∞, —è–∫–∞ –∑–∞—Ä–∞–∑ –≥–æ–≤–æ—Ä–∏—Ç—å, ‚Äî –Ω–∞—à–∞ –≤—á–∏—Ç–µ–ª—å–∫–∞ —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—ó –º–æ–≤–∏.","translation":"The woman who is speaking now is our Ukrainian teacher."},{"words":["—è","–ö–æ–ª–∏","–ø—Ä–∏–π—à–æ–≤","—Å–ø–∞–≤","–≤—ñ–Ω","—â–µ","—É","–ª—ñ–∂–∫—É"],"answer":"–ö–æ–ª–∏ —è –ø—Ä–∏–π—à–æ–≤, –≤—ñ–Ω —â–µ —Å–ø–∞–≤ —É –ª—ñ–∂–∫—É.","translation":"When I arrived, he was still sleeping in bed."},{"words":["—Å–ø–∞–≤","–≤—ñ–Ω","–ü–æ–∫–∏","–ø—Ä–∞—Ü—é–≤–∞–≤","—è","–Ω–∞–¥","—Å–≤–æ—ó–º","–ø—Ä–æ—î–∫—Ç–æ–º"],"answer":"–ü–æ–∫–∏ –≤—ñ–Ω —Å–ø–∞–≤, —è –ø—Ä–∞—Ü—é–≤–∞–≤ –Ω–∞–¥ —Å–≤–æ—ó–º –ø—Ä–æ—î–∫—Ç–æ–º.","translation":"While he was sleeping, I was working on my project."},{"words":["—Ö–æ–ª–æ–¥–Ω–æ","–•–æ—á–∞","–±—É–ª–æ","–¥—É–∂–µ","–≤–∏–π—à–æ–≤","—è","–Ω–∞","–ø—Ä–æ–≥—É–ª—è–Ω–∫—É"],"answer":"–•–æ—á–∞ –±—É–ª–æ –¥—É–∂–µ —Ö–æ–ª–æ–¥–Ω–æ, —è –≤–∏–π—à–æ–≤ –Ω–∞ –ø—Ä–æ–≥—É–ª—è–Ω–∫—É.","translation":"Although it was very cold, I went out for a walk."},{"words":["—Ö–æ—á—É","—â–æ–±","—Ç–∏","–ø—Ä–∏–π—à–æ–≤","–Ø","–¥–æ","–º–µ–Ω–µ","–∑–∞–≤—Ç—Ä–∞"],"answer":"–Ø —Ö–æ—á—É, —â–æ–± —Ç–∏ –ø—Ä–∏–π—à–æ–≤ –¥–æ –º–µ–Ω–µ –∑–∞–≤—Ç—Ä–∞.","translation":"I want you to come to me tomorrow."},{"words":["—á–æ–ª–æ–≤—ñ–∫","–¶–µ","—è–∫–æ–≥–æ","—è","–±–∞—á–∏–≤","—É—á–æ—Ä–∞","–≤","–∫–∞—Ñ–µ"],"answer":"–¶–µ —á–æ–ª–æ–≤—ñ–∫, —è–∫–æ–≥–æ —è –±–∞—á–∏–≤ —É—á–æ—Ä–∞ –≤ –∫–∞—Ñ–µ.","translation":"This is the man whom I saw yesterday in the caf√©."}]}},{"id":"activity-3","type":"quiz","title":"Comprehensive Review","data":{"type":"quiz","questions":[{"question":"\"–°–ø–æ—á–∞—Ç–∫—É\" is used:","options":["At the beginning of a sequence","At the end","For sudden events","For causes"],"correctIndex":0,"explanation":""},{"question":"\"–¢–æ–º—É —â–æ\" expresses:","options":["Cause/reason","Contrast","Time","Purpose"],"correctIndex":0,"explanation":""},{"question":"Reported speech uses:","options":["–©–æ for statements","–Ø–∫–∏–π for statements","–ö–æ–ª–∏ for statements","–©–æ–± for statements"],"correctIndex":0,"explanation":""},{"question":"\"–Ø –¥—É–º–∞—é, —â–æ...\" expresses:","options":["Opinion","Emotion","Purpose","Time"],"correctIndex":0,"explanation":""},{"question":"\"–Ø —Ä–∞–¥–∏–π, —â–æ...\" expresses:","options":["Emotion","Opinion","Purpose","Time"],"correctIndex":0,"explanation":""},{"question":"Purpose clauses with same subject use:","options":["–©–æ–± + infinitive","–©–æ–± + past tense","–©–æ + infinitive","–Ø–∫–∏–π + infinitive"],"correctIndex":0,"explanation":""},{"question":"Relative clauses use:","options":["–Ø–∫–∏–π/—è–∫–∞/—è–∫–µ/—è–∫—ñ","–©–æ–±","–¢–æ–º—É —â–æ","–ö–æ–ª–∏"],"correctIndex":0,"explanation":""},{"question":"\"–ö–æ–ª–∏\" introduces:","options":["Time clauses","Purpose clauses","Relative clauses","Causal clauses"],"correctIndex":0,"explanation":""},{"question":"\"–•–æ—á–∞\" expresses:","options":["Concession/contrast","Cause","Purpose","Time"],"correctIndex":0,"explanation":""},{"question":"\"–ü–æ–∫–∏ –Ω–µ\" means:","options":["Until","While","Before","After"],"correctIndex":0,"explanation":""},{"question":"Different subjects use:","options":["–©–æ–± + past tense","–©–æ–± + infinitive","–©–æ + infinitive","–Ø–∫–∏–π + past"],"correctIndex":0,"explanation":""},{"question":"\"–†–∞–ø—Ç–æ–º\" indicates:","options":["Sudden unexpected event","Gradual change","Cause","Purpose"],"correctIndex":0,"explanation":""}],"shuffleQuestions":true,"shuffleOptions":true,"showCorrectAnswers":true}},{"id":"activity-4","type":"true-false","title":"Final Check","data":{"type":"true-false","statements":[{"statement":"\"–°–ø–æ—á–∞—Ç–∫—É\" starts sequences.","isTrue":true,"explanation":""},{"statement":"\"–¢–æ–º—É —â–æ\" expresses contrast.","isTrue":false,"explanation":""},{"statement":"Reported speech uses \"—â–æ.\"","isTrue":true,"explanation":""},{"statement":"\"–Ø–∫–∏–π\" changes by gender.","isTrue":true,"explanation":""},{"statement":"\"–ö–æ–ª–∏\" only means \"when\" as conjunction.","isTrue":false,"explanation":""},{"statement":"\"–©–æ–±\" + infinitive = same subject.","isTrue":true,"explanation":""},{"statement":"\"–•–æ—á–∞\" = \"because.\"","isTrue":false,"explanation":""},{"statement":"\"–ü–æ–∫–∏\" means \"while.\"","isTrue":true,"explanation":""},{"statement":"\"–ü—ñ—Å–ª—è —Ç–æ–≥–æ —è–∫\" = \"before.\"","isTrue":false,"explanation":""},{"statement":"Opinion verbs take \"—â–æ.\"","isTrue":true,"explanation":""},{"statement":"\"–†–∞–ø—Ç–æ–º\" = \"finally.\"","isTrue":false,"explanation":""},{"statement":"\"–Ø–∫–∞\" is for feminine nouns.","isTrue":true,"explanation":""}]}},{"id":"activity-5","type":"group-sort","title":"Clause Functions","data":{"type":"group-sort","groups":[{"id":"sequence","name":"Sequence","items":["—Å–ø–æ—á–∞—Ç–∫—É","–ø–æ—Ç—ñ–º","–Ω–∞—Ä–µ—à—Ç—ñ"]},{"id":"causecontrast","name":"Cause/Contrast","items":["—Ç–æ–º—É —â–æ","—Ö–æ—á–∞","–∞–ª–µ"]},{"id":"reportopinion","name":"Report/Opinion","items":["—Å–∫–∞–∑–∞–≤, —â–æ","–¥—É–º–∞—é, —â–æ","—Ä–∞–¥–∏–π, —â–æ"]},{"id":"purposerelativetime","name":"Purpose/Relative/Time","items":["—â–æ–±","—è–∫–∏–π","–∫–æ–ª–∏"]}],"shuffleItems":true}},{"id":"activity-6","type":"fill-blank","title":"Comprehensive Clause Practice","data":{"type":"fill-blank","items":[{"prompt":"___ –º–∏ –ø–æ–≥–æ–≤–æ—Ä–∏–ª–∏, —è –≤—Å–µ –∑—Ä–æ–∑—É–º—ñ–≤. (after)","answer":"–ü—ñ—Å–ª—è —Ç–æ–≥–æ —è–∫"},{"prompt":"–í—ñ–Ω –∑–∞–ø–∏—Ç–∞–≤, ___ —è –ø—Ä–∏—ó–¥—É. (whether)","answer":"—á–∏"},{"prompt":"–í–æ–Ω–∞ —Å—É–º–Ω–∞, ___ –¥—Ä—É–≥ –ø–æ—ó—Ö–∞–≤. (that)","answer":"—â–æ"},{"prompt":"–¶–µ –∫–Ω–∏–≥–∞, ___ —è —á–∏—Ç–∞—é –∑–∞—Ä–∞–∑. (which - f acc)","answer":"—è–∫—É"},{"prompt":"___ –Ω—ñ–∂ –≤–∏–π—Ç–∏, –≤—ñ–∑—å–º–∏ –ø–∞—Ä–∞—Å–æ–ª—å–∫—É. (before)","answer":"–ü–µ—Ä—à"},{"prompt":"___ –≤—ñ–Ω —É–≤—ñ–π—à–æ–≤, —É—Å—ñ –∑–∞–º–æ–≤–∫–ª–∏. (as soon as)","answer":"–©–æ–π–Ω–æ"},{"prompt":"–Ø –≤—á—É—Å—è, ___ –∑–Ω–∞—Ç–∏ –±—ñ–ª—å—à–µ. (in order to)","answer":"—â–æ–±"},{"prompt":"–ú–µ–Ω—ñ ___, —â–æ –≤—Å–µ –¥–æ–±—Ä–µ –∑–∞–∫—ñ–Ω—á–∏–ª–æ—Å—è. (pleasant/nice)","answer":"–ø—Ä–∏—î–º–Ω–æ"},{"prompt":"___ –¥–æ—Ä–æ–≥–æ, —è–∫—ñ—Å—Ç—å —Ö–æ—Ä–æ—à–∞. (although)","answer":"–•–æ—á–∞"},{"prompt":"–í–æ–Ω–∞ —Ö–æ—á–µ, ___ –≤—ñ–Ω –ø—Ä–∏–π—à–æ–≤. (so that)","answer":"—â–æ–±"},{"prompt":"–°—Ç—É–¥–µ–Ω—Ç–∏, ___ –≤–∏–≤—á–∞—é—Ç—å —É–∫—Ä–∞—ó–Ω—Å—å–∫—É, –ø—Ä–∞—Ü—å–æ–≤–∏—Ç—ñ. (who - pl)","answer":"—è–∫—ñ"},{"prompt":"___ –ø—ñ–∑–Ω–æ, —è –ø—ñ—à–æ–≤ –¥–æ–¥–æ–º—É. (since/because formal)","answer":"–û—Å–∫—ñ–ª—å–∫–∏"}]}},{"id":"activity-7","type":"select","title":"Identify the Clause Type","data":{"type":"select","items":[{"question":"\"–Ø –Ω–µ –ø—Ä–∏–π—à–æ–≤, —Ç–æ–º—É —â–æ –±—É–≤ —Ö–≤–æ—Ä–∏–π\" ‚Äî this is:","options":[{"text":"Causal clause","correct":true},{"text":"Purpose clause","correct":false},{"text":"Time clause","correct":false},{"text":"Relative clause","correct":false}]},{"question":"\"–í—ñ–Ω —Å–∫–∞–∑–∞–≤, —â–æ –ø—Ä–∏–π–¥–µ\" ‚Äî this is:","options":[{"text":"Reported speech","correct":true},{"text":"Opinion","correct":false},{"text":"Purpose","correct":false},{"text":"Relative clause","correct":false}]},{"question":"\"–ñ—ñ–Ω–∫–∞, —è–∫–∞ –≥–æ–≤–æ—Ä–∏—Ç—å...\" ‚Äî this is:","options":[{"text":"Relative clause","correct":true},{"text":"Causal clause","correct":false},{"text":"Time clause","correct":false},{"text":"Purpose clause","correct":false}]},{"question":"\"–ö–æ–ª–∏ —è –ø—Ä–∏–π—à–æ–≤, –≤—ñ–Ω —Å–ø–∞–≤\" ‚Äî this is:","options":[{"text":"Time clause","correct":true},{"text":"Purpose clause","correct":false},{"text":"Relative clause","correct":false},{"text":"Causal clause","correct":false}]},{"question":"\"–Ø –ø—Ä–∏–π—à–æ–≤, —â–æ–± –¥–æ–ø–æ–º–æ–≥—Ç–∏\" ‚Äî this is:","options":[{"text":"Purpose clause","correct":true},{"text":"Time clause","correct":false},{"text":"Causal clause","correct":false},{"text":"Relative clause","correct":false}]},{"question":"\"–Ø –¥—É–º–∞—é, —â–æ —Ü–µ –ø—Ä–∞–≤–¥–∞\" ‚Äî this is:","options":[{"text":"Opinion clause","correct":true},{"text":"Reported speech","correct":false},{"text":"Purpose","correct":false},{"text":"Time clause","correct":false}]},{"question":"\"–•–æ—á–∞ —Ö–æ–ª–æ–¥–Ω–æ, —è –≤–∏–π—à–æ–≤\" ‚Äî this is:","options":[{"text":"Concessive clause","correct":true},{"text":"Causal clause","correct":false},{"text":"Purpose clause","correct":false},{"text":"Time clause","correct":false}]},{"question":"\"–Ø —Ä–∞–¥–∏–π, —â–æ —Ç–∏ –ø—Ä–∏–π—à–æ–≤\" ‚Äî this is:","options":[{"text":"Emotion clause","correct":true},{"text":"Purpose clause","correct":false},{"text":"Time clause","correct":false},{"text":"Relative clause","correct":false}]},{"question":"\"–ü–æ–∫–∏ –≤—ñ–Ω —Å–ø–∞–≤, —è –ø—Ä–∞—Ü—é–≤–∞–≤\" ‚Äî this is:","options":[{"text":"Time clause (simultaneous)","correct":true},{"text":"Purpose clause","correct":false},{"text":"Causal clause","correct":false},{"text":"Relative clause","correct":false}]},{"question":"\"–ß–µ–∫–∞–π, –ø–æ–∫–∏ –Ω–µ –ø—Ä–∏–π–¥–µ\" ‚Äî \"–ø–æ–∫–∏ –Ω–µ\" means:","options":[{"text":"Until","correct":true},{"text":"While","correct":false},{"text":"Before","correct":false},{"text":"After","correct":false}]},{"question":"\"–°–ø–æ—á–∞—Ç–∫—É..., –ø–æ—Ç—ñ–º..., –Ω–∞—Ä–µ—à—Ç—ñ...\" ‚Äî these are:","options":[{"text":"Sequence connectors","correct":true},{"text":"Causal connectors","correct":false},{"text":"Relative pronouns","correct":false},{"text":"Purpose markers","correct":false}]},{"question":"\"–ü–µ—Ä—à –Ω—ñ–∂ –ø—ñ—Ç–∏...\" ‚Äî this introduces:","options":[{"text":"Action before main clause","correct":true},{"text":"Action after main clause","correct":false},{"text":"Simultaneous action","correct":false},{"text":"Cause of action","correct":false}]}]}},{"id":"activity-8","type":"unjumble","title":"Complex Sentence Review","data":{"type":"unjumble","isUnjumble":true,"items":[{"words":["—è","|","–Ω–µ","|","–ø—Ä–∏–π—à–æ–≤","|","—Ç–æ–º—É","|","—â–æ","|","–±—É–≤","|","—Ö–≤–æ—Ä–∏–π"],"answer":"–Ø –Ω–µ –ø—Ä–∏–π—à–æ–≤, —Ç–æ–º—É —â–æ –±—É–≤ —Ö–≤–æ—Ä–∏–π.","translation":"I didn't come because I was sick."},{"words":["–≤—ñ–Ω","|","—Å–∫–∞–∑–∞–≤","|","—â–æ","|","—Ö–æ—á–µ","|","–¥–æ–ø–æ–º–æ–≥—Ç–∏"],"answer":"–í—ñ–Ω —Å–∫–∞–∑–∞–≤, —â–æ —Ö–æ—á–µ –¥–æ–ø–æ–º–æ–≥—Ç–∏.","translation":"He said that he wants to help."},{"words":["—á–æ–ª–æ–≤—ñ–∫","|","—è–∫–∏–π","|","—Ç–∞–º","|","—Å—Ç–æ—ó—Ç—å","|","–º—ñ–π","|","–¥—Ä—É–≥"],"answer":"–ß–æ–ª–æ–≤—ñ–∫, —è–∫–∏–π —Ç–∞–º —Å—Ç–æ—ó—Ç—å, ‚Äî –º—ñ–π –¥—Ä—É–≥.","translation":"The man who is standing there is my friend."},{"words":["–∫–æ–ª–∏","|","—è","|","–ø—Ä–∏–π—à–æ–≤","|","–≤–æ–Ω–∞","|","–≤–∂–µ","|","–ø—ñ—à–ª–∞"],"answer":"–ö–æ–ª–∏ —è –ø—Ä–∏–π—à–æ–≤, –≤–æ–Ω–∞ –≤–∂–µ –ø—ñ—à–ª–∞.","translation":"When I came, she had already left."},{"words":["—è","|","–≤—á—É—Å—è","|","—â–æ–±","|","–∑–Ω–∞–π—Ç–∏","|","–≥–∞—Ä–Ω—É","|","—Ä–æ–±–æ—Ç—É"],"answer":"–Ø –≤—á—É—Å—è, —â–æ–± –∑–Ω–∞–π—Ç–∏ –≥–∞—Ä–Ω—É —Ä–æ–±–æ—Ç—É.","translation":"I'm studying to find a good job."},{"words":["—Ö–æ—á–∞","|","–±—É–ª–æ","|","—Ö–æ–ª–æ–¥–Ω–æ","|","–≤—ñ–Ω","|","–≤–∏–π—à–æ–≤","|","–±–µ–∑","|","–∫—É—Ä—Ç–∫–∏"],"answer":"–•–æ—á–∞ –±—É–ª–æ —Ö–æ–ª–æ–¥–Ω–æ, –≤—ñ–Ω –≤–∏–π—à–æ–≤ –±–µ–∑ –∫—É—Ä—Ç–∫–∏.","translation":"Although it was cold, he went out without a jacket."},{"words":["–≤–æ–Ω–∞","|","–∑–∞–ø–∏—Ç–∞–ª–∞","|","—á–∏","|","—è","|","–±—É–¥—É","|","–≤–¥–æ–º–∞","|","–∑–∞–≤—Ç—Ä–∞"],"answer":"–í–æ–Ω–∞ –∑–∞–ø–∏—Ç–∞–ª–∞, —á–∏ —è –±—É–¥—É –≤–¥–æ–º–∞ –∑–∞–≤—Ç—Ä–∞.","translation":"She asked if I would be home tomorrow."},{"words":["–∫–Ω–∏–≥–∞","|","—è–∫—É","|","–≤—ñ–Ω","|","–Ω–∞–ø–∏—Å–∞–≤","|","–¥—É–∂–µ","|","–ø–æ–ø—É–ª—è—Ä–Ω–∞"],"answer":"–ö–Ω–∏–≥–∞, —è–∫—É –≤—ñ–Ω –Ω–∞–ø–∏—Å–∞–≤, –¥—É–∂–µ –ø–æ–ø—É–ª—è—Ä–Ω–∞.","translation":"The book that he wrote is very popular."},{"words":["–ø—ñ—Å–ª—è","|","—Ç–æ–≥–æ","|","—è–∫","|","–º–∏","|","–ø–æ—ó–ª–∏","|","–ø—ñ—à–ª–∏","|","–Ω–∞","|","–ø—Ä–æ–≥—É–ª—è–Ω–∫—É"],"answer":"–ü—ñ—Å–ª—è —Ç–æ–≥–æ —è–∫ –º–∏ –ø–æ—ó–ª–∏, –ø—ñ—à–ª–∏ –Ω–∞ –ø—Ä–æ–≥—É–ª—è–Ω–∫—É.","translation":"After we ate, we went for a walk."},{"words":["—è","|","–¥—É–º–∞—é","|","—â–æ","|","–≤—ñ–Ω","|","–ø—Ä–∞–≤–∏–π"],"answer":"–Ø –¥—É–º–∞—é, —â–æ –≤—ñ–Ω –ø—Ä–∞–≤–∏–π.","translation":"I think that he is right."},{"words":["–º–∞–º–∞","|","—Ö–æ—á–µ","|","—â–æ–±","|","—è","|","–ø—Ä–∏–±—Ä–∞–≤","|","–∫—ñ–º–Ω–∞—Ç—É"],"answer":"–ú–∞–º–∞ —Ö–æ—á–µ, —â–æ–± —è –ø—Ä–∏–±—Ä–∞–≤ –∫—ñ–º–Ω–∞—Ç—É.","translation":"Mom wants me to clean the room."},{"words":["–ø–µ—Ä—à","|","–Ω—ñ–∂","|","–ø—ñ—Ç–∏","|","–≤—ñ–Ω","|","–ø–æ–¥–∑–≤–æ–Ω–∏–≤","|","–¥—Ä—É–≥—É"],"answer":"–ü–µ—Ä—à –Ω—ñ–∂ –ø—ñ—Ç–∏, –≤—ñ–Ω –ø–æ–¥–∑–≤–æ–Ω–∏–≤ –¥—Ä—É–≥—É.","translation":"Before leaving, he called his friend."}]}},{"id":"activity-9","type":"quiz","title":"Advanced Complex Sentence Analysis","data":{"type":"quiz","questions":[{"question":"\"–©–æ–±\" + infinitive vs \"—â–æ–±\" + past tense:","options":["Same subject vs different subjects","No difference","Past vs future","Formal vs informal"],"correctIndex":0,"explanation":""},{"question":"\"–Ø–∫–∏–π\" changes form based on:","options":["Gender, number, and case","Only gender","Only case","Nothing ‚Äî it's invariable"],"correctIndex":0,"explanation":""},{"question":"Reported questions use:","options":["–ß–∏ (yes/no) or question word (—â–æ, –¥–µ, –∫–æ–ª–∏...)","Only —â–æ","Only —á–∏","They don't exist in Ukrainian"],"correctIndex":0,"explanation":""},{"question":"\"–ú–µ–Ω—ñ —Ä–∞–¥—ñ—Å–Ω–æ, —â–æ...\" ‚Äî \"–º–µ–Ω—ñ\" is:","options":["Dative case (experiencer)","Nominative","Accusative","Genitive"],"correctIndex":0,"explanation":""},{"question":"\"–ë–æ\" vs \"—Ç–æ–º—É —â–æ\":","options":["Same meaning, –±–æ is more informal","Different meanings","–ë–æ is formal","They're not interchangeable"],"correctIndex":0,"explanation":""},{"question":"Time clause position:","options":["Can be before or after main clause","Only before","Only after","In the middle only"],"correctIndex":0,"explanation":""},{"question":"\"–•–æ—á–∞\" and \"–ø—Ä–æ—Ç–µ\" both express:","options":["Contrast/concession","Cause","Purpose","Time"],"correctIndex":0,"explanation":""},{"question":"\"–ü—ñ—Å–ª—è —Ç–æ–≥–æ —è–∫\" introduces:","options":["An action that happened before the main action","An action that happens after the main action","Simultaneous actions","Purpose"],"correctIndex":0,"explanation":""},{"question":"Commas in Ukrainian complex sentences:","options":["Required before subordinate clauses","Optional","Never used","Only in questions"],"correctIndex":0,"explanation":""},{"question":"\"–†–∞–ø—Ç–æ–º\" differs from \"–ø–æ—Ç—ñ–º\" because:","options":["–†–∞–ø—Ç–æ–º = sudden/unexpected; –ø–æ—Ç—ñ–º = then/next","No difference","–†–∞–ø—Ç–æ–º is more formal","–ü–æ—Ç—ñ–º is unexpected"],"correctIndex":0,"explanation":""},{"question":"\"–í–≤–∞–∂–∞—é\" vs \"–≥–∞–¥–∞—é\" vs \"–¥—É–º–∞—é\":","options":["All express opinion with decreasing certainty","All mean the same","Only –¥—É–º–∞—é expresses opinion","They express different emotions"],"correctIndex":0,"explanation":""},{"question":"Complex sentences in Ukrainian typically:","options":["Have comma before \"—â–æ\", \"—è–∫–∏–π\", \"–∫–æ–ª–∏\", etc.","Never have commas","Have comma only after conjunction","Follow English punctuation rules"],"correctIndex":0,"explanation":""}],"shuffleQuestions":true,"shuffleOptions":true,"showCorrectAnswers":true}}];
    const vocabData = [{"uk":"—Å–ø–æ—á–∞—Ç–∫—É","translit":"","en":"at first","note":""},{"uk":"–ø–æ—Ç—ñ–º","translit":"","en":"then","note":""},{"uk":"–Ω–∞—Ä–µ—à—Ç—ñ","translit":"","en":"finally","note":""},{"uk":"—Ä–∞–ø—Ç–æ–º","translit":"","en":"suddenly","note":""},{"uk":"—Ç–æ–º—É —â–æ","translit":"","en":"because","note":""},{"uk":"—Ö–æ—á–∞","translit":"","en":"although","note":""},{"uk":"—Å–∫–∞–∑–∞—Ç–∏","translit":"","en":"to say","note":"pf"},{"uk":"–¥—É–º–∞—Ç–∏","translit":"","en":"to think","note":""},{"uk":"–≤–≤–∞–∂–∞—Ç–∏","translit":"","en":"to believe","note":""},{"uk":"—Ä–∞–¥–∏–π","translit":"","en":"glad","note":""},{"uk":"—Å—É–º–Ω–∏–π","translit":"","en":"sad","note":""},{"uk":"—â–æ–±","translit":"","en":"in order to","note":""},{"uk":"—è–∫–∏–π","translit":"","en":"which, who","note":""},{"uk":"–∫–æ–ª–∏","translit":"","en":"when","note":""},{"uk":"–ø–æ–∫–∏","translit":"","en":"while","note":""},{"uk":"–ø—ñ—Å–ª—è —Ç–æ–≥–æ —è–∫","translit":"","en":"after","note":""},{"uk":"–ø–µ—Ä—à –Ω—ñ–∂","translit":"","en":"before","note":""},{"uk":"—Å–∫–ª–∞–¥–Ω–µ —Ä–µ—á–µ–Ω–Ω—è","translit":"","en":"complex sentence","note":""},{"uk":"–ø—ñ–¥—Ä—è–¥–Ω–µ —Ä–µ—á–µ–Ω–Ω—è","translit":"","en":"subordinate clause","note":""},{"uk":"–≥–æ–ª–æ–≤–Ω–µ —Ä–µ—á–µ–Ω–Ω—è","translit":"","en":"main clause","note":""}];
  
// Answer callout toggle (for new > [!answer] syntax)
function toggleAnswer(id, btn) {
  const el = document.getElementById(id);
  if (!el) return;
  const isUkrainian = document.querySelector('.level-badge')?.textContent.match(/B[12]|C[12]/);
  const showText = isUkrainian ? '–ü–æ–∫–∞–∑–∞—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—å' : 'Show Answer';
  const hideText = isUkrainian ? '–°—Ö–æ–≤–∞—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—å' : 'Hide Answer';
  const show = !el.classList.contains('show');
  if (show) {
    el.classList.add('show');
    btn.textContent = hideText;
    btn.classList.add('revealed');
  } else {
    el.classList.remove('show');
    btn.textContent = showText;
    btn.classList.remove('revealed');
  }
}

// Section navigation
function showSection(id) {
  document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
  document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
  document.getElementById(id)?.classList.add('active');
  document.querySelector('[data-section="' + id + '"]')?.classList.add('active');
}
document.querySelectorAll('.nav-tab').forEach(t => t.addEventListener('click', () => showSection(t.dataset.section)));

// Activity reset dispatcher
function resetActivity(sectionId) {
  const activity = activitiesData.find(a => a.id === sectionId);
  if (!activity) return;

  switch (activity.type) {
    case 'match-up':
      resetMatch(sectionId);
      break;
    case 'quiz':
      resetQuiz(sectionId);
      break;
    case 'true-false':
      resetTf(sectionId);
      break;
    case 'group-sort':
      resetSort(sectionId);
      break;
    case 'fill-blank':
    case 'gap-fill':
      resetFill(sectionId);
      break;
    case 'unjumble':
    case 'anagram':
      resetOrder(sectionId);
      break;
    case 'select':
      resetSelect(sectionId);
      break;
  }
}

// Initialize all activities from activitiesData array
document.addEventListener('DOMContentLoaded', () => {
  if (typeof activitiesData === 'undefined') return;

  activitiesData.forEach(activity => {
    switch (activity.type) {
      case 'match-up':
        initMatch(activity.id, activity.data);
        break;
      case 'quiz':
        initQuiz(activity.id, activity.data);
        break;
      case 'true-false':
        initTf(activity.id, activity.data);
        break;
      case 'group-sort':
        initSort(activity.id, activity.data);
        break;
      case 'fill-blank':
      case 'gap-fill':
        initFill(activity.id, activity.data);
        break;
      case 'unjumble':
      case 'anagram':
        initOrder(activity.id, activity.data);
        break;
      case 'select':
        initSelect(activity.id, activity.data);
        break;
    }
  });

  // Initialize vocabulary
  if (typeof initVocab === 'function') initVocab();
});


// Quiz Activity - supports multiple instances
const quizState = {};

function initQuiz(sectionId, data) {
  const c = document.getElementById(sectionId + '-container');
  if (!c || !data.questions || !data.questions.length) return;

  quizState[sectionId] = { score: 0, answered: 0, total: data.questions.length, data: data };

  c.innerHTML = '';
  data.questions.forEach((q, i) => {
    const sh = [...q.options].sort(() => Math.random() - 0.5);
    const cor = sh.indexOf(q.options[q.correctIndex]);
    const div = document.createElement('div');
    div.className = 'quiz-question';
    div.dataset.section = sectionId;
    div.innerHTML = '<h4>Q' + (i + 1) + ': ' + q.question + '</h4><div class="quiz-options">' + sh.map((o, j) => '<div class="quiz-option" data-c="' + (j === cor) + '" data-q="' + i + '" data-section="' + sectionId + '">' + o + '</div>').join('') + '</div><div class="quiz-explanation" id="' + sectionId + '-exp-' + i + '">' + (q.explanation || '') + '</div>';
    c.appendChild(div);
  });
  c.querySelectorAll('.quiz-option').forEach(o => o.addEventListener('click', handleQuiz));
}

function handleQuiz(e) {
  const opt = e.target, q = opt.closest('.quiz-question');
  const sectionId = opt.dataset.section;
  if (q.classList.contains('answered')) return;
  q.classList.add('answered');

  const state = quizState[sectionId];
  if (opt.dataset.c === 'true') {
    opt.classList.add('correct');
    state.score++;
  } else {
    opt.classList.add('wrong');
    q.querySelector('[data-c="true"]').classList.add('correct');
  }
  document.getElementById(sectionId + '-exp-' + opt.dataset.q)?.classList.add('show');
  document.getElementById(sectionId + '-score').textContent = state.score;
  state.answered++;
  if (state.answered === state.total) document.getElementById(sectionId + '-complete').classList.add('show');
}

function resetQuiz(sectionId) {
  const state = quizState[sectionId];
  if (!state) return;
  document.getElementById(sectionId + '-score').textContent = '0';
  document.getElementById(sectionId + '-complete')?.classList.remove('show');
  initQuiz(sectionId, state.data);
}


// True/False Activity - supports multiple instances
const tfState = {};

function initTf(sectionId, data) {
  const c = document.getElementById(sectionId + '-container');
  if (!c || !data.statements || !data.statements.length) return;

  tfState[sectionId] = { score: 0, answered: 0, total: data.statements.length, data: data };

  c.innerHTML = '';
  data.statements.forEach((s, i) => {
    const div = document.createElement('div');
    div.className = 'tf-statement';
    div.dataset.section = sectionId;
    div.innerHTML = '<p class="tf-text">' + s.statement + '</p>' +
      '<div class="tf-buttons">' +
      '<button class="tf-btn" data-value="true" data-idx="' + i + '" data-section="' + sectionId + '">True</button>' +
      '<button class="tf-btn" data-value="false" data-idx="' + i + '" data-section="' + sectionId + '">False</button>' +
      '</div>' +
      '<div class="tf-explanation" id="' + sectionId + '-exp-' + i + '">' + (s.explanation || '') + '</div>';
    div.dataset.correct = s.isTrue;
    c.appendChild(div);
  });
  c.querySelectorAll('.tf-btn').forEach(b => b.addEventListener('click', handleTf));
}

function handleTf(e) {
  const btn = e.target;
  const sectionId = btn.dataset.section;
  const idx = parseInt(btn.dataset.idx);
  const statement = btn.closest('.tf-statement');
  const state = tfState[sectionId];
  if (statement.classList.contains('answered')) return;

  statement.classList.add('answered');
  const correct = state.data.statements[idx].isTrue;
  const clicked = btn.dataset.value === 'true';

  if (clicked === correct) {
    btn.classList.add('correct');
    state.score++;
  } else {
    btn.classList.add('wrong');
    // Highlight the correct answer
    statement.querySelector('[data-value="' + correct + '"]').classList.add('correct');
  }

  const exp = document.getElementById(sectionId + '-exp-' + idx);
  if (exp && exp.textContent) exp.classList.add('show');

  document.getElementById(sectionId + '-score').textContent = state.score;
  state.answered++;
  if (state.answered === state.total) document.getElementById(sectionId + '-complete').classList.add('show');
}

function resetTf(sectionId) {
  const state = tfState[sectionId];
  if (!state) return;
  document.getElementById(sectionId + '-score').textContent = '0';
  document.getElementById(sectionId + '-complete')?.classList.remove('show');
  initTf(sectionId, state.data);
}


// Match Activity - supports multiple instances
const matchState = {};

function initMatch(sectionId, data) {
  const container = document.getElementById(sectionId + '-container');
  const leftCol = document.getElementById(sectionId + '-left');
  const rightCol = document.getElementById(sectionId + '-right');
  if (!container || !leftCol || !rightCol || !data.pairs || !data.pairs.length) return;

  const pairs = data.pairs;
  matchState[sectionId] = { selected: null, score: 0, matched: [], total: pairs.length, data: data };

  // Create left column items
  const shuffledLeft = pairs.map((p, i) => ({ text: p.left, idx: i })).sort(() => Math.random() - 0.5);
  leftCol.innerHTML = shuffledLeft.map(p => '<div class="match-item" data-pair="' + p.idx + '" data-section="' + sectionId + '" data-side="left">' + p.text + '</div>').join('');

  // Create right column items
  const shuffledRight = pairs.map((p, i) => ({ text: p.right, idx: i })).sort(() => Math.random() - 0.5);
  rightCol.innerHTML = shuffledRight.map(p => '<div class="match-item" data-pair="' + p.idx + '" data-section="' + sectionId + '" data-side="right">' + p.text + '</div>').join('');

  // Attach click handlers
  leftCol.querySelectorAll('.match-item').forEach(item => {
    item.addEventListener('click', () => handleMatchLeft(item));
  });
  rightCol.querySelectorAll('.match-item').forEach(item => {
    item.addEventListener('click', () => handleMatchRight(item));
  });
}

function handleMatchLeft(item) {
  const sectionId = item.dataset.section;
  const state = matchState[sectionId];
  if (item.classList.contains('matched')) return;

  const leftCol = document.getElementById(sectionId + '-left');
  leftCol.querySelectorAll('.match-item').forEach(i => i.classList.remove('selected'));
  item.classList.add('selected');
  state.selected = { el: item, pair: item.dataset.pair };
}

function handleMatchRight(item) {
  const sectionId = item.dataset.section;
  const state = matchState[sectionId];
  if (item.classList.contains('matched') || !state.selected) return;

  if (state.selected.pair === item.dataset.pair) {
    state.selected.el.classList.remove('selected');
    state.selected.el.classList.add('matched');
    item.classList.add('matched');
    state.matched.push({ left: state.selected.el, right: item });
    state.score++;
    document.getElementById(sectionId + '-score').textContent = state.score;
    drawMatchLines(sectionId);
    if (state.score === state.total) document.getElementById(sectionId + '-complete').classList.add('show');
  } else {
    item.classList.add('wrong');
    setTimeout(() => item.classList.remove('wrong'), 300);
  }
  state.selected = null;
}

function drawMatchLines(sectionId) {
  const svg = document.getElementById(sectionId + '-lines');
  const container = document.getElementById(sectionId + '-container');
  const state = matchState[sectionId];
  if (!svg || !container || !state) return;

  const r = container.getBoundingClientRect();
  svg.innerHTML = '';
  svg.setAttribute('viewBox', '0 0 ' + r.width + ' ' + r.height);
  state.matched.forEach(p => {
    const lr = p.left.getBoundingClientRect(), rr = p.right.getBoundingClientRect();
    const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
    line.setAttribute('x1', lr.right - r.left);
    line.setAttribute('y1', lr.top + lr.height / 2 - r.top);
    line.setAttribute('x2', rr.left - r.left);
    line.setAttribute('y2', rr.top + rr.height / 2 - r.top);
    line.setAttribute('stroke', '#26a269');
    line.setAttribute('stroke-width', '2');
    svg.appendChild(line);
  });
}

function resetMatch(sectionId) {
  const state = matchState[sectionId];
  if (!state) return;
  document.getElementById(sectionId + '-score').textContent = '0';
  document.getElementById(sectionId + '-complete')?.classList.remove('show');
  document.getElementById(sectionId + '-lines').innerHTML = '';
  initMatch(sectionId, state.data);
}

// Redraw lines on resize for all match activities
window.addEventListener('resize', () => {
  Object.keys(matchState).forEach(sectionId => drawMatchLines(sectionId));
});


// Sort Activity - supports multiple instances
const sortState = {};

function initSort(sectionId, data) {
  const pool = document.getElementById(sectionId + '-items');
  const groupsContainer = document.getElementById(sectionId + '-groups');
  if (!pool || !groupsContainer || !data.groups || !data.groups.length) return;

  const groups = data.groups;
  const totalItems = groups.reduce((sum, g) => sum + g.items.length, 0);
  sortState[sectionId] = { score: 0, total: totalItems, dragItem: null, data: data };

  // Create group containers
  groupsContainer.innerHTML = groups.map((g, i) =>
    '<div class="sort-group" data-group="' + i + '" data-section="' + sectionId + '"><h4>' + g.name + '</h4><div class="sort-items"></div></div>'
  ).join('');

  // Flatten and shuffle all items
  const allItems = groups.flatMap((g, gi) => g.items.map(item => ({ text: item, group: gi })));
  allItems.sort(() => Math.random() - 0.5);

  // Create draggable items
  pool.innerHTML = '';
  allItems.forEach(item => {
    const el = document.createElement('div');
    el.className = 'sort-item';
    el.textContent = item.text;
    el.draggable = true;
    el.dataset.group = item.group;
    el.dataset.section = sectionId;
    el.addEventListener('dragstart', () => {
      sortState[sectionId].dragItem = el;
      el.classList.add('dragging');
    });
    el.addEventListener('dragend', () => {
      el.classList.remove('dragging');
      sortState[sectionId].dragItem = null;
    });
    pool.appendChild(el);
  });

  // Setup drop zones
  groupsContainer.querySelectorAll('.sort-group').forEach(g => {
    g.addEventListener('dragover', e => {
      e.preventDefault();
      g.classList.add('drag-over');
    });
    g.addEventListener('dragleave', () => g.classList.remove('drag-over'));
    g.addEventListener('drop', e => handleSortDrop(e, g));
  });
}

function handleSortDrop(e, groupEl) {
  e.preventDefault();
  groupEl.classList.remove('drag-over');
  const sectionId = groupEl.dataset.section;
  const state = sortState[sectionId];
  const dragItem = state.dragItem;
  if (!dragItem) return;

  if (groupEl.dataset.group === dragItem.dataset.group) {
    dragItem.classList.add('correct');
    groupEl.querySelector('.sort-items').appendChild(dragItem);
    dragItem.draggable = false;
    state.score++;
    document.getElementById(sectionId + '-score').textContent = state.score;
    if (state.score === state.total) document.getElementById(sectionId + '-complete').classList.add('show');
  } else {
    dragItem.classList.add('wrong');
    setTimeout(() => dragItem.classList.remove('wrong'), 300);
  }
}

function resetSort(sectionId) {
  const state = sortState[sectionId];
  if (!state) return;
  document.getElementById(sectionId + '-score').textContent = '0';
  document.getElementById(sectionId + '-complete')?.classList.remove('show');
  initSort(sectionId, state.data);
}


// Fill-in Activity - supports multiple instances
const fillState = {};

function initFill(sectionId, data) {
  const c = document.getElementById(sectionId + '-container');
  if (!c || !data.items || !data.items.length) return;

  fillState[sectionId] = { score: 0, answered: 0, total: data.items.length, data: data };
  c.innerHTML = '';

  data.items.forEach((item, i) => {
    const div = document.createElement('div');
    div.className = 'fill-question';
    div.dataset.section = sectionId;

    // Generate options: correct answer + 3 distractors
    let options = [];
    if (item.options && item.options.length >= 4) {
      options = item.options;
    } else {
      // Fallback: generate distractors from other items' answers
      options = [item.answer];
      const otherAnswers = data.items
        .filter((_, idx) => idx !== i)
        .map(it => it.answer)
        .filter(a => a && a !== item.answer);

      const shuffled = otherAnswers.sort(() => Math.random() - 0.5);
      options.push(...shuffled.slice(0, 3));

      while (options.length < 4) {
        options.push('‚Äî');
      }
    }

    // Shuffle options
    const shuffledOptions = [...options].sort(() => Math.random() - 0.5);

    // Replace ___ in the sentence with a dropdown
    const sentence = (item.prompt || item.sentence || '').replace(/___/g,
      `<select class="fill-dropdown" data-idx="${i}" data-answer="${item.answer}" data-section="${sectionId}">
        <option value="" disabled selected>‚Äî</option>
        ${shuffledOptions.map(opt => `<option value="${opt}">${opt}</option>`).join('')}
      </select>`
    );

    div.innerHTML = `
      <div class="fill-sentence">
        <span class="fill-number">${i + 1}.</span>
        ${sentence}
      </div>
      <div class="fill-feedback" id="${sectionId}-fb-${i}"></div>
    `;
    c.appendChild(div);
  });

  // Event delegation for dropdown changes
  c.addEventListener('change', (e) => {
    if (e.target.classList.contains('fill-dropdown')) {
      handleFillChoice(e.target);
    }
  });
}

function handleFillChoice(dropdown) {
  const q = dropdown.closest('.fill-question');
  const sectionId = dropdown.dataset.section;
  const state = fillState[sectionId];
  if (q.classList.contains('answered')) return;

  const idx = dropdown.dataset.idx;
  const userAnswer = dropdown.value;
  const correctAnswer = dropdown.dataset.answer;
  const fb = document.getElementById(sectionId + '-fb-' + idx);

  q.classList.add('answered');
  dropdown.disabled = true;

  if (userAnswer === correctAnswer) {
    dropdown.classList.add('correct');
    fb.innerHTML = '<span class="correct-text">‚úì Correct!</span>';
    state.score++;
  } else {
    dropdown.classList.add('wrong');
    fb.innerHTML = `<span class="wrong-text">‚úó Answer: ${correctAnswer}</span>`;
  }

  document.getElementById(sectionId + '-score').textContent = state.score;
  state.answered++;
  if (state.answered === state.total) {
    document.getElementById(sectionId + '-complete').classList.add('show');
  }
}

function resetFill(sectionId) {
  const state = fillState[sectionId];
  if (!state) return;
  document.getElementById(sectionId + '-score').textContent = '0';
  document.getElementById(sectionId + '-complete')?.classList.remove('show');
  initFill(sectionId, state.data);
}


// Order/Unjumble/Anagram Activity - supports multiple instances
const orderState = {};

function initOrder(sectionId, data) {
  const c = document.getElementById(sectionId + '-container');
  if (!c || !data.items || !data.items.length) return;

  orderState[sectionId] = { score: 0, total: data.items.length, data: data };
  c.innerHTML = '';

  if (data.isAnagram) {
    initAnagram(sectionId, c, data);
  } else if (data.isUnjumble) {
    initUnjumble(sectionId, c, data);
  } else {
    initClassicOrder(sectionId, c, data);
  }
}

// UNJUMBLE: Drag-and-drop words to form sentences
function initUnjumble(sectionId, container, data) {
  data.items.forEach((item, idx) => {
    const question = document.createElement('div');
    question.className = 'unjumble-question';
    question.dataset.idx = idx;
    question.dataset.section = sectionId;

    // Shuffle words
    const shuffledWords = [...item.words].sort(() => Math.random() - 0.5);

    question.innerHTML = `
      <div class="unjumble-number">${idx + 1}.</div>
      <div class="unjumble-word-row" data-idx="${idx}" data-section="${sectionId}">
        ${shuffledWords.map((word, i) => `
          <span class="unjumble-word" draggable="true" data-word="${word}">${word}</span>
        `).join('')}
      </div>
      <div class="unjumble-actions">
        <button class="btn btn-sm btn-outline unjumble-check" data-idx="${idx}" data-section="${sectionId}">Check</button>
        <button class="btn btn-sm btn-outline unjumble-reset" data-idx="${idx}" data-section="${sectionId}">Reset</button>
      </div>
      <div class="unjumble-feedback" data-idx="${idx}" data-section="${sectionId}"></div>
    `;

    container.appendChild(question);

    // Initialize drag-and-drop for this row
    initUnjumbleDragDrop(question.querySelector('.unjumble-word-row'));
  });

  // Event delegation for buttons
  container.addEventListener('click', handleUnjumbleClick);
}

function initUnjumbleDragDrop(row) {
  let dragItem = null;

  row.querySelectorAll('.unjumble-word').forEach(word => {
    word.addEventListener('dragstart', (e) => {
      dragItem = word;
      word.classList.add('dragging');
      e.dataTransfer.effectAllowed = 'move';
    });

    word.addEventListener('dragend', () => {
      word.classList.remove('dragging');
      dragItem = null;
    });

    word.addEventListener('dragover', (e) => {
      e.preventDefault();
      if (!dragItem || dragItem === word) return;

      const rect = word.getBoundingClientRect();
      const midX = rect.left + rect.width / 2;

      if (e.clientX < midX) {
        row.insertBefore(dragItem, word);
      } else {
        row.insertBefore(dragItem, word.nextSibling);
      }
    });
  });

  // Touch support for mobile
  let touchItem = null;
  let touchClone = null;

  row.querySelectorAll('.unjumble-word').forEach(word => {
    word.addEventListener('touchstart', (e) => {
      touchItem = word;
      word.classList.add('dragging');

      // Create a clone for visual feedback
      touchClone = word.cloneNode(true);
      touchClone.classList.add('touch-clone');
      document.body.appendChild(touchClone);
      updateTouchClone(e.touches[0]);
    });

    word.addEventListener('touchmove', (e) => {
      e.preventDefault();
      if (!touchItem) return;
      updateTouchClone(e.touches[0]);

      // Find which word we're over
      const touch = e.touches[0];
      const elements = document.elementsFromPoint(touch.clientX, touch.clientY);
      const targetWord = elements.find(el => el.classList.contains('unjumble-word') && el !== touchItem);

      if (targetWord && targetWord.parentNode === row) {
        const rect = targetWord.getBoundingClientRect();
        const midX = rect.left + rect.width / 2;
        if (touch.clientX < midX) {
          row.insertBefore(touchItem, targetWord);
        } else {
          row.insertBefore(touchItem, targetWord.nextSibling);
        }
      }
    });

    word.addEventListener('touchend', () => {
      if (touchItem) touchItem.classList.remove('dragging');
      if (touchClone) touchClone.remove();
      touchItem = null;
      touchClone = null;
    });
  });

  function updateTouchClone(touch) {
    if (touchClone) {
      touchClone.style.left = (touch.clientX - 40) + 'px';
      touchClone.style.top = (touch.clientY - 20) + 'px';
    }
  }
}

function handleUnjumbleClick(e) {
  const target = e.target;

  if (target.classList.contains('unjumble-check')) {
    checkUnjumbleAnswer(target.dataset.section, parseInt(target.dataset.idx));
  }

  if (target.classList.contains('unjumble-reset')) {
    resetUnjumbleQuestion(target.dataset.section, parseInt(target.dataset.idx));
  }
}

function checkUnjumbleAnswer(sectionId, idx) {
  const state = orderState[sectionId];
  const item = state.data.items[idx];
  const row = document.querySelector(`.unjumble-word-row[data-section="${sectionId}"][data-idx="${idx}"]`);
  const feedback = document.querySelector(`.unjumble-feedback[data-section="${sectionId}"][data-idx="${idx}"]`);
  const question = document.querySelector(`.unjumble-question[data-section="${sectionId}"][data-idx="${idx}"]`);

  // Build user's answer from current word order
  const words = row.querySelectorAll('.unjumble-word');
  const userAnswer = Array.from(words).map(w => w.dataset.word).join(' ');

  // Normalize for comparison (handle punctuation)
  const normalize = (s) => s.replace(/[?!.,]/g, '').toLowerCase().trim();
  const isCorrect = normalize(userAnswer) === normalize(item.answer);

  if (isCorrect) {
    question.classList.add('answered', 'correct');
    row.classList.add('correct');
    words.forEach(w => w.setAttribute('draggable', 'false'));
    state.score++;
    document.getElementById(sectionId + '-score').textContent = state.score;

    feedback.innerHTML = `
      <span class="correct-text">‚úì Correct!</span>
      <span class="translation">${item.translation || ''}</span>
    `;
    feedback.classList.add('show');

    if (state.score === state.total) {
      document.getElementById(sectionId + '-complete').classList.add('show');
    }
  } else {
    question.classList.add('wrong');
    row.classList.add('wrong');

    feedback.innerHTML = `
      <span class="wrong-text">‚úó Try again. Hint: ${item.answer}</span>
    `;
    feedback.classList.add('show');

    setTimeout(() => {
      question.classList.remove('wrong');
      row.classList.remove('wrong');
      feedback.classList.remove('show');
    }, 2000);
  }
}

function resetUnjumbleQuestion(sectionId, idx) {
  const state = orderState[sectionId];
  const item = state.data.items[idx];
  const row = document.querySelector(`.unjumble-word-row[data-section="${sectionId}"][data-idx="${idx}"]`);
  const question = document.querySelector(`.unjumble-question[data-section="${sectionId}"][data-idx="${idx}"]`);
  const feedback = document.querySelector(`.unjumble-feedback[data-section="${sectionId}"][data-idx="${idx}"]`);

  if (question.classList.contains('correct')) return;

  // Re-shuffle and rebuild
  const shuffledWords = [...item.words].sort(() => Math.random() - 0.5);
  row.innerHTML = shuffledWords.map(word => `
    <span class="unjumble-word" draggable="true" data-word="${word}">${word}</span>
  `).join('');

  initUnjumbleDragDrop(row);

  question.classList.remove('wrong');
  row.classList.remove('wrong');
  feedback.innerHTML = '';
  feedback.classList.remove('show');
}

// ANAGRAM: Drag-and-drop letters to form a single word
function initAnagram(sectionId, container, data) {
  data.items.forEach((item, idx) => {
    const question = document.createElement('div');
    question.className = 'anagram-question';
    question.dataset.idx = idx;
    question.dataset.section = sectionId;

    // Shuffle letters
    const shuffledLetters = [...item.letters].sort(() => Math.random() - 0.5);

    question.innerHTML = `
      <div class="anagram-number">${idx + 1}.</div>
      <div class="anagram-letter-row" data-idx="${idx}" data-section="${sectionId}">
        ${shuffledLetters.map((letter, i) => `
          <span class="anagram-letter" draggable="true" data-letter="${letter}">${letter}</span>
        `).join('')}
      </div>
      <div class="anagram-actions">
        <button class="btn btn-sm btn-outline anagram-check" data-idx="${idx}" data-section="${sectionId}">Check</button>
        <button class="btn btn-sm btn-outline anagram-reset" data-idx="${idx}" data-section="${sectionId}">Reset</button>
      </div>
      <div class="anagram-feedback" data-idx="${idx}" data-section="${sectionId}"></div>
    `;

    container.appendChild(question);

    // Initialize drag-and-drop for this row
    initAnagramDragDrop(question.querySelector('.anagram-letter-row'));
  });

  // Event delegation for buttons
  container.addEventListener('click', handleAnagramClick);
}

function initAnagramDragDrop(row) {
  let dragItem = null;

  row.querySelectorAll('.anagram-letter').forEach(letter => {
    letter.addEventListener('dragstart', (e) => {
      dragItem = letter;
      letter.classList.add('dragging');
      e.dataTransfer.effectAllowed = 'move';
    });

    letter.addEventListener('dragend', () => {
      letter.classList.remove('dragging');
      dragItem = null;
    });

    letter.addEventListener('dragover', (e) => {
      e.preventDefault();
      if (!dragItem || dragItem === letter) return;

      const rect = letter.getBoundingClientRect();
      const midX = rect.left + rect.width / 2;

      if (e.clientX < midX) {
        row.insertBefore(dragItem, letter);
      } else {
        row.insertBefore(dragItem, letter.nextSibling);
      }
    });
  });

  // Touch support for mobile
  let touchItem = null;
  let touchClone = null;

  row.querySelectorAll('.anagram-letter').forEach(letter => {
    letter.addEventListener('touchstart', (e) => {
      touchItem = letter;
      letter.classList.add('dragging');

      // Create a clone for visual feedback
      touchClone = letter.cloneNode(true);
      touchClone.classList.add('touch-clone');
      document.body.appendChild(touchClone);
      updateAnagramTouchClone(e.touches[0], touchClone);
    });

    letter.addEventListener('touchmove', (e) => {
      e.preventDefault();
      if (!touchItem) return;
      updateAnagramTouchClone(e.touches[0], touchClone);

      // Find which letter we're over
      const touch = e.touches[0];
      const elements = document.elementsFromPoint(touch.clientX, touch.clientY);
      const targetLetter = elements.find(el => el.classList.contains('anagram-letter') && el !== touchItem);

      if (targetLetter && targetLetter.parentNode === row) {
        const rect = targetLetter.getBoundingClientRect();
        const midX = rect.left + rect.width / 2;
        if (touch.clientX < midX) {
          row.insertBefore(touchItem, targetLetter);
        } else {
          row.insertBefore(touchItem, targetLetter.nextSibling);
        }
      }
    });

    letter.addEventListener('touchend', () => {
      if (touchItem) touchItem.classList.remove('dragging');
      if (touchClone) touchClone.remove();
      touchItem = null;
      touchClone = null;
    });
  });

  function updateAnagramTouchClone(touch, clone) {
    if (clone) {
      clone.style.left = (touch.clientX - 20) + 'px';
      clone.style.top = (touch.clientY - 20) + 'px';
    }
  }
}

function handleAnagramClick(e) {
  const target = e.target;

  if (target.classList.contains('anagram-check')) {
    checkAnagramAnswer(target.dataset.section, parseInt(target.dataset.idx));
  }

  if (target.classList.contains('anagram-reset')) {
    resetAnagramQuestion(target.dataset.section, parseInt(target.dataset.idx));
  }
}

function checkAnagramAnswer(sectionId, idx) {
  const state = orderState[sectionId];
  const item = state.data.items[idx];
  const row = document.querySelector(`.anagram-letter-row[data-section="${sectionId}"][data-idx="${idx}"]`);
  const feedback = document.querySelector(`.anagram-feedback[data-section="${sectionId}"][data-idx="${idx}"]`);
  const question = document.querySelector(`.anagram-question[data-section="${sectionId}"][data-idx="${idx}"]`);

  // Build user's answer from current letter order
  const letters = row.querySelectorAll('.anagram-letter');
  const userAnswer = Array.from(letters).map(l => l.dataset.letter).join('');

  // Compare with correct answer
  const isCorrect = userAnswer.toLowerCase() === item.answer.toLowerCase();

  if (isCorrect) {
    question.classList.add('answered', 'correct');
    row.classList.add('correct');
    letters.forEach(l => l.setAttribute('draggable', 'false'));
    state.score++;
    document.getElementById(sectionId + '-score').textContent = state.score;

    feedback.innerHTML = `
      <span class="correct-text">‚úì Correct!</span>
      <span class="translation">${item.translation || ''}</span>
    `;
    feedback.classList.add('show');

    if (state.score === state.total) {
      document.getElementById(sectionId + '-complete').classList.add('show');
    }
  } else {
    question.classList.add('wrong');
    row.classList.add('wrong');

    feedback.innerHTML = `
      <span class="wrong-text">‚úó Try again. Hint: ${item.answer}</span>
    `;
    feedback.classList.add('show');

    setTimeout(() => {
      question.classList.remove('wrong');
      row.classList.remove('wrong');
      feedback.classList.remove('show');
    }, 2000);
  }
}

function resetAnagramQuestion(sectionId, idx) {
  const state = orderState[sectionId];
  const item = state.data.items[idx];
  const row = document.querySelector(`.anagram-letter-row[data-section="${sectionId}"][data-idx="${idx}"]`);
  const question = document.querySelector(`.anagram-question[data-section="${sectionId}"][data-idx="${idx}"]`);
  const feedback = document.querySelector(`.anagram-feedback[data-section="${sectionId}"][data-idx="${idx}"]`);

  if (question.classList.contains('correct')) return;

  // Re-shuffle and rebuild
  const shuffledLetters = [...item.letters].sort(() => Math.random() - 0.5);
  row.innerHTML = shuffledLetters.map(letter => `
    <span class="anagram-letter" draggable="true" data-letter="${letter}">${letter}</span>
  `).join('');

  initAnagramDragDrop(row);

  question.classList.remove('wrong');
  row.classList.remove('wrong');
  feedback.innerHTML = '';
  feedback.classList.remove('show');
}

// CLASSIC ORDER: Drag items into correct sequence
function initClassicOrder(sectionId, container, data) {
  const state = orderState[sectionId];

  // Create array with original indices, then shuffle
  const items = [...data.items].map((item, idx) => ({ text: item, origIdx: idx }));
  // Fisher-Yates shuffle
  for (let i = items.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [items[i], items[j]] = [items[j], items[i]];
  }

  // Create container div for all items
  const wrapper = document.createElement('div');
  wrapper.className = 'order-items-wrapper';
  wrapper.dataset.section = sectionId;

  // Create each sentence as a draggable item
  items.forEach((item, i) => {
    const div = document.createElement('div');
    div.className = 'order-sentence-card';
    div.draggable = true;
    div.dataset.orig = item.origIdx;
    div.dataset.section = sectionId;
    div.innerHTML = '<span class="order-card-num">' + (i + 1) + '</span><span class="order-card-text">' + item.text + '</span>';
    wrapper.appendChild(div);
  });

  container.appendChild(wrapper);

  // Add buttons
  const btnDiv = document.createElement('div');
  btnDiv.className = 'order-buttons';
  btnDiv.innerHTML = '<button class="btn btn-outline order-check-btn" data-section="' + sectionId + '">Check Order</button>';
  container.appendChild(btnDiv);

  // Add feedback area
  const feedback = document.createElement('div');
  feedback.className = 'order-feedback';
  feedback.dataset.section = sectionId;
  container.appendChild(feedback);

  // Initialize drag-and-drop
  initOrderCardDragDrop(wrapper);

  // Button click handler
  btnDiv.querySelector('.order-check-btn').onclick = function() { checkOrder(sectionId); };
}

function initOrderCardDragDrop(wrapper) {
  let dragItem = null;

  wrapper.querySelectorAll('.order-sentence-card').forEach(function(card) {
    card.addEventListener('dragstart', function(e) {
      dragItem = card;
      card.classList.add('dragging');
      e.dataTransfer.effectAllowed = 'move';
    });

    card.addEventListener('dragend', function() {
      card.classList.remove('dragging');
      dragItem = null;
      updateCardNumbers(wrapper);
    });

    card.addEventListener('dragover', function(e) {
      e.preventDefault();
      if (!dragItem || dragItem === card) return;
      const rect = card.getBoundingClientRect();
      const midY = rect.top + rect.height / 2;
      if (e.clientY < midY) {
        wrapper.insertBefore(dragItem, card);
      } else {
        wrapper.insertBefore(dragItem, card.nextSibling);
      }
    });
  });

  // Touch support
  let touchItem = null;
  let touchClone = null;

  wrapper.querySelectorAll('.order-sentence-card').forEach(function(card) {
    card.addEventListener('touchstart', function(e) {
      touchItem = card;
      card.classList.add('dragging');
      touchClone = card.cloneNode(true);
      touchClone.style.position = 'fixed';
      touchClone.style.zIndex = '1000';
      touchClone.style.pointerEvents = 'none';
      touchClone.style.opacity = '0.8';
      touchClone.style.maxWidth = '90vw';
      document.body.appendChild(touchClone);
      moveTouchClone(e.touches[0]);
    });

    card.addEventListener('touchmove', function(e) {
      e.preventDefault();
      if (!touchItem) return;
      moveTouchClone(e.touches[0]);
      const touch = e.touches[0];
      const els = document.elementsFromPoint(touch.clientX, touch.clientY);
      const target = els.find(function(el) { return el.classList.contains('order-sentence-card') && el !== touchItem; });
      if (target && target.parentNode === wrapper) {
        const rect = target.getBoundingClientRect();
        const midY = rect.top + rect.height / 2;
        if (touch.clientY < midY) {
          wrapper.insertBefore(touchItem, target);
        } else {
          wrapper.insertBefore(touchItem, target.nextSibling);
        }
      }
    });

    card.addEventListener('touchend', function() {
      if (touchItem) touchItem.classList.remove('dragging');
      if (touchClone) touchClone.remove();
      touchItem = null;
      touchClone = null;
      updateCardNumbers(wrapper);
    });
  });

  function moveTouchClone(touch) {
    if (touchClone) {
      touchClone.style.left = (touch.clientX - 100) + 'px';
      touchClone.style.top = (touch.clientY - 25) + 'px';
    }
  }
}

function updateCardNumbers(wrapper) {
  wrapper.querySelectorAll('.order-sentence-card').forEach(function(card, i) {
    card.querySelector('.order-card-num').textContent = i + 1;
  });
}

function initOrderSentenceDragDrop(row) {
  let dragItem = null;

  row.querySelectorAll('.order-sentence-item').forEach(item => {
    item.addEventListener('dragstart', (e) => {
      dragItem = item;
      item.classList.add('dragging');
      e.dataTransfer.effectAllowed = 'move';
    });

    item.addEventListener('dragend', () => {
      item.classList.remove('dragging');
      dragItem = null;
      // Update numbers after drag
      updateOrderNumbers(row);
    });

    item.addEventListener('dragover', (e) => {
      e.preventDefault();
      if (!dragItem || dragItem === item) return;

      const rect = item.getBoundingClientRect();
      const midY = rect.top + rect.height / 2;

      if (e.clientY < midY) {
        row.insertBefore(dragItem, item);
      } else {
        row.insertBefore(dragItem, item.nextSibling);
      }
    });
  });

  // Touch support
  let touchItem = null;
  let touchClone = null;

  row.querySelectorAll('.order-sentence-item').forEach(item => {
    item.addEventListener('touchstart', (e) => {
      touchItem = item;
      item.classList.add('dragging');
      touchClone = item.cloneNode(true);
      touchClone.classList.add('touch-clone');
      document.body.appendChild(touchClone);
      updateTouchClonePos(e.touches[0], touchClone);
    });

    item.addEventListener('touchmove', (e) => {
      e.preventDefault();
      if (!touchItem) return;
      updateTouchClonePos(e.touches[0], touchClone);

      const touch = e.touches[0];
      const elements = document.elementsFromPoint(touch.clientX, touch.clientY);
      const target = elements.find(el => el.classList.contains('order-sentence-item') && el !== touchItem);

      if (target && target.parentNode === row) {
        const rect = target.getBoundingClientRect();
        const midY = rect.top + rect.height / 2;
        if (touch.clientY < midY) {
          row.insertBefore(touchItem, target);
        } else {
          row.insertBefore(touchItem, target.nextSibling);
        }
      }
    });

    item.addEventListener('touchend', () => {
      if (touchItem) touchItem.classList.remove('dragging');
      if (touchClone) touchClone.remove();
      touchItem = null;
      touchClone = null;
      updateOrderNumbers(row);
    });
  });

  function updateTouchClonePos(touch, clone) {
    if (clone) {
      clone.style.left = (touch.clientX - 100) + 'px';
      clone.style.top = (touch.clientY - 20) + 'px';
    }
  }
}

function updateOrderNumbers(row) {
  row.querySelectorAll('.order-sentence-item').forEach((item, i) => {
    item.querySelector('.order-num').textContent = i + 1;
  });
}

function initDragDrop(container) {
  const items = container.querySelectorAll('.order-item');
  let dragItem = null;

  items.forEach(item => {
    item.addEventListener('dragstart', (e) => {
      dragItem = item;
      item.classList.add('dragging');
    });

    item.addEventListener('dragend', () => {
      item.classList.remove('dragging');
      dragItem = null;
    });

    item.addEventListener('dragover', (e) => {
      e.preventDefault();
      if (!dragItem || dragItem === item) return;
      const rect = item.getBoundingClientRect();
      const midY = rect.top + rect.height / 2;
      if (e.clientY < midY) {
        container.insertBefore(dragItem, item);
      } else {
        container.insertBefore(dragItem, item.nextSibling);
      }
    });
  });
}

function checkOrder(sectionId) {
  const state = orderState[sectionId];
  const data = state.data;
  // Support multiple class names for order items
  let items = document.querySelectorAll('.order-sentence-card[data-section="' + sectionId + '"]');
  if (!items.length) {
    items = document.querySelectorAll('.order-sentence-item[data-section="' + sectionId + '"]');
  }
  if (!items.length) {
    items = document.querySelectorAll('.order-item[data-section="' + sectionId + '"]');
  }
  const currentOrder = Array.from(items).map(function(item) { return parseInt(item.dataset.orig); });
  const feedback = document.querySelector('.order-feedback[data-section="' + sectionId + '"]');

  let correct = true;
  currentOrder.forEach((val, idx) => {
    const expectedIdx = data.correctOrder && data.correctOrder.length ? data.correctOrder[idx] : idx;
    if (val !== expectedIdx) correct = false;
  });

  items.forEach((item, idx) => {
    const expectedIdx = data.correctOrder && data.correctOrder.length ? data.correctOrder[idx] : idx;
    if (parseInt(item.dataset.orig) === expectedIdx) {
      item.classList.add('correct');
      item.classList.remove('wrong');
    } else {
      item.classList.add('wrong');
      item.classList.remove('correct');
    }
  });

  if (correct) {
    state.score = state.total;
    document.getElementById(sectionId + '-score').textContent = state.score;
    document.getElementById(sectionId + '-complete').classList.add('show');
    if (feedback) {
      feedback.innerHTML = '<span class="correct-text">‚úì Perfect order!</span>';
      feedback.classList.add('show');
    }
  } else {
    if (feedback) {
      feedback.innerHTML = '<span class="wrong-text">‚úó Not quite right. Try again!</span>';
      feedback.classList.add('show');
    }
    setTimeout(function() {
      items.forEach(function(item) { item.classList.remove('wrong'); });
      if (feedback) feedback.classList.remove('show');
    }, 2000);
  }
}

function resetOrder(sectionId) {
  const state = orderState[sectionId];
  if (!state) return;
  document.getElementById(sectionId + '-score').textContent = '0';
  document.getElementById(sectionId + '-complete')?.classList.remove('show');
  initOrder(sectionId, state.data);
}


// Select Activity - supports multiple instances
const selectState = {};

function initSelect(sectionId, data) {
  const c = document.getElementById(sectionId + '-container');
  if (!c || !data.items || !data.items.length) return;

  selectState[sectionId] = { score: 0, answered: 0, total: data.items.length, data: data };
  c.innerHTML = '';

  data.items.forEach((item, idx) => {
    const div = document.createElement('div');
    div.className = 'select-question';
    div.dataset.section = sectionId;
    div.dataset.idx = idx;

    const optionsHtml = item.options.map((opt, oi) =>
      `<label class="select-option" data-correct="${opt.correct}" data-section="${sectionId}" data-idx="${idx}">
        <input type="checkbox" class="select-checkbox" data-oi="${oi}">
        <span class="select-text">${opt.text}</span>
      </label>`
    ).join('');

    div.innerHTML = `
      <div class="select-number">${idx + 1}.</div>
      <div class="select-content">
        <p class="select-prompt">${item.question}</p>
        <div class="select-options">${optionsHtml}</div>
        <button class="btn btn-sm btn-outline select-check" data-section="${sectionId}" data-idx="${idx}">Check</button>
        <div class="select-feedback" id="${sectionId}-fb-${idx}"></div>
      </div>
    `;
    c.appendChild(div);
  });

  // Event delegation for check buttons
  c.addEventListener('click', (e) => {
    if (e.target.classList.contains('select-check')) {
      checkSelectAnswer(e.target.dataset.section, parseInt(e.target.dataset.idx));
    }
  });
}

function checkSelectAnswer(sectionId, idx) {
  const state = selectState[sectionId];
  const item = state.data.items[idx];
  const question = document.querySelector(`.select-question[data-section="${sectionId}"][data-idx="${idx}"]`);
  const fb = document.getElementById(sectionId + '-fb-' + idx);

  if (question.classList.contains('answered')) return;

  const options = question.querySelectorAll('.select-option');
  let allCorrect = true;

  options.forEach(opt => {
    const checkbox = opt.querySelector('.select-checkbox');
    const isChecked = checkbox.checked;
    const shouldBeChecked = opt.dataset.correct === 'true';

    if (isChecked === shouldBeChecked) {
      opt.classList.add(shouldBeChecked ? 'correct' : 'correct-unchecked');
    } else {
      opt.classList.add(shouldBeChecked ? 'missed' : 'wrong');
      allCorrect = false;
    }
    checkbox.disabled = true;
  });

  question.classList.add('answered');

  if (allCorrect) {
    fb.innerHTML = '<span class="correct-text">‚úì Perfect!</span>';
    state.score++;
  } else {
    fb.innerHTML = '<span class="wrong-text">‚úó Some answers were incorrect.</span>';
  }
  fb.classList.add('show');

  document.getElementById(sectionId + '-score').textContent = state.score;
  state.answered++;

  if (state.answered === state.total) {
    document.getElementById(sectionId + '-complete').classList.add('show');
  }
}

function resetSelect(sectionId) {
  const state = selectState[sectionId];
  if (!state) return;
  document.getElementById(sectionId + '-score').textContent = '0';
  document.getElementById(sectionId + '-complete')?.classList.remove('show');
  initSelect(sectionId, state.data);
}


// Error-Correction Activity
// Two-step interaction: 1) Click wrong word, 2) Select correct form
const errorState = {};

function initErrorCorrection(sectionId, data) {
  const c = document.getElementById(sectionId + '-container');
  if (!c || !data.items || !data.items.length) return;

  errorState[sectionId] = {
    score: 0,
    completed: 0,
    total: data.items.length,
    data: data
  };
  c.innerHTML = '';

  data.items.forEach((item, i) => {
    const div = document.createElement('div');
    div.className = 'error-item';
    div.dataset.section = sectionId;
    div.dataset.idx = i;

    // Parse sentence into clickable words
    const words = item.sentence.split(/(\s+)/);
    const wordsHtml = words.map((word, wi) => {
      if (/^\s+$/.test(word)) return word; // preserve whitespace
      const isError = item.errorWord && word.replace(/[.,!?;:]/g, '') === item.errorWord;
      return `<span class="error-word" data-word="${word.replace(/[.,!?;:]/g, '')}" data-is-error="${isError}">${word}</span>`;
    }).join('');

    const hasNoError = item.errorWord === null;

    div.innerHTML = `
      <div class="error-sentence" id="${sectionId}-sentence-${i}">
        <span class="error-number">${i + 1}.</span>
        <span class="error-words">${wordsHtml}</span>
        ${hasNoError ? '' : ''}
      </div>
      <div class="error-no-error-btn" id="${sectionId}-noerror-${i}">
        <button class="btn btn-outline btn-sm" onclick="handleNoError('${sectionId}', ${i})">No error</button>
      </div>
      <div class="error-options" id="${sectionId}-options-${i}" style="display:none;">
        <span class="error-prompt">Choose the correct form:</span>
        <div class="error-option-btns">
          ${(item.options || []).map(opt =>
            `<button class="btn btn-outline btn-sm error-option"
                     data-option="${opt}"
                     data-correct="${opt === item.correctForm}"
                     onclick="handleErrorOption('${sectionId}', ${i}, '${opt}', ${opt === item.correctForm})">${opt}</button>`
          ).join('')}
        </div>
      </div>
      <div class="error-feedback" id="${sectionId}-fb-${i}" style="display:none;"></div>
    `;

    c.appendChild(div);
  });

  // Event delegation for word clicks
  c.addEventListener('click', (e) => {
    const wordEl = e.target.closest('.error-word');
    if (wordEl && !wordEl.closest('.error-item').classList.contains('completed')) {
      const item = wordEl.closest('.error-item');
      handleWordClick(item.dataset.section, parseInt(item.dataset.idx), wordEl);
    }
  });
}

function handleWordClick(sectionId, idx, wordEl) {
  const state = errorState[sectionId];
  const item = state.data.items[idx];
  const itemEl = document.querySelector(`.error-item[data-section="${sectionId}"][data-idx="${idx}"]`);

  if (itemEl.classList.contains('step2') || itemEl.classList.contains('completed')) return;

  // Clear previous selection in this item
  itemEl.querySelectorAll('.error-word.selected').forEach(w => w.classList.remove('selected'));

  const clickedWord = wordEl.dataset.word;
  const isError = wordEl.dataset.isError === 'true';

  if (isError) {
    // Correct identification! Move to step 2
    wordEl.classList.add('selected', 'found');
    itemEl.classList.add('step2');
    state.score++;
    document.getElementById(sectionId + '-score').textContent = state.score;

    // Hide no-error button, show options
    document.getElementById(`${sectionId}-noerror-${idx}`).style.display = 'none';
    document.getElementById(`${sectionId}-options-${idx}`).style.display = 'block';
  } else {
    // Wrong word selected
    wordEl.classList.add('selected', 'wrong-selection');
    setTimeout(() => wordEl.classList.remove('selected', 'wrong-selection'), 500);
  }
}

function handleNoError(sectionId, idx) {
  const state = errorState[sectionId];
  const item = state.data.items[idx];
  const itemEl = document.querySelector(`.error-item[data-section="${sectionId}"][data-idx="${idx}"]`);
  const fb = document.getElementById(`${sectionId}-fb-${idx}`);

  if (itemEl.classList.contains('completed')) return;

  itemEl.classList.add('completed');
  document.getElementById(`${sectionId}-noerror-${idx}`).style.display = 'none';

  if (item.errorWord === null) {
    // Correct! No error in this sentence
    state.score += 2; // Full points for no-error items
    fb.innerHTML = `<span class="correct-text">Correct! No error in this sentence.</span>`;
    if (item.explanation) {
      fb.innerHTML += `<div class="error-explanation">${item.explanation}</div>`;
    }
  } else {
    // Wrong - there was an error
    fb.innerHTML = `<span class="wrong-text">There was an error: <strong>${item.errorWord}</strong> ‚Üí <strong>${item.correctForm}</strong></span>`;
    if (item.explanation) {
      fb.innerHTML += `<div class="error-explanation">${item.explanation}</div>`;
    }
  }

  fb.style.display = 'block';
  document.getElementById(sectionId + '-score').textContent = state.score;

  state.completed++;
  checkComplete(sectionId);
}

function handleErrorOption(sectionId, idx, option, isCorrect) {
  const state = errorState[sectionId];
  const item = state.data.items[idx];
  const itemEl = document.querySelector(`.error-item[data-section="${sectionId}"][data-idx="${idx}"]`);
  const fb = document.getElementById(`${sectionId}-fb-${idx}`);
  const optionsEl = document.getElementById(`${sectionId}-options-${idx}`);

  if (itemEl.classList.contains('completed')) return;

  itemEl.classList.add('completed');

  // Highlight correct/wrong options
  optionsEl.querySelectorAll('.error-option').forEach(btn => {
    btn.disabled = true;
    if (btn.dataset.correct === 'true') {
      btn.classList.add('correct');
    } else if (btn.dataset.option === option && !isCorrect) {
      btn.classList.add('wrong');
    }
  });

  if (isCorrect) {
    state.score++;
    fb.innerHTML = `<span class="correct-text">Correct!</span>`;
  } else {
    fb.innerHTML = `<span class="wrong-text">The correct form is: <strong>${item.correctForm}</strong></span>`;
  }

  if (item.explanation) {
    fb.innerHTML += `<div class="error-explanation">${item.explanation}</div>`;
  }

  fb.style.display = 'block';
  document.getElementById(sectionId + '-score').textContent = state.score;

  state.completed++;
  checkComplete(sectionId);
}

function checkComplete(sectionId) {
  const state = errorState[sectionId];
  if (state.completed === state.total) {
    document.getElementById(sectionId + '-complete').classList.add('show');
  }
}

function resetErrorCorrection(sectionId) {
  const state = errorState[sectionId];
  if (!state) return;
  document.getElementById(sectionId + '-score').textContent = '0';
  document.getElementById(sectionId + '-complete')?.classList.remove('show');
  initErrorCorrection(sectionId, state.data);
}


// Vocabulary
function initVocab() {
  const grid = document.getElementById('vocab-grid');
  if (!grid) return;
  grid.innerHTML = '';
  vocabData.forEach(v => {
    const card = document.createElement('div');
    card.className = 'vocab-card';
    card.innerHTML = '<div class="uk">' + v.uk + '</div><div class="translit">' + v.translit + '</div><div class="en">' + v.en + '</div>' + (v.note ? '<div class="note">' + v.note + '</div>' : '');
    grid.appendChild(card);
  });
}

  </script>
</body>
</html>