{"body":"## Problem\n\nVocabulary sections in A2 modules 48-57 are incomplete:\n\n```\nM48 (work-professions):     11/30  (36%)\nM49 (technology-media):     24/30  (80%)\nM50 (hobbies-leisure):      18/30  (60%)\nM51 (education-learning):   18/30  (60%)\nM52 (shopping-services):     8/30  (26%)\nM53 (sports-fitness):       24/30  (80%)\nM54 (health-body):           4/30  (13%) ‚Üê worst\nM56 (grammar-review):        3/10  (30%)\nM57 (final-review):          8/10  (80%)\n```\n\n**Root cause:** Modules were created but vocabulary sections were never fully populated. Frontmatter `vocab_count` is not enforced by audit.\n\n**Current system:**\n- Vocabulary sections are manually written\n- `vocab:rebuild` only syncs existing vocabulary tables ‚Üí database\n- No extraction from actual content usage\n\n## Proposed Solution\n\n**Content-driven vocabulary extraction** instead of plan-driven:\n\n1. **Reset vocabulary.db** - start fresh\n2. **Extract vocabulary from content** - scan all modules sequentially\n3. **Track first appearance** - each word recorded with first module that uses it\n4. **Auto-generate vocabulary tables** - populate modules with words they introduce\n5. **Soft targets** - make `vocab_count` a warning, not error (catch up in checkpoint modules)\n\n### Why This Works\n\n‚úÖ **Content is already written** - A1/A2/B1 are complete with rich vocabulary usage\n‚úÖ **Immersion guarantees coverage** - B1/B2/C1/C2 are 100% immersed with diverse topics\n‚úÖ **Checkpoint modules as safety net** - vocab-focused modules review and expand\n‚úÖ **Pedagogically sound** - first-appearance tracking is gold for learning\n\n## Implementation Plan\n\n### Script 1: `scripts/rebuild_vocab_from_content.py`\n\n```python\nFor each module in order (A1-01, A1-02, ..., C2-100):\n  1. Extract all Ukrainian words from:\n     ‚úÖ Presentation, Practice, Summary sections\n     ‚úÖ Activities (all types)\n     ‚ùå Skip: Frontmatter, existing Vocabulary section\n  \n  2. Filter out:\n     - COMMON_WORDS (—ñ, –≤, –Ω–∞, —â–æ, etc.) from audit config\n     - Words already in DB (from previous modules)\n  \n  3. For each NEW word:\n     - Infer POS from word ending (use fix_vocab_tables.py logic)\n     - Infer Gender (if noun: m/f/n)\n     - Leave IPA blank (fill later with Gemini)\n     - Leave English blank (fill later with Gemini)\n     - Save to DB: {word, level, module_num, pos, gender, first_appearance}\n  \n  4. Generate vocabulary table for module (see format below)\n  \n  5. Replace module's Vocabulary section with generated table\n  \n  6. Update frontmatter: vocab_count = actual count\n```\n\n### Vocabulary Table Formats\n\n**A1/A2 (6 columns, English headers):**\n```markdown\n| Word | IPA | English | POS | Gender | Note |\n|------|-----|---------|-----|--------|------|\n| –≥–æ–ª–æ–≤–∞ | /holoÀàva/ | head | noun | f | body part |\n| –ª—ñ–∫–∞—Ä | /liÀàkar/ | doctor | noun | m | profession |\n| —Ö–≤–æ—Ä—ñ—Ç–∏ | /xwoÀàr ≤it…™/ | to be sick | verb | - | - |\n```\n\n**B1+ (6 columns, Ukrainian headers, English translations):**\n```markdown\n| –°–ª–æ–≤–æ | –í–∏–º–æ–≤–∞ | –ü–µ—Ä–µ–∫–ª–∞–¥ | –ß–ú | –†—ñ–¥ | –ü—Ä–∏–º—ñ—Ç–∫–∞ |\n|-------|--------|----------|-----|-----|----------|\n| –≥–æ–ª–æ–≤–∞ | /holoÀàva/ | head | —ñ–º. | –∂ | —á–∞—Å—Ç–∏–Ω–∞ —Ç—ñ–ª–∞ |\n| –ª—ñ–∫–∞—Ä | /liÀàkar/ | doctor | —ñ–º. | —á | –ø—Ä–æ—Ñ–µ—Å—ñ—è |\n| —Ö–≤–æ—Ä—ñ—Ç–∏ | /xwoÀàr ≤it…™/ | to be sick | –¥—ñ—î—Å–ª. | - | - |\n```\n\n**Key differences:**\n- A1/A2: English column headers (scaffolded)\n- B1+: Ukrainian column headers (immersed), but English translation content\n- Both: 6 columns for complete linguistic information\n- Gender column: **–∂** (–∂—ñ–Ω–æ—á–∏–π/f), **—á** (—á–æ–ª–æ–≤—ñ—á–∏–π/m), **—Å** (—Å–µ—Ä–µ–¥–Ω—ñ–π/n), **-** (not applicable)\n- POS abbreviations (B1+): **—ñ–º.** (—ñ–º–µ–Ω–Ω–∏–∫/noun), **–¥—ñ—î—Å–ª.** (–¥—ñ—î—Å–ª–æ–≤–æ/verb), **–ø—Ä–∏–∫–º.** (–ø—Ä–∏–∫–º–µ—Ç–Ω–∏–∫/adj), etc.\n\n### Script 2: `scripts/enrich_vocab_with_gemini.py` (later)\n\nBatch-process all vocabulary entries with blank IPA/English using Gemini API.\n\n### Audit Adjustment\n\nChange vocabulary gate from ERROR to WARNING for all levels:\n- Current: `vocab_count` is breaking for B1+\n- New: `vocab_count` is soft target for all levels (A1-C2)\n- Rationale: Content naturally covers vocabulary, checkpoints catch gaps\n\n## Questions\n\n1. **Common words filter**: Use existing `COMMON_WORDS` from `scripts/audit/config.py`? ‚úÖ YES\n2. **Content scope**: Extract from all sections including activities? ‚úÖ YES\n3. **IPA generation**: Leave blank, fill with Gemini later? ‚úÖ YES\n4. **Table format**: 6 columns for all levels (A1/A2 English headers, B1+ Ukrainian headers)? ‚úÖ YES\n5. **Audit level**: Make soft target for all levels? ‚úÖ YES (A1-C2)\n\n## Files to Modify\n\n- `scripts/rebuild_vocab_from_content.py` (new)\n- `scripts/enrich_vocab_with_gemini.py` (new, later)\n- `scripts/audit/checks/vocabulary.py` (make vocab_count non-blocking)\n- `curriculum/l2-uk-en/a2/*.md` (modules 48-57, auto-updated)\n- `curriculum/l2-uk-en/b1/*.md` (update to 6-column format if currently 5)\n\n## Success Criteria\n\n- [ ] All A2 modules 48-57 have complete vocabulary sections\n- [ ] All levels use 6-column format (A1/A2 English headers, B1+ Ukrainian headers)\n- [ ] vocabulary.db contains all words with first_appearance tracking\n- [ ] Audit passes with soft vocab_count targets\n- [ ] Landing pages show correct vocabulary counts\n\n## Related\n\n- Issue #339 (C1 curriculum expansion)\n- `docs/l2-uk-en/MODULE-RICHNESS-GUIDELINES-v2.md` (vocabulary requirements)","comments":[{"id":"IC_kwDOQsud787cs2aR","author":{"login":"github-actions"},"authorAssociation":"NONE","body":"ü§ñ Hi @krisztiankoos, I've received your request, and I'm working on it now! You can track my progress [in the logs](https://github.com/learn-ukrainian/learn-ukrainian.github.io/actions/runs/20625633351) for more details.","createdAt":"2025-12-31T19:17:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/learn-ukrainian/learn-ukrainian.github.io/issues/340#issuecomment-3702744721","viewerDidAuthor":false},{"id":"IC_kwDOQsud787cs2oX","author":{"login":"github-actions"},"authorAssociation":"NONE","body":"ü§ñ I'm sorry @krisztiankoos, but I was unable to process your request. Please [see the logs](https://github.com/learn-ukrainian/learn-ukrainian.github.io/actions/runs/20625633351) for more details.","createdAt":"2025-12-31T19:18:43Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/learn-ukrainian/learn-ukrainian.github.io/issues/340#issuecomment-3702745623","viewerDidAuthor":false}],"title":"Rebuild vocabulary database from actual content usage"}
