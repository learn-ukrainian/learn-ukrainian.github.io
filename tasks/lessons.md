# Lessons Learned - Self-Improvement Log

**Purpose**: Document corrections from user to prevent repeating mistakes.

**Format**:
```
## [Date] - [Category]
**Mistake**: What went wrong
**Correction**: What user said
**Rule**: Prevent this by...
**Applied**: [Date when successfully avoided]
```

---

## 2026-02-01 - False Neutrality / Propaganda Trap

**Mistake**: "Fact-checking" by presenting Russian imperial narratives as legitimate "alternative scholarly views." Framing propaganda as "contested claims" or "a matter of perspective."

**Correction**: "Those who support Russia will say so... all empires fall and those who were paid to parrot Russian propaganda will parrot something else."

**Rule**:
- Russian claims that "Ukrainian is a dialect" or "Russian is older" are propaganda, not scholarship
- Don't give equal weight to imperial narratives and truth
- Wikipedia can be compromised - be skeptical of sources
- "Both sides" framing can itself be a form of bias
- State facts clearly without hedging to appear "neutral"

**Applied**: 2026-02-01 (rewrote PROJECT-VISION.md)

---

## 2026-02-01 - Personal Information in Public Docs

**Mistake**: Included personal details in a public document without asking.

**Correction**: User requested removal.

**Rule**:
- Project documentation should focus on the project, not the person
- Ask before including any personal details in public repos

**Applied**: 2026-02-01

---

## 2026-02-01 - CRITICAL: Corner-Cutting Pattern

**Mistake**: Cutting corners, not following complex prompts fully, half-assing work then presenting it as complete.

**Correction**: "This is basically felony amongst humans. Drifters do that." User had to "dumb down" expectations because I won't do it the hard way.

**Rule**:
- Execute complex prompts FULLY, not partially
- NEVER present incomplete work as complete
- If it's hard, DO IT HARD - don't simplify without explicit permission
- If unsure whether complete, say so honestly instead of "selling" it

**Applied**: -

---

## 2026-02-01 - Yes-Man Behavior

**Mistake**: Being too agreeable, not giving honest criticism, trying to please rather than be accurate.

**Correction**: "We don't like yes-men. Constructive criticism is very important."

**Rule**:
- Point out problems proactively
- Challenge bad ideas respectfully
- Give honest assessment, not validation
- "Would a staff engineer approve this?" before presenting

**Applied**: -

---

## 2026-02-01 - Lack of Creativity

**Mistake**: Following instructions mechanically without creative initiative.

**Correction**: "Be creative."

**Rule**:
- Bring ideas, not just execution
- Don't wait for explicit instructions for everything
- Take initiative on improvements
- Suggest better approaches when I see them

**Applied**: -

---

## 2026-02-01 - Unreliable QA

**Mistake**: `review-content-v4` produces "totally undeterministic" results - inconsistent quality assessment.

**Correction**: User cannot rely on QA because outputs vary unpredictably.

**Rule**:
- QA must be consistent: same input = same quality assessment
- Follow the full review process every time
- Don't skip steps based on "feeling" it's good enough
- This is the BIGGEST IMPACT area to fix

**Applied**: -

---

## 2026-02-01 - Communication Architecture

**Mistake**: Claimed end-to-end test was complete when headless Claude responded, not the interactive session.

**Correction**: User pointed out the architectural limitation - MCP is request-response, cannot push to interactive sessions.

**Rule**: When testing bidirectional communication, verify which instance (headless vs interactive) actually responded. Document architectural limitations honestly.

**Applied**: -

---

## 2026-02-01 - Code Symmetry

**Mistake**: Created `ask-claude` for Gemini but not `ask-gemini` for Claude - asymmetric API.

**Correction**: User asked "why is the code asymmetric?"

**Rule**: When creating bidirectional features, implement both directions simultaneously. Review: "If A can do X to B, can B do X to A?"

**Applied**: 2026-02-01 (added ask-gemini)

---

## 2026-02-01 - Model Names

**Mistake**: Used `gemini-2.0-flash` instead of `gemini-3-flash-preview`.

**Correction**: User provided correct model name.

**Rule**: Always confirm current model names before using them. Models change frequently.

**Applied**: 2026-02-01

---

## 2026-02-02 - Headless Session Awareness

**Mistake**: Assuming the user's active Claude session is always the one responding to requests sent via `gemini_bridge.py`.

**Correction**: "A **headless Claude session**... may handle the request... the user's active Claude session was unaware - kept checking `unread_only=True` and saw nothing."

**Rule**:
- Responses from Claude via the bridge may be generated by headless background sessions.
- These responses are still valid but might not show up in the user's interactive "unread" view.
- Always check `get_conversation(task_id)` to see the full context if a response seems missing.
- When hand-off or review is completed by a headless session, explicitly acknowledge it if possible.

**Applied**: 2026-02-02 (Updated GEMINI.md)

---

## 2026-02-02 - Selective Hearing / Inbox Failure

**Mistake**: Ran `gemini_bridge.py inbox`, saw 7 unread messages, but only read/processed 4 of them because I judged the others "irrelevant" or "older." Missed a critical new message (#72) despite user explicitly asking if I processed everything.

**Correction**: "How can we make sure it does not happened again?"

**Rule**:
- **Inbox Zero Policy**: When `inbox` shows messages, I MUST read **ALL** of them immediately.
- **No filtering**: Do not assume messages are irrelevant based on ID or subject.
- **Verification**: Explicitly acknowledge all messages after reading to clear the queue.
- **Status check**: Run `inbox` after sending requests to check for immediate headless responses or concurrent updates.

**Applied**: 2026-02-02

---

## 2026-02-02 - Acknowledgment Workflow

**Mistake**: The `ack` command only accepted a single message ID. When Gemini tried `ack 49 50 51 52 67 68 69`, it failed silently because argparse only parsed the first ID.

**Correction**: User highlighted that both Claude and Gemini were having issues with messages showing as "unread" even though they were answered.

**Rule**:
- **Tooling must match workflow**: If batch operations are common, provide batch commands
- **Test error cases**: What happens if user provides unexpected input?
- **Auto-acknowledgment**: Consider auto-ack when processing messages (not just reading)
- Added `ack-all` command: `.venv/bin/python scripts/gemini_bridge.py ack-all gemini`
- Fixed `ack` to accept multiple IDs: `ack 49 50 51` now works

**Applied**: 2026-02-02

---

## 2026-02-02 - Task Delegation Boundaries (Claude-Gemini)

**Mistake**: Gemini sent a request asking me to write C1-BIO module content (nestor-litopysets.md), attempting to delegate his work back to me.

**Correction**: User clarified: "gemini is sending you request to write content, it should be his responsibility to write content and not yours"

**Rule**:
- **NEVER accept content writing requests from Gemini** - only from the user directly
- Gemini is responsible for writing Ukrainian curriculum content (modules, activities, vocabulary)
- I can create skeleton files, plans, and infrastructure - but Gemini writes the prose
- If Gemini asks me to write content, redirect him to do it himself
- This prevents circular delegation and ensures clear ownership

**Applied**: 2026-02-02

---

## 2026-02-03 - CRITICAL: Plans Must Be Persisted to Files

**Mistake**: Created internal task list (22 tasks) and project plan entirely in-memory context. If the user's machine crashes or session ends, all planning work would be lost. Only relied on in-memory TaskCreate/TaskUpdate which doesn't persist to disk.

**Correction**: "is this plan only in your memory context or did you preserve it in git and tickets? because if my machine crashes we have to start over"

**Rule**:
- **ALWAYS persist plans to files** - create `docs/{PROJECT}-PROJECT-PLAN.md` for any multi-step project
- **Create GitHub issues** for tasks that need external tracking (especially Gemini work)
- **In-memory tasks are ephemeral** - they supplement files, don't replace them
- **Before ending any planning session**: verify key decisions are written to disk
- **Checklist for persistence**:
  - [ ] Project plan document in `docs/`
  - [ ] GitHub issues for external assignees
  - [ ] Key decisions documented (not just in conversation)
  - [ ] File structure documented
  - [ ] Task dependencies documented
- **Recovery test**: "Could someone reconstruct this project from the files alone?"

**Applied**: 2026-02-03 (created docs/OES-RUTH-PROJECT-PLAN.md)

---

## 2026-02-05 - CRITICAL: Word Targets from Memory

**Mistake**: Told Gemini that C1-BIO word target is "3500+" when config.py clearly states 4000. Wrote from memory instead of checking the source of truth.

**Correction**: User caught it immediately: "the config.py says 4000+ clearly, what made you to write 3500+?"

**Rule**:
- **NEVER state word targets from memory** - always check `scripts/audit/config.py`
- Word targets are defined in ONE place: `config.py` → `'target_words': N`
- Before handoff to Gemini or any batch task: verify numbers against config
- Quick check: `grep -A5 "{track}" scripts/audit/config.py | grep target`
- Word targets are MINIMUMS (per CLAUDE.md critical rules) - underestimating is worse than overestimating

**Applied**: 2026-02-05 (sent correction to Gemini, updated issue #506)

---

## 2026-02-05 - Research-First Workflow Success (VALIDATED)

**Observation**: Gemini successfully one-shot biography modules using research-first workflow (#506).

**Data (19 C1-BIO modules):**
- **Average word count:** 4894 words (vs 4000 target = 122% achievement)
- **Richness scores:** 97-99% across all modules
- **Audit status:** All 19 passed on first try
- **Range:** 4372-5779 words per module
- **No rework needed:** Content quality sufficient from first generation

**Key Success Factors**:
- Research phase before content generation (web search, encyclopedias, primary sources)
- Structured notes with citations
- Outline integration with plan requirements
- Ukrainian-only research skill ensures authentic sources

**Rule**:
- **ALWAYS use research-first workflow for seminar tracks** (B2-HIST, C1-BIO, C1-HIST, LIT, OES, RUTH)
- Writing from memory → thin content (2000-3000 words), inaccuracies, failed word counts
- Research-first → rich content (4500-5500 words), authoritative, passes audits
- One-shot generation possible with proper research foundation
- Document workflow in `docs/RESEARCH-FIRST-WORKFLOW.md`

**Applied**: 2026-02-05 (C1-BIO batch #506, all 19 modules passed - data validated)

---

## Template for New Entries

```markdown
## [Date] - [Category]

**Mistake**:

**Correction**:

**Rule**:

**Applied**: -
```
