
import re

file_path = 'curriculum/l2-uk-en/c1/activities/31-diaspora-ukrainian.yaml'
with open(file_path, 'r') as f:
    content = f.read()

# Replacements for Quiz Prompts
replacements = [
    ('question: Коли почалася перша масова хвиля еміграції українців до Канади?', 
     'question: Коли саме розпочалася перша масова хвиля трудової еміграції українських селян до Канади, яка поклала початок формуванню потужної діаспори?'),
    ('question: Яку назву отримала третя хвиля еміграції \(після Другої світової війни\)\?', 
     'question: Яку історичну назву отримала третя хвиля української еміграції, що складалася переважно з політичних біженців та переміщених осіб після Другої світової війни?'),
    ('question: Що було головною метою діяльності політичної еміграції в XX столітті\?', 
     'question: Що було головною стратегічною метою діяльності української політичної еміграції в країнах Заходу протягом усього XX століття до 1991 року?'),
     
    ('question: Яке місто в Бразилії називають "столицею українців" \(75% населення —\n      нащадки українців\)\?', 
     'question: Яке унікальне місто в Бразилії неофіційно називають "столицею українців", оскільки 75% його населення складають нащадки перших українських переселенців з Галичини?'),
     
    ('question: У якій країні українців найбільше у відсотковому відношенні до населення\?', 
     'question: У якій країні світу, окрім України, українська діаспора становить найбільшу частку у відсотковому відношенні до загальної кількості населення цієї держави?'),
     
    ('question: Як називається район Нью-Йорка, відомий як "Маленька Україна"\?', 
     'question: Як називається відомий історичний район у місті Нью-Йорк, який традиційно називають "Маленька Україна" через велику кількість українських установ та магазинів?'),
     
    ('question: Де знаходиться пам\'ятник писанці висотою 9 метрів\?', 
     'question: У якому канадському місті провінції Альберта знаходиться знаменитий пам\'ятник гігантській українській писанці висотою 9 метрів, що обертається за вітром?'),
     
    ('question: Хто з відомих канадських політиків має українське походження\?', 
     'question: Хто з відомих сучасних канадських політиків високого рангу має українське походження і активно лобіює інтереси України на міжнародній арені?')
]

for old, new in replacements:
    # Use re.sub just in case of slight whitespace variations, but try literal first logic essentially
    # Escaping regex specials in 'old' is handled manually above (e.g. \?)
    content = re.sub(old, new, content)

# Fix Schema: mark-the-words missing instruction
# Look for: type: mark-the-words\n  title: Знайдіть діаспоризми\n  text:
# Replace with: type: mark-the-words\n  title: Знайдіть діаспоризми\n  instruction: "Знайдіть та виділіть..."\n  text:
if "title: Знайдіть діаспоризми" in content and "instruction:" not in content.split("title: Знайдіть діаспоризми")[1].split("text:")[0]:
    content = content.replace("title: Знайдіть діаспоризми\n  text:", 
                              "title: Знайдіть діаспоризми\n  instruction: \"Знайдіть у тексті та виділіть усі діалектизми та слова, характерні для мови української діаспори (діаспоризми).\"\n  text:")

with open(file_path, 'w') as f:
    f.write(content)
